"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[90802],{90802:(vt,y,s)=>{s.r(y),s.d(y,{GroupingNotificationPushLogsModule:()=>yt});var p=s(96814),T=s(23758);const x={index:"/api/app/grouping-notification-push-logs"},L=[{dataField:"notificationCategoryId",path:"/api/app/notification-infos/assignable-notification-categories",pathForSelectedDisplay:"/api/app/notification-categories"}],K=[],v=[{dataField:"notificationInfoId",queryStringKey:"notificationInfoId",mapping:["notificationInfoId"]},{dataField:"tenantName",queryStringKey:"TenantName",mapping:["tenantName"]},{dataField:"notificationInfoName",queryStringKey:"NotificationInfoName",mapping:["notificationInfoName"]},{dataField:"typeShow",queryStringKey:"TypeShow",mapping:["typeShow"]},{dataField:"notificationProviderNames",queryStringKey:"NotificationProviderNames",mapping:["notificationProviderNames"]},{dataField:"notificationSchedulePlanDescription",queryStringKey:"NotificationSchedulePlanDescription",mapping:["notificationSchedulePlanDescription"]},{dataField:"receiverDescription",queryStringKey:"ReceiverDescription",mapping:["receiverDescription"]},{dataField:"notificationCategoryName",queryStringKey:"NotificationCategoryName",mapping:["notificationCategoryName"]},{dataField:"title",queryStringKey:"Title",mapping:["title"]},{dataField:"notificationDataFetchEndpoint",queryStringKey:"NotificationDataFetchEndpoint",mapping:["notificationDataFetchEndpoint"]},{dataField:"hookEndpoint",queryStringKey:"HookEndpoint",mapping:["hookEndpoint"]},{dataField:"successCount",queryStringKey:"SuccessCount",mapping:["successCount"]},{dataField:"failureCount",queryStringKey:"FailureCount",mapping:["failureCount"]},{dataField:"isFinished",queryStringKey:"IsFinished",mapping:["isFinished"]},{dataField:"notificationProviders",queryStringKey:"notificationProviders",mapping:["notificationProviders"]},{dataField:"isRePushable",queryStringKey:"IsRePushable",mapping:["isRePushable"]}],F={imageUpload:{fileUploadMode:"both",tabs:["url","file"]},toolbar:{items:[{name:"undo"},{name:"redo"},{name:"separator"},{name:"size",acceptedValues:["8pt","10pt","12pt","14pt","18pt","24pt","36pt"]},{name:"font",acceptedValues:["Arial","Georgia","Tahoma","Times New Roman","Verdana"]},{name:"separator"},{name:"bold"},{name:"italic"},{name:"strike"},{name:"underline"},{name:"separator"},{name:"alignLeft"},{name:"alignCenter"},{name:"alignRight"},{name:"alignJustify"},{name:"separator"},{name:"orderedList"},{name:"bulletList"},{name:"separator"},{name:"header",acceptedValues:[!1,1,2,3,4,5]},{name:"separator"},{name:"color"},{name:"background"},{name:"separator"},{name:"link"},{name:"image"},{name:"separator"},{name:"clear"},{name:"codeBlock"},{name:"blockquote"},{name:"separator"},{name:"insertTable"},{name:"deleteTable"},{name:"insertRowAbove"},{name:"insertRowBelow"},{name:"deleteRow"},{name:"insertColumnLeft"},{name:"insertColumnRight"},{name:"deleteColumn"},{name:"cellProperties"},{name:"tableProperties"}]}},C=[{itemType:"group",name:"basicGroup",caption:"\u57fa\u672c",colCount:2,items:[{dataField:"notificationProviderDefinitionIds"},{itemType:"group",name:"receiverGroup",colCount:2,items:[{dataField:"isForAllReceivers",editorType:"dxCheckBox"},{itemType:"empty"},{dataField:"receiverIds",label:{visible:!1}},{dataField:"receiverGroupIds",label:{visible:!1}}]}]},{itemType:"group",name:"notificationSettingGroup",caption:"\u8a2d\u5b9a",colCount:2,items:[{dataField:"notificationSettingRadioGroup",label:{visible:!1}},{dataField:"notificationSettingItems",label:{visible:!1}}]},{itemType:"group",name:"notificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"notificationCategoryId",editorType:"dxSelectBox"},{dataField:"title",editorType:"dxTextBox"},{itemType:"group",name:"textboxGroup",items:[{dataField:"subtitle",editorType:"dxTextBox"},{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox"},{dataField:"hookEndpoint",editorType:"dxTextBox"}]},{itemType:"group",name:"textareaGroup",items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"100px"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox"}]},{dataField:"htmlContent",colSpan:2,editorType:"dxHtmlEditor",editorOptions:{...F,height:"250px"}}]}],M=[{itemType:"group",name:"basicGroup",caption:"\u57fa\u672c",colCount:2,items:[{dataField:"notificationProviderDefinitionIds"},{itemType:"group",name:"receiverGroup",colCount:2,items:[{dataField:"isForAllReceivers",editorType:"dxCheckBox",editorOptions:{disabled:!0}},{itemType:"empty"},{dataField:"receiverIds",label:{visible:!1}},{dataField:"receiverGroupIds",label:{visible:!1}}]}]},{itemType:"group",name:"notificationSettingGroup",caption:"\u8a2d\u5b9a",colCount:2,items:[{dataField:"notificationSettingRadioGroup",label:{visible:!1}},{dataField:"notificationSettingItems",label:{visible:!1}}]},{itemType:"group",name:"notificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"notificationCategoryId",editorType:"dxSelectBox",editorOptions:{disabled:!0}},{dataField:"title",editorType:"dxTextBox",editorOptions:{disabled:!0}},{itemType:"group",name:"textboxGroup",items:[{dataField:"subtitle",editorType:"dxTextBox",editorOptions:{disabled:!0}},{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",editorOptions:{disabled:!0}},{dataField:"hookEndpoint",editorType:"dxTextBox",editorOptions:{disabled:!0}}]},{itemType:"group",name:"textareaGroup",items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"100px",disabled:!0}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",editorOptions:{disabled:!0}}]},{dataField:"htmlContent",colSpan:2,editorType:"dxHtmlEditor",editorOptions:{...F,height:"250px",disabled:!0}}]}],O={form:{colCount:1,items:C}},Q={form:{colCount:1,items:M},popup:{wrapperAttr:{class:"instant-notification-infos-view"},toolbarItems:[]}},G=[{type:"buttons",fixed:!0,buttons:[{name:"repush",template:"repush"}]},{dataField:"notificationInfoId",caption:"\u6a19\u984c",dataType:"string",visible:!1},{dataField:"tenantName",caption:"\u79df\u6236",dataType:"string"},{dataField:"notificationInfoName",caption:"\u901a\u77e5\u540d\u7a31",dataType:"string"},{dataField:"typeShow",caption:"\u578b\u614b",dataType:"string"},{dataField:"notificationProviderNames",caption:"\u63d0\u4f9b\u8005",dataType:"string"},{dataField:"notificationSchedulePlanDescription",caption:"\u6642\u9593\u8a08\u756b",dataType:"string"},{dataField:"receiverDescription",caption:"\u63a5\u6536\u8005",dataType:"string"},{dataField:"notificationCategoryName",caption:"\u5206\u985e",dataType:"string"},{dataField:"title",caption:"\u6a19\u984c",dataType:"string"},{dataField:"notificationDataFetchEndpoint",caption:"\u53d6\u5f97\u8cc7\u6599endpoint",dataType:"string"},{dataField:"hookEndpoint",caption:"Hook Endpoint",dataType:"string"},{dataField:"successCount",caption:"\u6210\u529f\u6b21\u6578",dataType:"number"},{dataField:"failureCount",caption:"\u5931\u6557\u6b21\u6578",dataType:"number"},{dataField:"isFinished",caption:"\u5df2\u5b8c\u6210",dataType:"boolean"},{dataField:"notificationProviders",caption:"\u63d0\u4f9b\u8005\u6e05\u55ae",dataType:"object",visible:!1},{dataField:"isRePushable",caption:"isRePushable",dataType:"boolean",visible:!1}];var t=s(19212),P=s(67),S=s(72783),u=s(53009),g=s(88762),m=s(24270),b=s(44347),f=s(64133),I=s(10313),h=s(20843),c=s(2173),_=s(25012);const J=[{dataField:"notificationProviderId",caption:"\u63d0\u4f9b\u8005\u540d\u7a31"},{dataField:"notificationProviderName",caption:"\u63d0\u4f9b\u8005\u540d\u7a31"},{dataField:"successCount",caption:"\u6210\u529f\u6b21\u6578"},{dataField:"failureCount",caption:"\u5931\u6557\u6b21\u6578"},{dataField:"isRePushable",caption:"isRePushable"},{type:"buttons",buttons:[{name:"detail",template:"detail"},{name:"repush",template:"repush"}]}],w={index:"/api/app/instant-notification-infos",get:"/api/app/instant-notification-infos",create:"/api/app/instant-notification-infos",update:"/api/app/instant-notification-infos",delete:"/api/app/instant-notification-infos"},N=[{dataField:"id",mapping:["notificationPushLogId"],queryStringKey:"NotificationPushLogId"},{dataField:"notificationPushLogId",mapping:["notificationPushLogId"],queryStringKey:"NotificationPushLogId"},{dataField:"notificationSchedulePlanName",mapping:["notificationSchedulePlanName"],queryStringKey:"NotificationSchedulePlanName"},{dataField:"pushTime",mapping:["pushTime"],queryStringKey:"PushTime"},{dataField:"receiverName",mapping:["receiverName"],queryStringKey:"ReceiverName"},{dataField:"title",mapping:["title"],queryStringKey:"Title"},{dataField:"subtitle",mapping:["subtitle"],queryStringKey:"Subtitle"},{dataField:"shortTextContent",mapping:["shortTextContent"],queryStringKey:"TextContent"},{dataField:"shortHtmlContent",mapping:["shortHtmlContent"],queryStringKey:"HtmlContent"},{dataField:"isModifiedWhenPending",mapping:["isModifiedWhenPending"],queryStringKey:"IsModifiedWhenPending"},{dataField:"isSuccess",mapping:["isSuccess"],queryStringKey:"IsSuccess"},{dataField:"shortResultMessages",mapping:["shortResultMessages"],queryStringKey:"ShortResultMessages"},{dataField:"isReceiverRead",mapping:["isReceiverRead"],queryStringKey:"IsReceiverRead"},{dataField:"isRePushable",mapping:["isRePushable"],queryStringKey:"IsRePushable"}],A=[{type:"buttons",fixed:!0,buttons:[{name:"repush",template:"repush"}]},{dataField:"id",caption:"",dataType:"string",visible:!1},{dataField:"notificationPushLogId",caption:"",dataType:"string",visible:!1},{dataField:"notificationSchedulePlanName",caption:"\u6642\u9593\u8a08\u756b\u540d\u7a31",dataType:"string"},{dataField:"pushTime",caption:"\u63a8\u9001\u6642\u9593",dataType:"datetime"},{dataField:"receiverName",caption:"\u63a5\u6536\u8005\u540d\u7a31",dataType:"string"},{dataField:"title",caption:"\u6a19\u984c",dataType:"string"},{dataField:"subtitle",caption:"\u5b50\u6a19\u984c",dataType:"string"},{dataField:"shortTextContent",caption:"\u7d14\u6587\u5b57\u5167\u5bb9",cellTemplate:"shortTextContent"},{dataField:"shortHtmlContent",caption:"Html\u5167\u5bb9",cellTemplate:"shortHtmlContent"},{dataField:"isModifiedWhenPending",caption:"\u7b49\u5019\u5340\u7570\u52d5",dataType:"boolean"},{dataField:"isSuccess",caption:"\u6210\u529f",dataType:"boolean"},{dataField:"shortResultMessages",caption:"\u8a73\u7d30\u8a0a\u606f",dataType:"string"},{dataField:"isReceiverRead",caption:"\u63a5\u6536\u8005\u5df2\u8b80",dataType:"boolean"},{dataField:"isRePushable",caption:"isRePushable",dataType:"boolean",visible:!1}];var Z=s(16358),k=s(98179),D=s(89267),R=s(33630);const B=["grid"];function E(e,o){if(1&e&&t._UZ(0,"app-grid-general-filter",11),2&e){t.oxw();const i=t.MAs(2);t.Q6J("grid",i)}}function q(e,o){1&e&&t.GkF(0)}const U=e=>({$implicit:e});function Y(e,o){if(1&e&&(t.ynx(0),t.YNc(1,q,1,0,"ng-container",12),t.BQk()),2&e){const i=o.$implicit,n=t.oxw().$implicit,a=t.oxw(2);t.xp6(),t.Q6J("ngTemplateOutlet",a.templateStore.getGridTemplates(n.key))("ngTemplateOutletContext",t.VKq(2,U,i))}}function $(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Y,2,4,"ng-container",2),t.BQk()),2&e){const i=o.$implicit;t.xp6(),t.Q6J("dxTemplateOf",i.key)}}function H(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"app-repush-button",14),t.NdJ("buttonClick",function(){t.CHM(i);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.singleRepush(a.data.notificationPushLogId))}),t.qZA()}}function V(e,o){if(1&e&&(t.ynx(0),t.YNc(1,H,1,0,"app-repush-button",13),t.BQk()),2&e){const i=o.$implicit;t.xp6(),t.Q6J("ngIf",i.data.isRePushable)}}function z(e,o){if(1&e&&t._UZ(0,"app-text-content-viewer",15),2&e){const i=o.$implicit;t.Q6J("simplifiedText",i.value)("url","/api/app/grouping-notification-push-logs/text-contents/"+(null==i.data?null:i.data.id))}}function X(e,o){if(1&e&&t._UZ(0,"app-html-content-viewer",15),2&e){const i=o.$implicit;t.Q6J("simplifiedText",i.value)("url","/api/app/grouping-notification-push-logs/html-contents/"+(null==i.data?null:i.data.id))}}function W(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"dx-data-grid",3,4),t.NdJ("selectedRowKeysChange",function(a){t.CHM(i);const r=t.oxw();return t.KtG(r.selectedNotificationPushLogs=a)}),t.TgZ(3,"dxo-toolbar"),t._UZ(4,"dxi-item",5),t.TgZ(5,"dxi-item",6),t.YNc(6,E,1,1,"app-grid-general-filter",7),t.qZA(),t._UZ(7,"dxi-item",8),t.qZA(),t.YNc(8,$,2,1,"ng-container",9),t.ALo(9,"keyvalue"),t.YNc(10,V,2,1,"ng-container",2)(11,z,1,2,"app-text-content-viewer",10)(12,X,1,2,"app-html-content-viewer",10),t.qZA()()}if(2&e){const i=t.oxw();t.xp6(),t.Q6J("dataFieldTranslationKeysMapping",i.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",i.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",i.dataFieldLookupSourceMapping)("columns",i.columns)("dataSource",i.gridDataSource)("gridProperties",i.gridProperties)("selectedRowKeys",i.selectedNotificationPushLogs),t.xp6(3),t.Q6J("options",i.repushButtonProperties),t.xp6(4),t.Q6J("ngForOf",t.lcZ(9,12,i.templateStore.gridTemplates)),t.xp6(2),t.Q6J("dxTemplateOf","repush"),t.xp6(),t.Q6J("dxTemplateOf","shortTextContent"),t.xp6(),t.Q6J("dxTemplateOf","shortHtmlContent")}}let j=(()=>{class e{constructor(i,n,a,r,d){this.appRestService=i,this.gridDataSourceService=n,this.templateStore=a,this.configStateService=r,this.toastService=d,this.visible=!1,this.gridDataSource=[],this.cRUDEndpoints=w,this.relatedDataValueAndQueryStringKeyMapping=N,this.dataFieldTranslationKeysMapping=[],this.dataFieldLookupSourceMapping=[],this.columns=A,this.selectedNotificationPushLogs=[],this.gridProperties={editing:{allowAdding:!1},selection:{mode:"multiple",allowSelectAll:!0,selectAllMode:"page"}},this.repushButtonProperties={type:"default",stylingMode:"contained",text:"\u518d\u6b21\u767c\u9001(\u591a\u7b46)",onClick:()=>{const l=this.selectedNotificationPushLogs.map(xt=>xt.notificationPushLogId);this.repush(l)}},this.columns.find(l=>"shortResultMessages"===l.dataField).calculateDisplayValue=l=>l.shortResultMessages||"\u7121\u932f\u8aa4\u8a0a\u606f"}showDetail(){if(this.notificationInfoId&&this.notificationProviderDefinitionId){const i=`/api/app/grouping-notification-push-logs/details/${this.notificationInfoId}/${this.notificationProviderDefinitionId}`;this.visible=!0,this.gridDataSource=this.gridDataSourceService.getDataSource({index:i},N)}}singleRepush(i){this.repush([i])}repush(i){const n=this.configStateService.getOne("currentUser");this.appRestService.request({method:"POST",url:"/api/app/grouping-notification-push-logs/repush-by-notification-push-log-ids",body:{tenantId:n.tenantId,notificationPushLogIds:i}}).subscribe(()=>{this.toastService.success("\u64cd\u4f5c\u6210\u529f!\uff0c\u56e0\u767c\u9001\u9700\u8981\u6642\u9593\uff0c\u6210\u529f\u6b21\u6578\u4e0d\u6703\u99ac\u4e0a\u767c\u751f\u8b8a\u5316\u3002")})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.$),t.Y36(P.I),t.Y36(S.z),t.Y36(g.XJE),t.Y36(m.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-push-log-details"]],viewQuery:function(n,a){if(1&n&&t.Gf(B,5),2&n){let r;t.iGM(r=t.CRH())&&(a.grid=r.first)}},inputs:{notificationInfoId:"notificationInfoId",notificationProviderDefinitionId:"notificationProviderDefinitionId"},decls:3,vars:4,consts:[["icon","detailslayout","stylingMode","contained","type","success",3,"hint","onClick"],["contentTemplate","content",3,"visible","showCloseButton","visibleChange"],[4,"dxTemplate","dxTemplateOf"],["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","columns","dataSource","gridProperties","selectedRowKeys","selectedRowKeysChange"],["grid",""],["location","before","widget","dxButton","cssClass","mb-1",3,"options"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[3,"simplifiedText","url",4,"dxTemplate","dxTemplateOf"],[3,"grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"buttonClick",4,"ngIf"],[3,"buttonClick"],[3,"simplifiedText","url"]],template:function(n,a){1&n&&(t.TgZ(0,"dx-button",0),t.NdJ("onClick",function(){return a.showDetail()}),t.qZA(),t.TgZ(1,"dx-popup",1),t.NdJ("visibleChange",function(d){return a.visible=d}),t.YNc(2,W,13,14,"div",2),t.qZA()),2&n&&(t.Q6J("hint","\u6aa2\u8996\u660e\u7d30"),t.xp6(),t.Q6J("visible",a.visible)("showCloseButton",!0),t.xp6(),t.Q6J("dxTemplateOf","content"))},dependencies:[p.sg,p.O5,p.tP,b._,f.f,I.w,Z.K,h.p6,c.ZT3,k.x,_.e,c.y1f,D.Q,R.$,p.Nd],styles:["dx-popup[_ngcontent-%COMP%]{display:none!important}"]})}return e})();function tt(e,o){if(1&e&&t._UZ(0,"app-push-log-details",3),2&e){const i=o.$implicit,n=t.oxw();t.Q6J("notificationInfoId",null==n.data?null:n.data.notificationInfoId)("notificationProviderDefinitionId",null==i.data?null:i.data.notificationProviderId)}}function et(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"app-repush-button",5),t.NdJ("buttonClick",function(){t.CHM(i);const a=t.oxw().$implicit,r=t.oxw();return t.KtG(r.repush(a.data.notificationProviderId))}),t.qZA()}}function it(e,o){if(1&e&&(t.ynx(0),t.YNc(1,et,1,0,"app-repush-button",4),t.BQk()),2&e){const i=o.$implicit;t.xp6(),t.Q6J("ngIf",i.data.isRePushable)}}let nt=(()=>{class e{constructor(i,n,a){this.appRestService=i,this.configStateService=n,this.toastService=a,this.columns=J}showDetail(i,n){this.notificationInfoId=i,this.notificationProviderDefinitionId=n}repush(i){const n=this.configStateService.getOne("currentUser"),{notificationInfoId:a}=this.data;this.appRestService.request({method:"POST",url:"/api/app/grouping-notification-push-logs/repush-by-notification-info-id-and-notification-provider-definition-id",body:{tenantId:n.tenantId,notificationInfoId:a,notificationProviderDefinitionId:i}}).subscribe(r=>{this.toastService.success("\u64cd\u4f5c\u6210\u529f!\uff0c\u56e0\u767c\u9001\u9700\u8981\u6642\u9593\uff0c\u6210\u529f\u6b21\u6578\u4e0d\u6703\u99ac\u4e0a\u767c\u751f\u8b8a\u5316\u3002")})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.$),t.Y36(g.XJE),t.Y36(m.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-grid-master-detail"]],inputs:{data:"data"},decls:5,vars:4,consts:[[3,"columns","dataSource"],[3,"notificationInfoId","notificationProviderDefinitionId",4,"dxTemplate","dxTemplateOf"],[4,"dxTemplate","dxTemplateOf"],[3,"notificationInfoId","notificationProviderDefinitionId"],[3,"buttonClick",4,"ngIf"],[3,"buttonClick"]],template:function(n,a){1&n&&(t.TgZ(0,"h3"),t._uU(1," \u901a\u77e5\u670d\u52d9\u63d0\u4f9b\u8005\u6e05\u55ae\n"),t.qZA(),t.TgZ(2,"dx-data-grid",0),t.YNc(3,tt,1,2,"app-push-log-details",1)(4,it,2,1,"ng-container",2),t.qZA()),2&n&&(t.xp6(2),t.Q6J("columns",a.columns)("dataSource",null==a.data?null:a.data.notificationProviders),t.xp6(),t.Q6J("dxTemplateOf","detail"),t.xp6(),t.Q6J("dxTemplateOf","repush"))},dependencies:[p.O5,f.f,h.p6,_.e,j]})}return e})();const at=["grid"];function ot(e,o){if(1&e&&t._UZ(0,"app-grid-general-filter",8),2&e){t.oxw();const i=t.MAs(1);t.Q6J("grid",i)}}function st(e,o){1&e&&t.GkF(0)}const rt=e=>({$implicit:e});function pt(e,o){if(1&e&&(t.ynx(0),t.YNc(1,st,1,0,"ng-container",9),t.BQk()),2&e){const i=o.$implicit,n=t.oxw().$implicit,a=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",a.templateStore.getGridTemplates(n.key))("ngTemplateOutletContext",t.VKq(2,rt,i))}}function dt(e,o){if(1&e&&(t.ynx(0),t.YNc(1,pt,2,4,"ng-container",7),t.BQk()),2&e){const i=o.$implicit;t.xp6(),t.Q6J("dxTemplateOf",i.key)}}function lt(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"app-password-input",10),t.NdJ("valueChanged",function(a){const d=t.CHM(i).$implicit;return t.KtG(d.setValue(a))}),t.qZA()}if(2&e){const i=o.$implicit;t.Q6J("value",i.value)("editorOptions",null==i.item?null:i.item.editorOptions)}}function ct(e,o){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-grid-master-detail",11),t.qZA()),2&e){const i=o.$implicit;t.xp6(),t.Q6J("data",i.data)}}function ut(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"app-repush-button",13),t.NdJ("buttonClick",function(){t.CHM(i);const a=t.oxw().$implicit,r=t.oxw();return t.KtG(r.repush(a.data.notificationInfoId))}),t.qZA()}}function gt(e,o){if(1&e&&(t.ynx(0),t.YNc(1,ut,1,0,"app-repush-button",12),t.BQk()),2&e){const i=o.$implicit;t.xp6(),t.Q6J("ngIf",i.data.isRePushable)}}const mt=[{path:"",component:(()=>{class e{constructor(i,n,a,r,d){this.gridDataSourceService=i,this.templateStore=n,this.appRestService=a,this.configStateService=r,this.toastService=d,this.columns=G,this.cRUDEndpoints=x,this.dataFieldLookupSourceMapping=L,this.dataFieldTranslationKeysMapping=K,this.relatedDataValueAndQueryStringKeyMapping=v,this.editingPropertiesForCreating=O,this.editingPropertiesForUpdating=Q,this.gridProperties={masterDetail:{enabled:!0,template:"detail"}}}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(x,v)}repush(i){const n=this.configStateService.getOne("currentUser");this.appRestService.request({method:"POST",url:"/api/app/grouping-notification-push-logs/repush-by-notification-info-id",body:{tenantId:n.tenantId,notificationInfoId:i}}).subscribe(()=>{this.toastService.success("\u64cd\u4f5c\u6210\u529f!\uff0c\u56e0\u767c\u9001\u9700\u8981\u6642\u9593\uff0c\u6210\u529f\u6b21\u6578\u4e0d\u6703\u99ac\u4e0a\u767c\u751f\u8b8a\u5316\u3002")})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(P.I),t.Y36(S.z),t.Y36(u.$),t.Y36(g.XJE),t.Y36(m.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-grouping-notification-push-logs"]],viewQuery:function(n,a){if(1&n&&t.Gf(at,5),2&n){let r;t.iGM(r=t.CRH())&&(a.grid=r.first)}},decls:11,vars:14,consts:[["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","gridProperties"],["grid",""],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[3,"value","editorOptions","valueChanged",4,"dxTemplate","dxTemplateOf"],[4,"dxTemplate","dxTemplateOf"],[3,"grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"value","editorOptions","valueChanged"],[3,"data"],[3,"buttonClick",4,"ngIf"],[3,"buttonClick"]],template:function(n,a){1&n&&(t.TgZ(0,"dx-data-grid",0,1)(2,"dxo-toolbar")(3,"dxi-item",2),t.YNc(4,ot,1,1,"app-grid-general-filter",3),t.qZA(),t._UZ(5,"dxi-item",4),t.qZA(),t.YNc(6,dt,2,1,"ng-container",5),t.ALo(7,"keyvalue"),t.YNc(8,lt,1,2,"app-password-input",6)(9,ct,2,1,"div",7)(10,gt,2,1,"ng-container",7),t.qZA()),2&n&&(t.Q6J("dataFieldTranslationKeysMapping",a.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",a.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",a.dataFieldLookupSourceMapping)("editingPropertiesForCreating",a.editingPropertiesForCreating)("editingPropertiesForUpdating",a.editingPropertiesForUpdating)("columns",a.columns)("dataSource",a.gridDataSource)("gridProperties",a.gridProperties),t.xp6(6),t.Q6J("ngForOf",t.lcZ(7,12,a.templateStore.gridTemplates)),t.xp6(2),t.Q6J("dxTemplateOf","password-input"),t.xp6(),t.Q6J("dxTemplateOf","detail"),t.xp6(),t.Q6J("dxTemplateOf","repush"))},dependencies:[p.sg,p.O5,p.tP,b._,f.f,I.w,h.p6,c.ZT3,_.e,c.y1f,nt,p.Nd]})}return e})()}];let ft=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[T.Bz.forChild(mt),T.Bz]})}return e})();var ht=s(5533),_t=s(31610);let yt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[p.ez,_t.m,ht.P,ft,D.Q,R.$]})}return e})()}}]);