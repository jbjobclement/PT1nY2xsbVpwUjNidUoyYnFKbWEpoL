"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[30532],{30532:(ft,g,s)=>{s.r(g),s.d(g,{CreateNotificationInfoModule:()=>mt});var c=s(96814),N=s(31610),d=s(88762),l=s(23758);const S=[],F=[{dataField:"notificationProviderIds",path:"/api/app/instant-notifications/notification-provider-lookup"},{dataField:"receiverIds",path:"/api/app/instant-notifications/receiver-lookup"},{dataField:"topicIds",path:"/api/app/instant-notifications/topic-lookup"},{dataField:"receiverGroupIds",path:"/api/app/notification-infos/receiver-group-treeview"},{dataField:"notificationCategoryId",path:"/api/app/instant-notifications/notification-category-lookup"},{dataField:"textContentNotificationTemplateId",path:"/api/app/instant-notifications/notification-template-lookup"}],y=[{dataField:"notificationProviderIds",path:"/api/app/reserved-notifications/notification-provider-lookup"},{dataField:"receiverIds",path:"/api/app/reserved-notifications/receiver-lookup"},{dataField:"topicIds",path:"/api/app/reserved-notifications/topic-lookup"},{dataField:"receiverGroupIds",path:"/api/app/notification-infos/receiver-group-treeview"},{dataField:"notificationCategoryId",path:"/api/app/reserved-notifications/notification-category-lookup"},{dataField:"textContentNotificationTemplateId",path:"/api/app/reserved-notifications/notification-template-lookup"}],G=[{dataField:"notificationProviderIds",path:"/api/app/recurring-notifications/notification-provider-lookup"},{dataField:"receiverIds",path:"/api/app/recurring-notifications/receiver-lookup"},{dataField:"topicIds",path:"/api/app/recurring-notifications/topic-lookup"},{dataField:"receiverGroupIds",path:"/api/app/notification-infos/receiver-group-treeview"},{dataField:"notificationCategoryId",path:"/api/app/recurring-notifications/notification-category-lookup"},{dataField:"textContentNotificationTemplateId",path:"/api/app/recurring-notifications/notification-template-lookup"}];var m=s(85054),f=s(35130);const D={colCount:1,items:[{itemType:"group",name:"BasicGroup",cssClass:"BasicGroup",caption:"\u57fa\u672c",items:[{dataField:"notificationProviderIds",template:"notificationProviderIds",label:{visible:!1,text:"\u901a\u77e5\u63d0\u4f9b\u8005 id (\u53ef\u8907\u9078)"},validationRules:[m.L]},{dataField:"isSendToAllReceivers",template:"isSendToAllReceivers",cssClass:"isSendToAllReceivers",label:{text:"\u63a5\u6536\u8005"}},{itemType:"group",name:"ReceiversGroup",cssClass:"ReceiversGroup",colCount:3,items:[{dataField:"receiverIds",template:"receiverIds",label:{visible:!1,text:"\u63a5\u6536\u8005 (\u53ef\u8907\u9078)"}},{dataField:"receiverGroupIds",template:"receiverGroupIds",label:{visible:!1,text:"\u63a5\u6536\u7fa4\u7d44 (\u53ef\u8907\u9078)"}},{dataField:"topicIds",template:"topicIds",label:{visible:!1,text:"\u4e3b\u984c (\u53ef\u8907\u9078)"}}]}]},{itemType:"group",name:"SettingGroup",cssClass:"SettingGroup",caption:"\u8a2d\u5b9a",items:[{dataField:"isIndependentNotificationSettingUsing",template:"isIndependentNotificationSettingUsing",cssClass:"isIndependentNotificationSettingUsing",label:{text:"\u901a\u77e5\u8a2d\u5b9a"}},{dataField:"notificationSettings",template:"notificationSettings",cssClass:"notificationSettings",label:{visible:!1}}]},{itemType:"group",name:"NotificationContentGroup",cssClass:"NotificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"isUsingTemplate",template:"isUsingTemplate",cssClass:"isUsingTemplate",label:{visible:!1}},{itemType:"empty"},{dataField:"notificationCategoryId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u5206\u985e id"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"title",editorType:"dxTextBox",label:{text:"\u6a19\u984c"}},{dataField:"subtitle",editorType:"dxTextBox",label:{text:"\u5b50\u6a19\u984c"}},{itemType:"group",name:"CustomContentGroup",cssClass:"CustomContentGroup",colSpan:2,colCount:8,items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"240px"},label:{text:"\u6587\u5b57\u5167\u5bb9"},colSpan:3},{dataField:"htmlContent",editorType:"dxHtmlEditor",editorOptions:{...f.W,height:"240px"},label:{text:"HTML \u5167\u5bb9"},colSpan:5}]},{itemType:"group",name:"NotificationTemplateGroup",cssClass:"NotificationTemplateGroup NotificationTemplateGroup--inactive",colSpan:2,colCount:2,items:[{dataField:"textContentNotificationTemplateId",cssClass:"textContentNotificationTemplateId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u6a21\u677f"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"textContentNotificationTemplateArgs",template:"textContentNotificationTemplateArgs",label:{visible:!1},colSpan:2}]},{itemType:"group",name:"EndpointGroup",cssClass:"EndpointGroup",colSpan:2,colCount:3,items:[{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",label:{text:"\u53d6\u5f97\u901a\u77e5\u8cc7\u6599 Endpoint"}},{dataField:"hookEndpoint",editorType:"dxTextBox",label:{text:"Hook"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",cssClass:"basic-form-checkbox",label:{text:"\u662f\u5426\u4f9d\u5404\u901a\u77e5\u63a5\u6536\u8005\u53d6\u5f97\u8cc7\u6599"}}]}]}],formData:{notificationProviderIds:[],isSendToAllReceivers:!0,isIndependentNotificationSettingUsing:!1,isUsingTemplate:!1,isFetchNotificationDataByEachReceiver:!1,receiverIds:[],receiverGroupIds:[],topicIds:[],notificationSettings:[],notificationCategoryId:"",title:"",subTitle:"",textContent:"",htmlContent:"",textContentNotificationTemplateId:"",textContentNotificationTemplateArgs:"",htmlContentNotificationTemplateId:"",htmlContentNotificationTemplateArgs:"",notificationDataFetchEndpoint:"",hookEndpoint:""},elementAttr:{class:"custom-form create-form"}},A={colCount:1,items:[{itemType:"group",name:"BasicGroup",cssClass:"BasicGroup",caption:"\u57fa\u672c",items:[{dataField:"notificationProviderIds",template:"notificationProviderIds",label:{visible:!1,text:"\u901a\u77e5\u63d0\u4f9b\u8005 id (\u53ef\u8907\u9078)"},validationRules:[m.L]},{dataField:"isSendToAllReceivers",template:"isSendToAllReceivers",cssClass:"isSendToAllReceivers",label:{text:"\u63a5\u6536\u8005"}},{itemType:"group",name:"ReceiversGroup",cssClass:"ReceiversGroup",colCount:3,items:[{dataField:"receiverIds",template:"receiverIds",label:{visible:!1,text:"\u63a5\u6536\u8005 (\u53ef\u8907\u9078)"}},{dataField:"receiverGroupIds",template:"receiverGroupIds",label:{visible:!1,text:"\u63a5\u6536\u7fa4\u7d44 (\u53ef\u8907\u9078)"}},{dataField:"topicIds",template:"topicIds",label:{visible:!1,text:"\u4e3b\u984c (\u53ef\u8907\u9078)"}}]}]},{itemType:"group",name:"SettingGroup",cssClass:"SettingGroup",caption:"\u8a2d\u5b9a",items:[{dataField:"isIndependentNotificationSettingUsing",template:"isIndependentNotificationSettingUsing",cssClass:"isIndependentNotificationSettingUsing",label:{text:"\u901a\u77e5\u8a2d\u5b9a"}},{dataField:"notificationSettings",template:"notificationSettings",cssClass:"notificationSettings",label:{visible:!1}}]},{itemType:"group",name:"SchedulePlanGroup",cssClass:"SchedulePlanGroup",caption:"\u9810\u7d04\u6642\u9593\u8a08\u5283",items:[{dataField:"notificationSchedulePlans",template:"reserveNotificationSchedulePlans",label:{visible:!1}}]},{itemType:"group",name:"NotificationContentGroup",cssClass:"NotificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"isUsingTemplate",template:"isUsingTemplate",cssClass:"isUsingTemplate",label:{visible:!1}},{itemType:"empty"},{dataField:"notificationCategoryId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u5206\u985e id"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"title",editorType:"dxTextBox",label:{text:"\u6a19\u984c"}},{dataField:"subtitle",editorType:"dxTextBox",label:{text:"\u5b50\u6a19\u984c"}},{itemType:"group",name:"CustomContentGroup",cssClass:"CustomContentGroup",colSpan:2,colCount:8,items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"240px"},label:{text:"\u6587\u5b57\u5167\u5bb9"},colSpan:3},{dataField:"htmlContent",editorType:"dxHtmlEditor",editorOptions:{...f.W,height:"240px"},label:{text:"HTML \u5167\u5bb9"},colSpan:5}]},{itemType:"group",name:"NotificationTemplateGroup",cssClass:"NotificationTemplateGroup NotificationTemplateGroup--inactive",colSpan:2,colCount:2,items:[{dataField:"textContentNotificationTemplateId",cssClass:"textContentNotificationTemplateId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u6a21\u677f"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"textContentNotificationTemplateArgs",template:"textContentNotificationTemplateArgs",label:{visible:!1},colSpan:2}]},{itemType:"group",name:"EndpointGroup",cssClass:"EndpointGroup",colSpan:2,colCount:3,items:[{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",label:{text:"\u53d6\u5f97\u901a\u77e5\u8cc7\u6599 Endpoint"}},{dataField:"hookEndpoint",editorType:"dxTextBox",label:{text:"Hook"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",cssClass:"basic-form-checkbox",label:{text:"\u662f\u5426\u4f9d\u5404\u901a\u77e5\u63a5\u6536\u8005\u53d6\u5f97\u8cc7\u6599"}}]}]}],formData:{notificationProviderIds:[],isSendToAllReceivers:!0,isIndependentNotificationSettingUsing:!1,isUsingTemplate:!1,isFetchNotificationDataByEachReceiver:!1,receiverIds:[],receiverGroupIds:[],topicIds:[],notificationSettings:[],notificationCategoryId:"",title:"",subTitle:"",textContent:"",htmlContent:"",textContentNotificationTemplateId:"",textContentNotificationTemplateArgs:"",htmlContentNotificationTemplateId:"",htmlContentNotificationTemplateArgs:"",notificationDataFetchEndpoint:"",hookEndpoint:"",notificationSchedulePlans:[]},elementAttr:{class:"custom-form create-form"}},P={colCount:1,items:[{itemType:"group",name:"BasicGroup",cssClass:"BasicGroup",caption:"\u57fa\u672c",items:[{dataField:"notificationProviderIds",template:"notificationProviderIds",label:{visible:!1,text:"\u901a\u77e5\u63d0\u4f9b\u8005 id (\u53ef\u8907\u9078)"},validationRules:[m.L]},{dataField:"isSendToAllReceivers",template:"isSendToAllReceivers",cssClass:"isSendToAllReceivers",label:{text:"\u63a5\u6536\u8005"}},{itemType:"group",name:"ReceiversGroup",cssClass:"ReceiversGroup",colCount:3,items:[{dataField:"receiverIds",template:"receiverIds",label:{visible:!1,text:"\u63a5\u6536\u8005 (\u53ef\u8907\u9078)"}},{dataField:"receiverGroupIds",template:"receiverGroupIds",label:{visible:!1,text:"\u63a5\u6536\u7fa4\u7d44 (\u53ef\u8907\u9078)"}},{dataField:"topicIds",template:"topicIds",label:{visible:!1,text:"\u4e3b\u984c (\u53ef\u8907\u9078)"}}]}]},{itemType:"group",name:"SettingGroup",cssClass:"SettingGroup",caption:"\u8a2d\u5b9a",items:[{dataField:"isIndependentNotificationSettingUsing",template:"isIndependentNotificationSettingUsing",cssClass:"isIndependentNotificationSettingUsing",label:{text:"\u901a\u77e5\u8a2d\u5b9a"}},{dataField:"notificationSettings",template:"notificationSettings",cssClass:"notificationSettings",label:{visible:!1}}]},{itemType:"group",name:"SchedulePlanGroup",cssClass:"SchedulePlanGroup",caption:"\u91cd\u8907\u6642\u9593\u8a08\u5283",items:[{dataField:"notificationSchedulePlans",template:"recurringNotificationSchedulePlans",label:{visible:!1}}]},{itemType:"group",name:"NotificationContentGroup",cssClass:"NotificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"isUsingTemplate",template:"isUsingTemplate",cssClass:"isUsingTemplate",label:{visible:!1}},{itemType:"empty"},{dataField:"notificationCategoryId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u5206\u985e id"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"title",editorType:"dxTextBox",label:{text:"\u6a19\u984c"}},{dataField:"subtitle",editorType:"dxTextBox",label:{text:"\u5b50\u6a19\u984c"}},{itemType:"group",name:"CustomContentGroup",cssClass:"CustomContentGroup",colSpan:2,colCount:8,items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"240px"},label:{text:"\u6587\u5b57\u5167\u5bb9"},colSpan:3},{dataField:"htmlContent",editorType:"dxHtmlEditor",editorOptions:{...f.W,height:"240px"},label:{text:"HTML \u5167\u5bb9"},colSpan:5}]},{itemType:"group",name:"NotificationTemplateGroup",cssClass:"NotificationTemplateGroup NotificationTemplateGroup--inactive",colSpan:2,colCount:2,items:[{dataField:"textContentNotificationTemplateId",cssClass:"textContentNotificationTemplateId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u6a21\u677f"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"textContentNotificationTemplateArgs",template:"textContentNotificationTemplateArgs",label:{visible:!1},colSpan:2}]},{itemType:"group",name:"EndpointGroup",cssClass:"EndpointGroup",colSpan:2,colCount:3,items:[{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",label:{text:"\u53d6\u5f97\u901a\u77e5\u8cc7\u6599 Endpoint"}},{dataField:"hookEndpoint",editorType:"dxTextBox",label:{text:"Hook"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",cssClass:"basic-form-checkbox",label:{text:"\u662f\u5426\u4f9d\u5404\u901a\u77e5\u63a5\u6536\u8005\u53d6\u5f97\u8cc7\u6599"}}]}]}],formData:{notificationProviderIds:[],isSendToAllReceivers:!0,isIndependentNotificationSettingUsing:!1,isUsingTemplate:!1,isFetchNotificationDataByEachReceiver:!1,receiverIds:[],receiverGroupIds:[],topicIds:[],notificationSettings:[],notificationCategoryId:"",title:"",subTitle:"",textContent:"",htmlContent:"",textContentNotificationTemplateId:"",textContentNotificationTemplateArgs:"",htmlContentNotificationTemplateId:"",htmlContentNotificationTemplateArgs:"",notificationDataFetchEndpoint:"",hookEndpoint:"",notificationSchedulePlans:[]},elementAttr:{class:"custom-form create-form"}};var R=s(48684),p=s(6990),t=s(19212),U=s(53009),B=s(71036),E=s(27310),J=s(16358),w=s(20843),M=s(609),T=s(44932),_=s(68833),O=s(26600);function Z(o,r){1&o&&(t.TgZ(0,"span",7),t._uU(1,"\xa0*"),t.qZA())}function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t._uU(2),t.qZA(),t.TgZ(3,"div",10),t.NdJ("click",function(){const n=t.CHM(e).$index,C=t.oxw();return t.KtG(C.removeItem(n))}),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(2),t.hij(" ",e.name," ")}}const L=o=>({"notification-tag-box-list--show":o});let x=(()=>{class o{constructor(){this.valueChange=new t.vpe,this.treeViewDataSource=[],this.selectedTreeViewItems=[]}ngOnInit(){this.dataSource.store.load().then(e=>{this.treeViewDataSource=e})}selectedChange(e){this.selectedTreeViewItems=this.treeViewDataSource.filter(i=>e?.includes(i.id)),this.valueChange.emit(e)}removeItem(e){this.selectedTreeViewItems.splice(e,1),this.selectedChange(this.selectedTreeViewItems.map(i=>i.id))}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-notification-tree-view"]],inputs:{fetchURL:"fetchURL",dataSource:"dataSource",rowData:"rowData",label:"label",isRequired:"isRequired",value:"value"},outputs:{valueChange:"valueChange"},standalone:!0,features:[t.jDz],decls:10,vars:7,consts:[[1,"notification-tag-box"],[1,"notification-tag-box-label","dx-field-item-label","dx-field-item-label-location-top"],[1,"dx-field-item-label-content"],[1,"dx-field-item-label-text"],["class","dx-field-item-required-mark"],[3,"dataSource","selected","selectedChange"],[1,"notification-tag-box-list",3,"ngClass"],[1,"dx-field-item-required-mark"],[1,"notification-tag-box-item"],[1,"notification-tag-box-item-name"],[1,"notification-tag-box-item-close",3,"click"],["class","notification-tag-box-item"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"label",1)(2,"span",2)(3,"span",3),t._uU(4),t.qZA(),t.YNc(5,Z,2,0,"span",4),t.qZA()(),t.TgZ(6,"app-jb-tree-view",5),t.NdJ("selectedChange",function(C){return a.selectedChange(C)}),t.qZA(),t.TgZ(7,"div",6),t.SjG(8,k,4,1,"div",11,t.ikw),t.qZA()()),2&i&&(t.xp6(4),t.hij(" ",a.label," "),t.xp6(),t.um2(5,a.isRequired?5:-1),t.xp6(),t.Q6J("dataSource",a.treeViewDataSource)("selected",a.value),t.xp6(),t.Q6J("ngClass",t.VKq(5,L,a.selectedTreeViewItems.length)),t.xp6(),t.wJu(a.selectedTreeViewItems))},dependencies:[O.c,c.ez,c.mk]})}return o})();var h=s(90962),v=s(68545),I=s(14963),b=s(41661);const Q=["form"];function H(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-tag-box",12),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.notificationProviderIds=a)}),t.qZA()}if(2&o){const e=r.$implicit,i=t.oxw();t.Q6J("dataSource",e.editorOptions.dataSource)("label",i.formProperties.items[0].items[0].label.text)("isRequired",i.formProperties.items[0].items[0].validationRules&&"required"===(null==i.formProperties.items[0].items[0].validationRules[0]?null:i.formProperties.items[0].items[0].validationRules[0].type))("value",i.formProperties.formData.notificationProviderIds)}}const K=()=>({name:"\u6240\u6709\u4eba",value:!0}),q=()=>({name:"\u6307\u5b9a\u63a5\u6536\u8005",value:!1}),u=(o,r)=>[o,r];function V(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-radio-button",13),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.isSendToAllReceivers=a)})("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleNotificationRadioButton(a,"isSendToAllReceivers"))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dataSource",t.WLB(4,u,t.DdM(2,K),t.DdM(3,q)))("value",e.formProperties.formData.isSendToAllReceivers)}}function j(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-tag-box",14),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.receiverIds=a)}),t.qZA()}if(2&o){const e=r.$implicit,i=t.oxw();t.Q6J("dataSource",e.editorOptions.dataSource)("label",i.formProperties.items[0].items[2].items[0].label.text)("isRequired",i.formProperties.items[0].items[2].items[0].validationRules&&"required"===(null==i.formProperties.items[0].items[2].items[0].validationRules[0]?null:i.formProperties.items[0].items[2].items[0].validationRules[0].type))("value",i.formProperties.formData.receiverIds)("hidden",i.formProperties.formData.isSendToAllReceivers)}}function z(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-tree-view",14),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.receiverGroupIds=a)}),t.qZA()}if(2&o){const e=r.$implicit,i=t.oxw();t.Q6J("dataSource",e.editorOptions.dataSource)("label",i.formProperties.items[0].items[2].items[1].label.text)("isRequired",i.formProperties.items[0].items[2].items[1].validationRules&&"required"===i.formProperties.items[0].items[2].items[1].validationRules[0].type)("value",i.formProperties.formData.receiverGroupIds)("hidden",i.formProperties.formData.isSendToAllReceivers)}}function Y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-tag-box",14),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.topicIds=a)}),t.qZA()}if(2&o){const e=r.$implicit,i=t.oxw();t.Q6J("dataSource",e.editorOptions.dataSource)("label",i.formProperties.items[0].items[2].items[2].label.text)("isRequired",i.formProperties.items[0].items[2].items[2].validationRules&&"required"===i.formProperties.items[0].items[2].items[2].validationRules[0].type)("value",i.formProperties.formData.topicIds)("hidden",i.formProperties.formData.isSendToAllReceivers)}}const $=()=>({name:"\u5957\u7528\u5171\u7528\u8a2d\u5b9a",value:!1}),W=()=>({name:"\u53e6\u884c\u8a2d\u5b9a",value:!0});function X(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-radio-button",13),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.isIndependentNotificationSettingUsing=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dataSource",t.WLB(4,u,t.DdM(2,$),t.DdM(3,W)))("value",e.formProperties.formData.isIndependentNotificationSettingUsing)}}function tt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-setting-items",15),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.notificationSettings=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("isIndependentNotificationSettingUsing",e.formProperties.formData.isIndependentNotificationSettingUsing)("value",e.formProperties.formData.notificationSettings)}}const et=()=>({name:"\u81ea\u8a02",value:!1}),it=()=>({name:"\u6a21\u677f",value:!0});function ot(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-radio-button",13),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.isUsingTemplate=a)})("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleNotificationRadioButton(a,"isUsingTemplate"))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dataSource",t.WLB(4,u,t.DdM(2,et),t.DdM(3,it)))("value",e.formProperties.formData.isUsingTemplate)}}function at(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-template-args",16),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.textContentNotificationTemplateArgs=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("notificationTemplateId",e.formProperties.formData.textContentNotificationTemplateId)("value",e.formProperties.formData.textContentNotificationTemplateArgs)}}function nt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-recurring-notification-schedule-plan",17),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.notificationSchedulePlans=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("value",e.formProperties.formData.notificationSchedulePlans)}}function st(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-reserve-notification-schedule-plan",17),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.notificationSchedulePlans=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("value",e.formProperties.formData.notificationSchedulePlans)}}const rt=()=>({class:"custom-button custom-button--blue"}),pt=()=>({class:"custom-button"}),lt=[{path:"",component:(()=>{class o{constructor(e,i,a,n){this.route=e,this.router=i,this.configStateService=a,this.appRestService=n,this.dataFieldTranslationKeysMapping=S,this.createPageTitle="\u65b0\u589e",this.receiverIdsTemp=[],this.receiverGroupIdsTemp=[],this.topicIdsTemp=[],this.textContentNotificationTemplateIdTemp="",this.textContentNotificationTemplateArgsTemp="",this.htmlContentNotificationTemplateIdTemp="",this.htmlContentNotificationTemplateArgsTemp="",this.textContentTemp="",this.htmlContentTemp=""}ngOnInit(){this.SpecifiedTenantId=this.configStateService.getOne("currentTenant").id,this.getParentRouteURL(this.route)}getParentRouteURL(e){if(!e.parent)return;const i=e.parent;switch(this.getParentRouteURL(i),i.snapshot.url.map(n=>n.path).join("/")){case"instant-notification-infos":this.formProperties=(0,p.cloneDeep)(D),this.dataFieldLookupSourceMapping=(0,p.cloneDeep)(F),this.createPageTitle="\u65b0\u589e\u5373\u6642\u901a\u77e5",this.parentURL="./instant-notification-infos",this.postURL="/api/app/instant-notifications";break;case"reserve-notification-infos":this.formProperties=(0,p.cloneDeep)(A),this.dataFieldLookupSourceMapping=(0,p.cloneDeep)(y),this.createPageTitle="\u65b0\u589e\u9810\u7d04\u901a\u77e5",this.parentURL="./reserve-notification-infos",this.postURL="/api/app/reserved-notifications";break;case"recurring-notification-infos":this.formProperties=(0,p.cloneDeep)(P),this.dataFieldLookupSourceMapping=(0,p.cloneDeep)(G),this.createPageTitle="\u65b0\u589e\u91cd\u8907\u901a\u77e5",this.parentURL="./recurring-notification-infos",this.postURL="/api/app/recurring-notifications"}}toggleNotificationRadioButton(e,i){const a=this.form.instance.option("formData");switch(i){case"isSendToAllReceivers":e?(this.receiverIdsTemp=a.receiverIds,this.receiverGroupIdsTemp=a.receiverGroupIds,this.topicIdsTemp=a.topicIds,this.form.instance.updateData("receiverIds",[]),this.form.instance.updateData("receiverGroupIds",[]),this.form.instance.updateData("topicIds",[])):(this.form.instance.updateData("receiverIds",this.receiverIdsTemp),this.form.instance.updateData("receiverGroupIds",this.receiverGroupIdsTemp),this.form.instance.updateData("topicIds",this.topicIdsTemp));break;case"isUsingTemplate":this.form.instance.itemOption("NotificationContentGroup.NotificationTemplateGroup","cssClass",e?"NotificationTemplateGroup":"NotificationTemplateGroup NotificationTemplateGroup--inactive"),this.form.instance.itemOption("NotificationContentGroup.CustomContentGroup","cssClass",e?"CustomContentGroup CustomContentGroup--inactive":"CustomContentGroup"),e?(this.textContentTemp=a.textContent,this.htmlContentTemp=a.htmlContent,this.form.instance.updateData("textContent",""),this.form.instance.updateData("htmlContent",""),this.form.instance.updateData("textContentNotificationTemplateId",this.textContentNotificationTemplateIdTemp),this.form.instance.updateData("textContentNotificationTemplateArgs",this.textContentNotificationTemplateArgsTemp),this.form.instance.updateData("htmlContentNotificationTemplateId",this.htmlContentNotificationTemplateIdTemp),this.form.instance.updateData("htmlContentNotificationTemplateArgs",this.htmlContentNotificationTemplateArgsTemp)):(this.textContentNotificationTemplateIdTemp=a.textContentNotificationTemplateId,this.textContentNotificationTemplateArgsTemp=a.textContentNotificationTemplateArgs,this.htmlContentNotificationTemplateIdTemp=a.htmlContentNotificationTemplateId,this.htmlContentNotificationTemplateArgsTemp=a.htmlContentNotificationTemplateArgs,this.form.instance.updateData("textContentNotificationTemplateId",""),this.form.instance.updateData("textContentNotificationTemplateArgs",""),this.form.instance.updateData("htmlContentNotificationTemplateId",""),this.form.instance.updateData("htmlContentNotificationTemplateArgs",""),this.form.instance.updateData("textContent",this.textContentTemp),this.form.instance.updateData("htmlContent",this.htmlContentTemp))}}handleSubmit(){this.appRestService.request({method:"POST",url:this.postURL,body:this.form.instance.option("formData"),params:{SpecifiedTenantId:this.SpecifiedTenantId}},{apiName:R.O}).subscribe(()=>{this.router.navigate([this.parentURL])})}handleCancel(){this.router.navigate([this.parentURL])}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(d.XJE),t.Y36(U.$))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-notification-info"]],viewQuery:function(i,a){if(1&i&&t.Gf(Q,5),2&i){let n;t.iGM(n=t.CRH())&&(a.form=n.first)}},decls:18,vars:19,consts:[[1,"create-page-title"],["appFormFeature","",3,"formProperties","dataFieldLookUpSourceMapping","dataFieldTranslationKeysMapping"],["form",""],[3,"dataSource","label","isRequired","value","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"dataSource","value","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"dataSource","label","isRequired","value","hidden","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"isIndependentNotificationSettingUsing","value","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"notificationTemplateId","value","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"value","valueChange",4,"dxTemplate","dxTemplateOf"],[1,"form-buttons"],["appCustomButton","","text","\u5132\u5b58",3,"elementAttr","onClick"],["appCustomButton","","text","\u53d6\u6d88",3,"elementAttr","onClick"],[3,"dataSource","label","isRequired","value","valueChange"],[3,"dataSource","value","valueChange"],[3,"dataSource","label","isRequired","value","hidden","valueChange"],[3,"isIndependentNotificationSettingUsing","value","valueChange"],[3,"notificationTemplateId","value","valueChange"],[3,"value","valueChange"]],template:function(i,a){1&i&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"dx-form",1,2),t.YNc(4,H,1,4,"app-notification-tag-box",3)(5,V,1,7,"app-notification-radio-button",4)(6,j,1,5,"app-notification-tag-box",5)(7,z,1,5,"app-notification-tree-view",5)(8,Y,1,5,"app-notification-tag-box",5)(9,X,1,7,"app-notification-radio-button",4)(10,tt,1,2,"app-notification-setting-items",6)(11,ot,1,7,"app-notification-radio-button",4)(12,at,1,2,"app-notification-template-args",7)(13,nt,1,1,"app-recurring-notification-schedule-plan",8)(14,st,1,1,"app-reserve-notification-schedule-plan",8),t.qZA(),t.TgZ(15,"div",9)(16,"dx-button",10),t.NdJ("onClick",function(){return a.handleSubmit()}),t.qZA(),t.TgZ(17,"dx-button",11),t.NdJ("onClick",function(){return a.handleCancel()}),t.qZA()()),2&i&&(t.xp6(),t.Oqu(a.createPageTitle),t.xp6(),t.Q6J("formProperties",a.formProperties)("dataFieldLookUpSourceMapping",a.dataFieldLookupSourceMapping)("dataFieldTranslationKeysMapping",a.dataFieldTranslationKeysMapping),t.xp6(2),t.Q6J("dxTemplateOf","notificationProviderIds"),t.xp6(),t.Q6J("dxTemplateOf","isSendToAllReceivers"),t.xp6(),t.Q6J("dxTemplateOf","receiverIds"),t.xp6(),t.Q6J("dxTemplateOf","receiverGroupIds"),t.xp6(),t.Q6J("dxTemplateOf","topicIds"),t.xp6(),t.Q6J("dxTemplateOf","isIndependentNotificationSettingUsing"),t.xp6(),t.Q6J("dxTemplateOf","notificationSettings"),t.xp6(),t.Q6J("dxTemplateOf","isUsingTemplate"),t.xp6(),t.Q6J("dxTemplateOf","textContentNotificationTemplateArgs"),t.xp6(),t.Q6J("dxTemplateOf","recurringNotificationSchedulePlans"),t.xp6(),t.Q6J("dxTemplateOf","reserveNotificationSchedulePlans"),t.xp6(2),t.Q6J("elementAttr",t.DdM(17,rt)),t.xp6(),t.Q6J("elementAttr",t.DdM(18,pt)))},dependencies:[B._,E.A,J.K,w.p6,M.Y,T.h,_.d,x,h.b,v.E,I.t,b.v],styles:[".create-page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:600;line-height:28px;color:var(--blue-1);letter-spacing:var(--letter-1);padding:16px 0 32px;margin-bottom:0}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;padding-bottom:24px}"]})}return o})(),canActivate:[d.a1M,d.nG9]}];let ct=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(lt),l.Bz]})}return o})();var dt=s(5533);let mt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[c.ez,ct,N.m,dt.P,T.h,_.d,x,h.b,v.E,I.t,b.v]})}return o})()}}]);