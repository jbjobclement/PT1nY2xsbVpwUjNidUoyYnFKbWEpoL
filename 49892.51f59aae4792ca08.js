"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[49892],{49892:(ut,g,s)=>{s.r(g),s.d(g,{CreateNotificationInfoModule:()=>ft});var N=s(96814),F=s(31610),x=s(88762),m=s(23758);const y=[],G=[{dataField:"notificationProviderIds",path:"/api/app/instant-notifications/notification-provider-lookup"},{dataField:"receiverIds",path:"/api/app/instant-notifications/receiver-lookup"},{dataField:"topicIds",path:"/api/app/instant-notifications/topic-lookup"},{dataField:"receiverGroupIds",path:"/api/app/notification-infos/receiver-group-treeview"},{dataField:"notificationCategoryId",path:"/api/app/instant-notifications/notification-category-lookup"},{dataField:"textContentNotificationTemplateId",path:"/api/app/instant-notifications/notification-template-lookup"},{dataField:"SpecifiedTenantId",path:"/api/app/jbnotifier-admin/customized-users/tenant-lookup"}],D=[{dataField:"notificationProviderIds",path:"/api/app/reserved-notifications/notification-provider-lookup"},{dataField:"receiverIds",path:"/api/app/reserved-notifications/receiver-lookup"},{dataField:"topicIds",path:"/api/app/reserved-notifications/topic-lookup"},{dataField:"receiverGroupIds",path:"/api/app/notification-infos/receiver-group-treeview"},{dataField:"notificationCategoryId",path:"/api/app/reserved-notifications/notification-category-lookup"},{dataField:"textContentNotificationTemplateId",path:"/api/app/reserved-notifications/notification-template-lookup"},{dataField:"SpecifiedTenantId",path:"/api/app/jbnotifier-admin/customized-users/tenant-lookup"}],P=[{dataField:"notificationProviderIds",path:"/api/app/recurring-notifications/notification-provider-lookup"},{dataField:"receiverIds",path:"/api/app/recurring-notifications/receiver-lookup"},{dataField:"topicIds",path:"/api/app/recurring-notifications/topic-lookup"},{dataField:"receiverGroupIds",path:"/api/app/notification-infos/receiver-group-treeview"},{dataField:"notificationCategoryId",path:"/api/app/recurring-notifications/notification-category-lookup"},{dataField:"textContentNotificationTemplateId",path:"/api/app/recurring-notifications/notification-template-lookup"},{dataField:"SpecifiedTenantId",path:"/api/app/jbnotifier-admin/customized-users/tenant-lookup"}],R=[{dataField:"notificationProviderIds",path:"/api/app/instant-notifications/notification-provider-lookup"},{dataField:"receiverIds",path:"/api/app/instant-notifications/receiver-lookup"},{dataField:"topicIds",path:"/api/app/instant-notifications/topic-lookup"},{dataField:"receiverGroupIds",path:"/api/app/notification-infos/receiver-group-treeview"},{dataField:"notificationCategoryId",path:"/api/app/instant-notifications/notification-category-lookup"},{dataField:"textContentNotificationTemplateId",path:"/api/app/instant-notifications/notification-template-lookup"},{dataField:"SpecifiedTenantId",path:"/api/app/jbnotifier-admin/customized-users/tenant-lookup"}];var r=s(85054),u=s(35130);const A={colCount:1,items:[{itemType:"group",name:"BasicGroup",cssClass:"BasicGroup",caption:"\u57fa\u672c",items:[{dataField:"SpecifiedTenantId",editorType:"dxSelectBox",label:{text:"\u6307\u5b9a\u79df\u6236"}},{dataField:"name",editorType:"dxTextBox",label:{text:"\u901a\u77e5\u540d\u7a31"},validationRules:[r.L]},{dataField:"notificationProviderIds",template:"notificationProviderIds",label:{visible:!1,text:"\u901a\u77e5\u63d0\u4f9b\u8005 id (\u53ef\u8907\u9078)"},validationRules:[r.L]},{dataField:"isSendToAllReceivers",template:"isSendToAllReceivers",cssClass:"isSendToAllReceivers",label:{text:"\u63a5\u6536\u8005"}},{itemType:"group",name:"ReceiversGroup",cssClass:"ReceiversGroup",colCount:3,items:[{dataField:"receiverIds",template:"receiverIds",label:{visible:!1,text:"\u63a5\u6536\u8005 (\u53ef\u8907\u9078)"}},{dataField:"receiverGroupIds",template:"receiverGroupIds",label:{visible:!1,text:"\u63a5\u6536\u7fa4\u7d44 (\u53ef\u8907\u9078)"}},{dataField:"topicIds",template:"topicIds",label:{visible:!1,text:"\u4e3b\u984c (\u53ef\u8907\u9078)"}}]}]},{itemType:"group",name:"SettingGroup",cssClass:"SettingGroup",caption:"\u8a2d\u5b9a",items:[{dataField:"isIndependentNotificationSettingUsing",template:"isIndependentNotificationSettingUsing",cssClass:"isIndependentNotificationSettingUsing",label:{text:"\u901a\u77e5\u8a2d\u5b9a"}},{dataField:"notificationSettings",template:"notificationSettings",cssClass:"notificationSettings",label:{visible:!1},validationRules:[r.L]}]},{itemType:"group",name:"NotificationContentGroup",cssClass:"NotificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"isUsingTemplate",template:"isUsingTemplate",cssClass:"isUsingTemplate",label:{visible:!1}},{itemType:"empty"},{dataField:"notificationCategoryId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u5206\u985e id"},validationRules:[r.L]},{itemType:"empty"},{dataField:"title",editorType:"dxTextBox",label:{text:"\u6a19\u984c"},validationRules:[r.L]},{dataField:"subtitle",editorType:"dxTextBox",label:{text:"\u5b50\u6a19\u984c"}},{itemType:"group",name:"CustomContentGroup",cssClass:"CustomContentGroup",colSpan:2,colCount:8,items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"240px"},label:{text:"\u6587\u5b57\u5167\u5bb9"},colSpan:3},{dataField:"htmlContent",editorType:"dxHtmlEditor",editorOptions:{...u.W,height:"240px"},label:{text:"HTML \u5167\u5bb9"},colSpan:5}]},{itemType:"group",name:"NotificationTemplateGroup",cssClass:"NotificationTemplateGroup NotificationTemplateGroup--inactive",colSpan:2,colCount:2,items:[{dataField:"textContentNotificationTemplateId",cssClass:"textContentNotificationTemplateId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u6a21\u677f"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"textContentNotificationTemplateArgs",template:"textContentNotificationTemplateArgs",label:{visible:!1},colSpan:2}]},{itemType:"group",name:"EndpointGroup",cssClass:"EndpointGroup",colSpan:2,colCount:3,items:[{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",label:{text:"\u53d6\u5f97\u901a\u77e5\u8cc7\u6599 Endpoint"}},{dataField:"hookEndpoint",editorType:"dxTextBox",label:{text:"Hook"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",cssClass:"basic-form-checkbox",label:{text:"\u662f\u5426\u4f9d\u5404\u901a\u77e5\u63a5\u6536\u8005\u53d6\u5f97\u8cc7\u6599"}}]}]}],formData:{notificationProviderIds:[],isSendToAllReceivers:!0,isIndependentNotificationSettingUsing:!1,isUsingTemplate:!1,isFetchNotificationDataByEachReceiver:!1,receiverIds:[],receiverGroupIds:[],topicIds:[],notificationSettings:[],notificationCategoryId:"",title:"",subTitle:"",textContent:"",htmlContent:"",textContentNotificationTemplateId:"",textContentNotificationTemplateArgs:"",htmlContentNotificationTemplateId:"",htmlContentNotificationTemplateArgs:"",notificationDataFetchEndpoint:"",hookEndpoint:""},elementAttr:{class:"custom-form create-form"}},E={colCount:1,items:[{itemType:"group",name:"BasicGroup",cssClass:"BasicGroup",caption:"\u57fa\u672c",items:[{dataField:"SpecifiedTenantId",editorType:"dxSelectBox",label:{text:"\u6307\u5b9a\u79df\u6236"}},{dataField:"name",editorType:"dxTextBox",label:{text:"\u901a\u77e5\u540d\u7a31"},validationRules:[r.L]},{dataField:"notificationProviderIds",template:"notificationProviderIds",label:{visible:!1,text:"\u901a\u77e5\u63d0\u4f9b\u8005 id (\u53ef\u8907\u9078)"},validationRules:[r.L]},{dataField:"isSendToAllReceivers",template:"isSendToAllReceivers",cssClass:"isSendToAllReceivers",label:{text:"\u63a5\u6536\u8005"}},{itemType:"group",name:"ReceiversGroup",cssClass:"ReceiversGroup",colCount:3,items:[{dataField:"receiverIds",template:"receiverIds",label:{visible:!1,text:"\u63a5\u6536\u8005 (\u53ef\u8907\u9078)"}},{dataField:"receiverGroupIds",template:"receiverGroupIds",label:{visible:!1,text:"\u63a5\u6536\u7fa4\u7d44 (\u53ef\u8907\u9078)"}},{dataField:"topicIds",template:"topicIds",label:{visible:!1,text:"\u4e3b\u984c (\u53ef\u8907\u9078)"}}]}]},{itemType:"group",name:"SettingGroup",cssClass:"SettingGroup",caption:"\u8a2d\u5b9a",items:[{dataField:"isIndependentNotificationSettingUsing",template:"isIndependentNotificationSettingUsing",cssClass:"isIndependentNotificationSettingUsing",label:{text:"\u901a\u77e5\u8a2d\u5b9a"}},{dataField:"notificationSettings",template:"notificationSettings",cssClass:"notificationSettings",label:{visible:!1}}]},{itemType:"group",name:"SchedulePlanGroup",cssClass:"SchedulePlanGroup",caption:"\u9810\u7d04\u6642\u9593\u8a08\u5283",items:[{dataField:"notificationSchedulePlans",template:"reserveNotificationSchedulePlans",cssClass:"notificationSchedulePlans",label:{visible:!1}}]},{itemType:"group",name:"NotificationContentGroup",cssClass:"NotificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"isUsingTemplate",template:"isUsingTemplate",cssClass:"isUsingTemplate",label:{visible:!1}},{itemType:"empty"},{dataField:"notificationCategoryId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u5206\u985e id"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."},validationRules:[r.L]},{itemType:"empty"},{dataField:"title",editorType:"dxTextBox",label:{text:"\u6a19\u984c"},validationRules:[r.L]},{dataField:"subtitle",editorType:"dxTextBox",label:{text:"\u5b50\u6a19\u984c"}},{itemType:"group",name:"CustomContentGroup",cssClass:"CustomContentGroup",colSpan:2,colCount:8,items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"240px"},label:{text:"\u6587\u5b57\u5167\u5bb9"},colSpan:3},{dataField:"htmlContent",editorType:"dxHtmlEditor",editorOptions:{...u.W,height:"240px"},label:{text:"HTML \u5167\u5bb9"},colSpan:5}]},{itemType:"group",name:"NotificationTemplateGroup",cssClass:"NotificationTemplateGroup NotificationTemplateGroup--inactive",colSpan:2,colCount:2,items:[{dataField:"textContentNotificationTemplateId",cssClass:"textContentNotificationTemplateId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u6a21\u677f"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"textContentNotificationTemplateArgs",template:"textContentNotificationTemplateArgs",label:{visible:!1},colSpan:2}]},{itemType:"group",name:"EndpointGroup",cssClass:"EndpointGroup",colSpan:2,colCount:3,items:[{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",label:{text:"\u53d6\u5f97\u901a\u77e5\u8cc7\u6599 Endpoint"}},{dataField:"hookEndpoint",editorType:"dxTextBox",label:{text:"Hook"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",cssClass:"basic-form-checkbox",label:{text:"\u662f\u5426\u4f9d\u5404\u901a\u77e5\u63a5\u6536\u8005\u53d6\u5f97\u8cc7\u6599"}}]}]}],formData:{notificationProviderIds:[],isSendToAllReceivers:!0,isIndependentNotificationSettingUsing:!1,isUsingTemplate:!1,isFetchNotificationDataByEachReceiver:!1,receiverIds:[],receiverGroupIds:[],topicIds:[],notificationSettings:[],notificationCategoryId:"",title:"",subTitle:"",textContent:"",htmlContent:"",textContentNotificationTemplateId:"",textContentNotificationTemplateArgs:"",htmlContentNotificationTemplateId:"",htmlContentNotificationTemplateArgs:"",notificationDataFetchEndpoint:"",hookEndpoint:"",notificationSchedulePlans:[]},elementAttr:{class:"custom-form create-form"}},B={colCount:1,items:[{itemType:"group",name:"BasicGroup",cssClass:"BasicGroup",caption:"\u57fa\u672c",items:[{dataField:"SpecifiedTenantId",editorType:"dxSelectBox",label:{text:"\u6307\u5b9a\u79df\u6236"}},{dataField:"name",editorType:"dxTextBox",label:{text:"\u901a\u77e5\u540d\u7a31"},validationRules:[r.L]},{dataField:"notificationProviderIds",template:"notificationProviderIds",label:{visible:!1,text:"\u901a\u77e5\u63d0\u4f9b\u8005 id (\u53ef\u8907\u9078)"},validationRules:[r.L]},{dataField:"isSendToAllReceivers",template:"isSendToAllReceivers",cssClass:"isSendToAllReceivers",label:{text:"\u63a5\u6536\u8005"}},{itemType:"group",name:"ReceiversGroup",cssClass:"ReceiversGroup",colCount:3,items:[{dataField:"receiverIds",template:"receiverIds",label:{visible:!1,text:"\u63a5\u6536\u8005 (\u53ef\u8907\u9078)"}},{dataField:"receiverGroupIds",template:"receiverGroupIds",label:{visible:!1,text:"\u63a5\u6536\u7fa4\u7d44 (\u53ef\u8907\u9078)"}},{dataField:"topicIds",template:"topicIds",label:{visible:!1,text:"\u4e3b\u984c (\u53ef\u8907\u9078)"}}]}]},{itemType:"group",name:"SettingGroup",cssClass:"SettingGroup",caption:"\u8a2d\u5b9a",items:[{dataField:"isIndependentNotificationSettingUsing",template:"isIndependentNotificationSettingUsing",cssClass:"isIndependentNotificationSettingUsing",label:{text:"\u901a\u77e5\u8a2d\u5b9a"}},{dataField:"notificationSettings",template:"notificationSettings",cssClass:"notificationSettings",label:{visible:!1}}]},{itemType:"group",name:"SchedulePlanGroup",cssClass:"SchedulePlanGroup",caption:"\u91cd\u8907\u6642\u9593\u8a08\u5283",items:[{dataField:"notificationSchedulePlans",template:"recurringNotificationSchedulePlans",cssClass:"notificationSchedulePlans",label:{visible:!1}}]},{itemType:"group",name:"NotificationContentGroup",cssClass:"NotificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"isUsingTemplate",template:"isUsingTemplate",cssClass:"isUsingTemplate",label:{visible:!1}},{itemType:"empty"},{dataField:"notificationCategoryId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u5206\u985e id"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."},validationRules:[r.L]},{itemType:"empty"},{dataField:"title",editorType:"dxTextBox",label:{text:"\u6a19\u984c"},validationRules:[r.L]},{dataField:"subtitle",editorType:"dxTextBox",label:{text:"\u5b50\u6a19\u984c"}},{itemType:"group",name:"CustomContentGroup",cssClass:"CustomContentGroup",colSpan:2,colCount:8,items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"240px"},label:{text:"\u6587\u5b57\u5167\u5bb9"},colSpan:3},{dataField:"htmlContent",editorType:"dxHtmlEditor",editorOptions:{...u.W,height:"240px"},label:{text:"HTML \u5167\u5bb9"},colSpan:5}]},{itemType:"group",name:"NotificationTemplateGroup",cssClass:"NotificationTemplateGroup NotificationTemplateGroup--inactive",colSpan:2,colCount:2,items:[{dataField:"textContentNotificationTemplateId",cssClass:"textContentNotificationTemplateId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u6a21\u677f"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"textContentNotificationTemplateArgs",template:"textContentNotificationTemplateArgs",label:{visible:!1},colSpan:2}]},{itemType:"group",name:"EndpointGroup",cssClass:"EndpointGroup",colSpan:2,colCount:3,items:[{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",label:{text:"\u53d6\u5f97\u901a\u77e5\u8cc7\u6599 Endpoint"}},{dataField:"hookEndpoint",editorType:"dxTextBox",label:{text:"Hook"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",cssClass:"basic-form-checkbox",label:{text:"\u662f\u5426\u4f9d\u5404\u901a\u77e5\u63a5\u6536\u8005\u53d6\u5f97\u8cc7\u6599"}}]}]}],formData:{notificationProviderIds:[],isSendToAllReceivers:!0,isIndependentNotificationSettingUsing:!1,isUsingTemplate:!1,isFetchNotificationDataByEachReceiver:!1,receiverIds:[],receiverGroupIds:[],topicIds:[],notificationSettings:[],notificationCategoryId:"",title:"",subTitle:"",textContent:"",htmlContent:"",textContentNotificationTemplateId:"",textContentNotificationTemplateArgs:"",htmlContentNotificationTemplateId:"",htmlContentNotificationTemplateArgs:"",notificationDataFetchEndpoint:"",hookEndpoint:"",notificationSchedulePlans:[]},elementAttr:{class:"custom-form create-form"}},U={colCount:1,items:[{itemType:"group",name:"CronExpressionGroup",cssClass:"CronExpressionGroup",caption:"",colCount:2,items:[{dataField:"expectedPushCount",editorType:"dxNumberBox",cssClass:"expectedPushCount",label:{text:"\u9810\u8a08\u63a8\u9001\u6b21\u6578"},validationRules:[r.L]},{dataField:"expectedEndTime",editorType:"dxDateBox",cssClass:"expectedEndTime",label:{text:"\u9810\u8a08\u7d50\u675f\u6642\u9593"},editorOptions:{type:"datetime",onOpened:o=>{o.component._popup.option("position",{at:"left"})}},validationRules:[r.L]}]},{itemType:"group",name:"BasicGroup",cssClass:"BasicGroup",caption:"\u57fa\u672c",items:[{dataField:"SpecifiedTenantId",editorType:"dxSelectBox",label:{text:"\u6307\u5b9a\u79df\u6236"}},{dataField:"name",editorType:"dxTextBox",label:{text:"\u901a\u77e5\u540d\u7a31"},validationRules:[r.L]},{dataField:"notificationProviderIds",template:"notificationProviderIds",label:{visible:!1,text:"\u901a\u77e5\u63d0\u4f9b\u8005 id (\u53ef\u8907\u9078)"},validationRules:[r.L]},{dataField:"isSendToAllReceivers",template:"isSendToAllReceivers",cssClass:"isSendToAllReceivers",label:{text:"\u63a5\u6536\u8005"}},{itemType:"group",name:"ReceiversGroup",cssClass:"ReceiversGroup",colCount:3,items:[{dataField:"receiverIds",template:"receiverIds",label:{visible:!1,text:"\u63a5\u6536\u8005 (\u53ef\u8907\u9078)"}},{dataField:"receiverGroupIds",template:"receiverGroupIds",label:{visible:!1,text:"\u63a5\u6536\u7fa4\u7d44 (\u53ef\u8907\u9078)"}},{dataField:"topicIds",template:"topicIds",label:{visible:!1,text:"\u4e3b\u984c (\u53ef\u8907\u9078)"}}]}]},{itemType:"group",name:"SettingGroup",cssClass:"SettingGroup",caption:"\u8a2d\u5b9a",items:[{dataField:"isIndependentNotificationSettingUsing",template:"isIndependentNotificationSettingUsing",cssClass:"isIndependentNotificationSettingUsing",label:{text:"\u901a\u77e5\u8a2d\u5b9a"}},{dataField:"notificationSettings",template:"notificationSettings",cssClass:"notificationSettings",label:{visible:!1}}]},{itemType:"group",name:"NotificationContentGroup",cssClass:"NotificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"isUsingTemplate",template:"isUsingTemplate",cssClass:"isUsingTemplate",label:{visible:!1}},{itemType:"empty"},{dataField:"notificationCategoryId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u5206\u985e id"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."},validationRules:[r.L]},{itemType:"empty"},{dataField:"title",editorType:"dxTextBox",label:{text:"\u6a19\u984c"},validationRules:[r.L]},{dataField:"subtitle",editorType:"dxTextBox",label:{text:"\u5b50\u6a19\u984c"}},{itemType:"group",name:"CustomContentGroup",cssClass:"CustomContentGroup",colSpan:2,colCount:8,items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"240px"},label:{text:"\u6587\u5b57\u5167\u5bb9"},colSpan:3},{dataField:"htmlContent",editorType:"dxHtmlEditor",editorOptions:{...u.W,height:"240px"},label:{text:"HTML \u5167\u5bb9"},colSpan:5}]},{itemType:"group",name:"NotificationTemplateGroup",cssClass:"NotificationTemplateGroup NotificationTemplateGroup--inactive",colSpan:2,colCount:2,items:[{dataField:"textContentNotificationTemplateId",cssClass:"textContentNotificationTemplateId",editorType:"dxSelectBox",label:{text:"\u901a\u77e5\u6a21\u677f"},editorOptions:{placeholder:"\u8acb\u9078\u64c7..."}},{itemType:"empty"},{dataField:"textContentNotificationTemplateArgs",template:"textContentNotificationTemplateArgs",label:{visible:!1},colSpan:2}]},{itemType:"group",name:"EndpointGroup",cssClass:"EndpointGroup",colSpan:2,colCount:3,items:[{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",label:{text:"\u53d6\u5f97\u901a\u77e5\u8cc7\u6599 Endpoint"}},{dataField:"hookEndpoint",editorType:"dxTextBox",label:{text:"Hook"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",cssClass:"basic-form-checkbox",label:{text:"\u662f\u5426\u4f9d\u5404\u901a\u77e5\u63a5\u6536\u8005\u53d6\u5f97\u8cc7\u6599"}}]}]}],formData:{notificationProviderIds:[],isSendToAllReceivers:!0,isIndependentNotificationSettingUsing:!1,isUsingTemplate:!1,isFetchNotificationDataByEachReceiver:!1,receiverIds:[],receiverGroupIds:[],topicIds:[],notificationSettings:[],notificationCategoryId:"",title:"",subTitle:"",textContent:"",htmlContent:"",textContentNotificationTemplateId:"",textContentNotificationTemplateArgs:"",htmlContentNotificationTemplateId:"",htmlContentNotificationTemplateArgs:"",notificationDataFetchEndpoint:"",hookEndpoint:"",expectedPushCount:null,expectedEndTime:null,cronExpression:""},elementAttr:{class:"custom-form create-form"}};var L=s(48684),f=s(6990),t=s(19212),k=s(53009),M=s(71036),O=s(27310),J=s(16358),Z=s(20843),Q=s(609),h=s(44932),T=s(68833),v=s(95072),_=s(90962),I=s(68545),b=s(14963),S=s(41661);const H=["form"];function w(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-tag-box",13),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.notificationProviderIds=a)}),t.qZA()}if(2&o){const e=p.$implicit,i=t.oxw();t.Q6J("dataSource",e.editorOptions.dataSource)("label",i.formProperties.items[0+(i.isUsingCronExpressions&&1)].items[2].label.text)("isRequired",!0)("value",i.formProperties.formData.notificationProviderIds)}}const K=()=>({name:"\u6240\u6709\u4eba",value:!0}),V=()=>({name:"\u6307\u5b9a\u63a5\u6536\u8005",value:!1}),C=(o,p)=>[o,p];function j(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-radio-button",14),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.isSendToAllReceivers=a)})("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleNotificationRadioButton(a,"isSendToAllReceivers"))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dataSource",t.WLB(4,C,t.DdM(2,K),t.DdM(3,V)))("value",e.formProperties.formData.isSendToAllReceivers)}}function z(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-tag-box",15),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.receiverIds=a)}),t.qZA()}if(2&o){const e=p.$implicit,i=t.oxw();t.Q6J("dataSource",e.editorOptions.dataSource)("label",i.formProperties.items[0+(i.isUsingCronExpressions&&1)].items[4].items[0].label.text)("value",i.formProperties.formData.receiverIds)("hidden",i.formProperties.formData.isSendToAllReceivers)}}function $(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-tree-view",16),t.NdJ("selectedChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.receiverGroupIds=a)}),t.qZA()}if(2&o){const e=p.$implicit,i=t.oxw();t.Q6J("dataSource",e.editorOptions.dataSource)("label",i.formProperties.items[0+(i.isUsingCronExpressions&&1)].items[4].items[1].label.text)("selected",i.formProperties.formData.receiverGroupIds)("hidden",i.formProperties.formData.isSendToAllReceivers)}}function W(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-tag-box",15),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.topicIds=a)}),t.qZA()}if(2&o){const e=p.$implicit,i=t.oxw();t.Q6J("dataSource",e.editorOptions.dataSource)("label",i.formProperties.items[0+(i.isUsingCronExpressions&&1)].items[4].items[2].label.text)("value",i.formProperties.formData.topicIds)("hidden",i.formProperties.formData.isSendToAllReceivers)}}const Y=()=>({name:"\u5957\u7528\u5171\u7528\u8a2d\u5b9a",value:!1}),X=()=>({name:"\u53e6\u884c\u8a2d\u5b9a",value:!0});function q(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-radio-button",14),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.isIndependentNotificationSettingUsing=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dataSource",t.WLB(4,C,t.DdM(2,Y),t.DdM(3,X)))("value",e.formProperties.formData.isIndependentNotificationSettingUsing)}}function tt(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-setting-items",17),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.notificationSettings=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("isIndependentNotificationSettingUsing",e.formProperties.formData.isIndependentNotificationSettingUsing)("value",e.formProperties.formData.notificationSettings)}}const et=()=>({name:"\u81ea\u8a02",value:!1}),it=()=>({name:"\u6a21\u677f",value:!0});function ot(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-radio-button",14),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.isUsingTemplate=a)})("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.toggleNotificationRadioButton(a,"isUsingTemplate"))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dataSource",t.WLB(4,C,t.DdM(2,et),t.DdM(3,it)))("value",e.formProperties.formData.isUsingTemplate)}}function at(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-notification-template-args",18),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.textContentNotificationTemplateArgs=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("notificationTemplateId",e.formProperties.formData.textContentNotificationTemplateId)("value",e.formProperties.formData.textContentNotificationTemplateArgs)}}function nt(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-recurring-notification-schedule-plan",19),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.notificationSchedulePlans=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("value",e.formProperties.formData.notificationSchedulePlans)}}function st(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"app-reserve-notification-schedule-plan",19),t.NdJ("valueChange",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.formProperties.formData.notificationSchedulePlans=a)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("value",e.formProperties.formData.notificationSchedulePlans)}}const rt=()=>({class:"custom-button custom-button--blue"}),pt=()=>({class:"custom-button"}),lt=[{path:"",component:(()=>{class o{constructor(e,i,a,n){this.route=e,this.router=i,this.configStateService=a,this.appRestService=n,this.dataFieldTranslationKeysMapping=y,this.createPageTitle="\u65b0\u589e",this.receiverIdsTemp=[],this.receiverGroupIdsTemp=[],this.topicIdsTemp=[],this.textContentNotificationTemplateIdTemp="",this.textContentNotificationTemplateArgsTemp="",this.textContentTemp="",this.htmlContentTemp="",this.parentURL="./",this.isUsingCronExpressions=!1,this.initReceiversValidateSelection=!0,this.isReceiversValidateSelectionValidating=!1,this.receiversValidateSelection=(l,d)=>{const c=["receiverIds","receiverGroupIds","topicIds"].filter((St,mt)=>mt!==d);return this.initReceiversValidateSelection?(2===d&&(this.initReceiversValidateSelection=!1),!1):this.formProperties.formData.isSendToAllReceivers||l.value.length||this.formProperties.formData[c[0]].length||this.formProperties.formData[c[1]].length?(l.value.length&&!this.formProperties.formData[c[0]].length&&this.form.instance.updateData(c[0],[...this.formProperties.formData[c[0]]]),l.value.length&&!this.formProperties.formData[c[1]].length&&this.form.instance.updateData(c[1],[...this.formProperties.formData[c[1]]]),!0):this.formProperties.formData.isSendToAllReceivers||l.value.length||this.formProperties.formData[c[0]].length||this.formProperties.formData[c[1]].length?void 0:(this.isReceiversValidateSelectionValidating||(this.form.instance.updateData(c[0],[]),this.form.instance.updateData(c[1],[]),this.isReceiversValidateSelectionValidating=!0),2===d&&(this.isReceiversValidateSelectionValidating=!1),!1)}}ngOnInit(){this.SpecifiedTenantId=this.configStateService.getOne("currentTenant").id,this.getParentRouteURL(this.route)}ngAfterViewInit(){if(this.parentURL.includes("cron-expressions")){const e=decodeURIComponent(this.parentURL.split("/")[2]);this.form.instance.updateData("cronExpression",e),this.appRestService.request({method:"GET",url:`/api/app/jbnotifier-admin/cron-expressions/description/${e}`}).subscribe(i=>{this.form.instance.option("items[0].caption",`${i.description} | ${e}`)})}}getParentRouteURL(e){if(!e.parent)return;const i=e.parent;this.getParentRouteURL(i);const a=i.snapshot.url.map(n=>n.path).join("/");switch(this.parentURL=this.parentURL+("create-notification-info"!==a&&a?a+"/":""),a){case"instant-notification-infos":this.formProperties=(0,f.cloneDeep)(A),this.dataFieldLookupSourceMapping=(0,f.cloneDeep)(G),this.createPageTitle="\u65b0\u589e\u5373\u6642\u901a\u77e5",this.postURL="/api/app/instant-notifications",this.formProperties.items[0].items[4].items.forEach((n,l)=>n.validationRules=[{type:"custom",message:"\u63a5\u6536\u8005\u3001\u63a5\u6536\u8005\u7fa4\u7d44\u3001\u4e3b\u984c\u5fc5\u9808\u9078\u64c7\u4e00\u9805",validationCallback:d=>this.receiversValidateSelection(d,l)}]);break;case"reserve-notification-infos":this.formProperties=(0,f.cloneDeep)(E),this.dataFieldLookupSourceMapping=(0,f.cloneDeep)(D),this.createPageTitle="\u65b0\u589e\u9810\u7d04\u901a\u77e5",this.postURL="/api/app/reserved-notifications",this.formProperties.items[0].items[4].items.forEach((n,l)=>n.validationRules=[{type:"custom",message:"\u63a5\u6536\u8005\u3001\u63a5\u6536\u8005\u7fa4\u7d44\u3001\u4e3b\u984c\u5fc5\u9808\u9078\u64c7\u4e00\u9805",validationCallback:d=>this.receiversValidateSelection(d,l)}]);break;case"recurring-notification-infos":this.formProperties=(0,f.cloneDeep)(B),this.dataFieldLookupSourceMapping=(0,f.cloneDeep)(P),this.createPageTitle="\u65b0\u589e\u91cd\u8907\u901a\u77e5",this.postURL="/api/app/recurring-notifications",this.formProperties.items[0].items[4].items.forEach((n,l)=>n.validationRules=[{type:"custom",message:"\u63a5\u6536\u8005\u3001\u63a5\u6536\u8005\u7fa4\u7d44\u3001\u4e3b\u984c\u5fc5\u9808\u9078\u64c7\u4e00\u9805",validationCallback:d=>this.receiversValidateSelection(d,l)}]);break;case"cron-expressions":this.formProperties=(0,f.cloneDeep)(U),this.dataFieldLookupSourceMapping=(0,f.cloneDeep)(R),this.createPageTitle="\u65b0\u589e\u901a\u77e5",this.postURL="/api/app/jbnotifier-admin/cron-expressions/notifications",this.isUsingCronExpressions=!0,this.formProperties.items[1].items[4].items.forEach((n,l)=>n.validationRules=[{type:"custom",message:"\u63a5\u6536\u8005\u3001\u63a5\u6536\u8005\u7fa4\u7d44\u3001\u4e3b\u984c\u5fc5\u9808\u9078\u64c7\u4e00\u9805",validationCallback:d=>this.receiversValidateSelection(d,l)}])}}toggleNotificationRadioButton(e,i){const a=this.form.instance.option("formData");switch(i){case"isSendToAllReceivers":e?(this.receiverIdsTemp=a.receiverIds,this.receiverGroupIdsTemp=a.receiverGroupIds,this.topicIdsTemp=a.topicIds,this.form.instance.updateData("receiverIds",[]),this.form.instance.updateData("receiverGroupIds",[]),this.form.instance.updateData("topicIds",[])):(this.form.instance.updateData("receiverIds",this.receiverIdsTemp),this.form.instance.updateData("receiverGroupIds",this.receiverGroupIdsTemp),this.form.instance.updateData("topicIds",this.topicIdsTemp));break;case"isUsingTemplate":this.form.instance.itemOption("NotificationContentGroup.NotificationTemplateGroup","cssClass",e?"NotificationTemplateGroup":"NotificationTemplateGroup NotificationTemplateGroup--inactive"),this.form.instance.itemOption("NotificationContentGroup.CustomContentGroup","cssClass",e?"CustomContentGroup CustomContentGroup--inactive":"CustomContentGroup"),e?(this.textContentTemp=a.textContent,this.htmlContentTemp=a.htmlContent,this.form.instance.updateData("textContent",""),this.form.instance.updateData("htmlContent",""),this.form.instance.updateData("textContentNotificationTemplateId",this.textContentNotificationTemplateIdTemp),this.form.instance.updateData("textContentNotificationTemplateArgs",this.textContentNotificationTemplateArgsTemp)):(this.textContentNotificationTemplateIdTemp=a.textContentNotificationTemplateId,this.textContentNotificationTemplateArgsTemp=a.textContentNotificationTemplateArgs,this.form.instance.updateData("textContentNotificationTemplateId",""),this.form.instance.updateData("textContentNotificationTemplateArgs",""),this.form.instance.updateData("textContent",this.textContentTemp),this.form.instance.updateData("htmlContent",this.htmlContentTemp))}}handleSubmit(){this.form.instance.validate().isValid?(this.formProperties.formData.textContentNotificationTemplateId&&(this.formProperties.formData.htmlContentNotificationTemplateId=this.formProperties.formData.textContentNotificationTemplateId,this.formProperties.formData.htmlContentNotificationTemplateArgs=this.formProperties.formData.textContentNotificationTemplateArgs),this.appRestService.request({method:"POST",url:this.postURL,body:this.form.instance.option("formData"),params:{SpecifiedTenantId:this.SpecifiedTenantId}},{apiName:L.O}).subscribe(()=>{this.router.navigate([this.parentURL])})):console.log(this.form.instance.option())}handleCancel(){this.router.navigate([this.parentURL])}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(x.XJE),t.Y36(k.$))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-notification-info"]],viewQuery:function(i,a){if(1&i&&t.Gf(H,5),2&i){let n;t.iGM(n=t.CRH())&&(a.form=n.first)}},decls:18,vars:19,consts:[[1,"create-page-title"],["appFormFeature","","validationGroup","customValidationGroup",3,"formProperties","dataFieldLookUpSourceMapping","dataFieldTranslationKeysMapping"],["form",""],[3,"dataSource","label","isRequired","value","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"dataSource","value","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"dataSource","label","value","hidden","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"dataSource","label","selected","hidden","selectedChange",4,"dxTemplate","dxTemplateOf"],[3,"isIndependentNotificationSettingUsing","value","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"notificationTemplateId","value","valueChange",4,"dxTemplate","dxTemplateOf"],[3,"value","valueChange",4,"dxTemplate","dxTemplateOf"],[1,"form-buttons"],["appCustomButton","","text","\u5132\u5b58",3,"elementAttr","onClick"],["appCustomButton","","text","\u53d6\u6d88",3,"elementAttr","onClick"],[3,"dataSource","label","isRequired","value","valueChange"],[3,"dataSource","value","valueChange"],[3,"dataSource","label","value","hidden","valueChange"],[3,"dataSource","label","selected","hidden","selectedChange"],[3,"isIndependentNotificationSettingUsing","value","valueChange"],[3,"notificationTemplateId","value","valueChange"],[3,"value","valueChange"]],template:function(i,a){1&i&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"dx-form",1,2),t.YNc(4,w,1,4,"app-notification-tag-box",3)(5,j,1,7,"app-notification-radio-button",4)(6,z,1,4,"app-notification-tag-box",5)(7,$,1,4,"app-notification-tree-view",6)(8,W,1,4,"app-notification-tag-box",5)(9,q,1,7,"app-notification-radio-button",4)(10,tt,1,2,"app-notification-setting-items",7)(11,ot,1,7,"app-notification-radio-button",4)(12,at,1,2,"app-notification-template-args",8)(13,nt,1,1,"app-recurring-notification-schedule-plan",9)(14,st,1,1,"app-reserve-notification-schedule-plan",9),t.qZA(),t.TgZ(15,"div",10)(16,"dx-button",11),t.NdJ("onClick",function(){return a.handleSubmit()}),t.qZA(),t.TgZ(17,"dx-button",12),t.NdJ("onClick",function(){return a.handleCancel()}),t.qZA()()),2&i&&(t.xp6(),t.Oqu(a.createPageTitle),t.xp6(),t.Q6J("formProperties",a.formProperties)("dataFieldLookUpSourceMapping",a.dataFieldLookupSourceMapping)("dataFieldTranslationKeysMapping",a.dataFieldTranslationKeysMapping),t.xp6(2),t.Q6J("dxTemplateOf","notificationProviderIds"),t.xp6(),t.Q6J("dxTemplateOf","isSendToAllReceivers"),t.xp6(),t.Q6J("dxTemplateOf","receiverIds"),t.xp6(),t.Q6J("dxTemplateOf","receiverGroupIds"),t.xp6(),t.Q6J("dxTemplateOf","topicIds"),t.xp6(),t.Q6J("dxTemplateOf","isIndependentNotificationSettingUsing"),t.xp6(),t.Q6J("dxTemplateOf","notificationSettings"),t.xp6(),t.Q6J("dxTemplateOf","isUsingTemplate"),t.xp6(),t.Q6J("dxTemplateOf","textContentNotificationTemplateArgs"),t.xp6(),t.Q6J("dxTemplateOf","recurringNotificationSchedulePlans"),t.xp6(),t.Q6J("dxTemplateOf","reserveNotificationSchedulePlans"),t.xp6(2),t.Q6J("elementAttr",t.DdM(17,rt)),t.xp6(),t.Q6J("elementAttr",t.DdM(18,pt)))},dependencies:[M._,O.A,J.K,Z.p6,Q.Y,h.h,T.d,v.m,_.b,I.E,b.t,S.v],styles:[".create-page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:600;line-height:28px;color:var(--blue-1);letter-spacing:var(--letter-1);padding:16px 0 32px;margin-bottom:0}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;padding-bottom:24px}"]})}return o})(),canActivate:[x.a1M,x.nG9]}];let ct=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(lt),m.Bz]})}return o})();var dt=s(5533);let ft=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[N.ez,ct,F.m,dt.P,h.h,T.d,v.m,_.b,I.E,b.t,S.v]})}return o})()}}]);