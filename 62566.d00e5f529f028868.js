"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[62566],{62566:(z,m,o)=>{o.r(m),o.d(m,{NotificationCategoriesModule:()=>V});var p=o(96814),x=o(31610),l=o(88762),u=o(23758);const N=[{type:"buttons",fixed:!0,buttons:[{name:"save",template:"grid-save-button"},{name:"detail",template:"detail-button"},{name:"edit",template:"grid-edit-button"},{name:"delete",template:"grid-delete-button"},{name:"cancel",template:"grid-cancel-button"}]},{dataField:"id",visible:!1},{dataField:"name",caption:"",dataType:"string"},{dataField:"idCode",dataType:"string"},{dataField:"sortingNumber",dataType:"number",visible:!1},{dataField:"concurrencyStamp",visible:!1},{dataField:"parentNotificationCategoryId",caption:"",dataType:"string",visible:!1}],g={index:"/api/app/notification-categories",get:"/api/app/notification-categories",create:"/api/app/notification-categories",update:"/api/app/notification-categories",delete:"/api/app/notification-categories"},S=[{dataField:"SpecifiedTenantId",path:"/api/app/jbnotifier-admin/api-keys/assignable-tenants"}],f=[{dataField:"id",mapping:["id"]},{dataField:"concurrencyStamp",mapping:["concurrencyStamp"]},{dataField:"tenantId",queryStringKey:"TenantId",mapping:["tenantId"]},{name:"tenantCode",queryStringKey:"TenantId",mapping:["tenant"]},{name:"tenantName",queryStringKey:"TenantId",mapping:["tenant"]},{dataField:"parentNotificationCategoryId",queryStringKey:"ParentNotificationCategoryId",mapping:["parentNotificationCategoryId"]},{name:"parentNotificationCategoryCode",queryStringKey:"ParentNotificationCategoryId",mapping:["parentNotificationCategory"]},{name:"parentNotificationCategoryName",queryStringKey:"ParentNotificationCategoryId",mapping:["parentNotificationCategory"]},{dataField:"name",queryStringKey:"Name",mapping:["name"]}],b={popup:{title:"::\u65b0\u589e"},form:{colCount:2,items:[{dataField:"name",editorType:"dxTextBox",colSpan:1},{dataField:"idCode",editorType:"dxTextBox",colSpan:1},{dataField:"sortingNumber",editorType:"dxNumberBox",editorOptions:{min:1},colSpan:1}]}},F={popup:{title:"::\u7de8\u8f2f"},form:{colCount:2,items:[{dataField:"name",editorType:"dxTextBox",colSpan:1},{dataField:"idCode",editorType:"dxTextBox",editorOptions:{disabled:!0},colSpan:1},{dataField:"sortingNumber",editorType:"dxNumberBox",editorOptions:{min:1},colSpan:1}]}},v=[{dataField:"tenantId",translateKeys:["TenantId"]},{name:"tenantCode",translateKeys:["TenantId"]},{name:"tenantName",translateKeys:["TenantId"]},{dataField:"parentNotificationCategoryId",translateKeys:["ParentNotificationCategoryId"]},{name:"parentNotificationCategoryCode",translateKeys:["ParentNotificationCategoryId"]},{name:"parentNotificationCategoryName",translateKeys:["ParentNotificationCategoryId"]},{dataField:"name",translateKeys:["Name"]}];var I=o(10708),_=o(37398),t=o(19212),D=o(67),K=o(72783),M=o(44347),P=o(16358),B=o(20843),C=o(2173),Q=o(25012);const J=["grid"];function Z(e,d){if(1&e&&(t.TgZ(0,"a"),t._uU(1),t.qZA()),2&e){const i=t.oxw().$implicit;t.xp6(),t.hij(" ",i.name," ")}}function k(e,d){if(1&e){const i=t.EpF();t.TgZ(0,"a",14),t.NdJ("click",function(n){t.CHM(i);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.breadCrumbClick(n,s.id))}),t._uU(1),t.qZA()}if(2&e){const i=t.oxw().$implicit;t.xp6(),t.hij(" ",i.name," ")}}function O(e,d){if(1&e&&(t.TgZ(0,"li",11),t.YNc(1,Z,2,1,"a",12)(2,k,2,1,"a",13),t.qZA()),2&e){const i=d.index,a=t.oxw();t.ekj("active",i===a.breadCrumbData.length-1),t.xp6(),t.Q6J("ngIf",i===a.breadCrumbData.length-1),t.xp6(),t.Q6J("ngIf",i!==a.breadCrumbData.length-1)}}function R(e,d){if(1&e){const i=t.EpF();t.TgZ(0,"dx-button",15),t.NdJ("onClick",function(){const s=t.CHM(i).$implicit,r=t.oxw();return t.KtG(r.onDetailButtonClick(s))}),t.qZA()}}function U(e,d){1&e&&t.GkF(0)}const A=e=>({$implicit:e});function G(e,d){if(1&e&&(t.ynx(0),t.YNc(1,U,1,0,"ng-container",17),t.BQk()),2&e){const i=d.$implicit,a=t.oxw().$implicit,n=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",n.templateStore.getGridTemplates(a.key))("ngTemplateOutletContext",t.VKq(2,A,i))}}function w(e,d){if(1&e&&(t.ynx(0),t.YNc(1,G,2,4,"ng-container",16),t.BQk()),2&e){const i=d.$implicit;t.xp6(),t.Q6J("dxTemplateOf",i.key)}}const Y=()=>({type:"default",stylingMode:"contained"}),$=[{path:"",component:(()=>{class e{constructor(i,a,n,s){this.gridDataSourceService=i,this.templateStore=a,this.appRestService=n,this.configStateService=s,this.columns=N,this.cRUDEndpoints=g,this.dataFieldLookupSourceMapping=S,this.dataFieldTranslationKeysMapping=v,this.relatedDataValueAndQueryStringKeyMapping=f,this.editingPropertiesForCreating=b,this.editingPropertiesForUpdating=F,this.gridProperties={filterRow:{visible:!1}},this.breadCrumbData=[],this.getBreadCrumbData=r=>{this.appRestService.request({method:"GET",url:"/api/app/jbnotifier-admin/notification-categories/breadcrumbs",params:{parentNotificationCategoryId:r}}).subscribe(c=>{this.parentNotificationCategoryId=c.items[c.items.length-1]?.id,this.breadCrumbData=c.items})},this.setGridDataSource=r=>{this.gridDataSource=this.gridDataSourceService.getDataSource(g,f,{override:{load:c=>{c.filter=this.gridDataSourceService.getFlattenedFilter(c.filter);const L=this.gridDataSourceService.getSortingString(c);return(0,I.n)(this.appRestService.request({url:g.index,method:"GET",params:{ParentNotificationCategoryId:r,Sorting:L,SpecifiedTenantId:this.tenantId,MaxResultCount:c.take,SkipCount:c.skip}}).pipe((0,_.U)(y=>({data:y.items,totalCount:y.totalCount}))))}}})},this.configStateService.getOne$("currentTenant").subscribe(r=>{this.tenantId=r.id})}ngOnInit(){this.setGridDataSource(),this.getBreadCrumbData()}onInitNewRow(i){const a=this.configStateService.getOne("currentUser");i.data.parentNotificationCategoryId=this.parentNotificationCategoryId,i.data.tenantId=a.tenantId}onDetailButtonClick(i){const a=i.data.id;this.setGridDataSource(a),this.getBreadCrumbData(a)}breadCrumbClick(i,a){i.preventDefault(),this.setGridDataSource(a),this.getBreadCrumbData(a)}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(D.I),t.Y36(K.z),t.Y36(l.vgb),t.Y36(l.XJE))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification-categories"]],viewQuery:function(a,n){if(1&a&&t.Gf(J,5),2&a){let s;t.iGM(s=t.CRH())&&(n.grid=s.first)}},decls:14,vars:15,consts:[[1,"h-100","d-flex","flex-column"],["aria-label","breadcrumb"],[1,"breadcrumb","ps-3","p-2","mb-2"],["class","breadcrumb-item",3,"active",4,"ngFor","ngForOf"],[1,"flex-grow-1","overflow-hidden"],["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","gridProperties","onInitNewRow"],["grid",""],["icon","eyeopen","stylingMode","contained",3,"onClick",4,"dxTemplate","dxTemplateOf"],["name","addRowButton","location","before","widget","dxButton","cssClass","mb-1",3,"options"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[1,"breadcrumb-item"],[4,"ngIf"],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"],["icon","eyeopen","stylingMode","contained",3,"onClick"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div")(2,"nav",1)(3,"ol",2),t.YNc(4,O,3,4,"li",3),t.qZA()()(),t.TgZ(5,"div",4)(6,"dx-data-grid",5,6),t.NdJ("onInitNewRow",function(r){return n.onInitNewRow(r)}),t.YNc(8,R,1,0,"dx-button",7),t.TgZ(9,"dxo-toolbar"),t._UZ(10,"dxi-item",8)(11,"dxi-item",9),t.qZA(),t.YNc(12,w,2,1,"ng-container",10),t.ALo(13,"keyvalue"),t.qZA()()()),2&a&&(t.xp6(4),t.Q6J("ngForOf",n.breadCrumbData),t.xp6(2),t.Q6J("dataFieldTranslationKeysMapping",n.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",n.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",n.dataFieldLookupSourceMapping)("editingPropertiesForCreating",n.editingPropertiesForCreating)("editingPropertiesForUpdating",n.editingPropertiesForUpdating)("columns",n.columns)("dataSource",n.gridDataSource)("gridProperties",n.gridProperties),t.xp6(2),t.Q6J("dxTemplateOf","detail-button"),t.xp6(2),t.Q6J("options",t.DdM(14,Y)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(13,12,n.templateStore.gridTemplates)))},dependencies:[p.sg,p.O5,p.tP,M._,P.K,B.p6,C.ZT3,Q.e,C.y1f,p.Nd],encapsulation:2})}return e})(),canActivate:[l.a1M,l.nG9]}];let j=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[u.Bz.forChild($),u.Bz]})}return e})();var E=o(5533);let V=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[p.ez,j,x.m,E.P]})}return e})()}}]);