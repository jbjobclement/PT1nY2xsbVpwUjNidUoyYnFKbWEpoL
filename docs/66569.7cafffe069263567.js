"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[66569],{66569:(E,m,i)=>{i.r(m),i.d(m,{NotificationTemplatesModule:()=>V});var d=i(26575),x=i(31610),l=i(51273),g=i(23420),s=i(35461),c=i(85054);const h=[{type:"buttons",fixed:!0,buttons:[{name:"edit",template:"grid-edit-button"},{name:"delete",template:"grid-delete-button"}]},{dataField:"id",visible:!1},{dataField:"concurrencyStamp",visible:!1},{name:"tenantName",caption:"\u79df\u6236",dataType:"string",filterOperations:s.I$.text},{dataField:"tenantId",dataType:"string",visible:!1},{dataField:"idCode",caption:"idCode",dataType:"string",filterOperations:s.I$.text,validationRules:[c.L]},{dataField:"name",caption:"\u6a21\u677f\u540d\u7a31",dataType:"string",filterOperations:s.I$.text,validationRules:[c.L]},{dataField:"content",caption:"\u6a21\u677f\u5167\u5bb9",dataType:"string",filterOperations:s.I$.text,validationRules:[c.L]},{dataField:"sortingNumber",caption:"\u6392\u5e8f",visible:!1},{dataField:"SpecifiedTenantId",caption:"\u6307\u5b9a\u79df\u6236",visible:!1}],f={index:"/api/app/jbnotifier-admin/notification-templates",get:"/api/app/jbnotifier-admin/notification-templates",create:"/api/app/jbnotifier-admin/notification-templates",update:"/api/app/jbnotifier-admin/notification-templates",delete:"/api/app/jbnotifier-admin/notification-templates"},b=[{dataField:"tenantId",path:"/api/app/jbnotifier-admin/customized-users/tenant-lookup"},{dataField:"SpecifiedTenantId",path:"/api/app/jbnotifier-admin/customized-users/tenant-lookup",pathForSelectedDisplay:"/api/app/jbnotifier-admin/customized-tenants"}],u=[{dataField:"id",mapping:["notificationTemplate","id"]},{dataField:"concurrencyStamp",mapping:["notificationTemplate","concurrencyStamp"]},{dataField:"idCode",mapping:["notificationTemplate","idCode"]},{dataField:"name",mapping:["notificationTemplate","name"]},{dataField:"content",mapping:["notificationTemplate","content"]},{dataField:"sortingNumber",mapping:["notificationTemplate","sortingNumber"]},{name:"tenantName",mapping:["tenant","name"]},{dataField:"tenantId",mapping:["tenant","id"]},{dataField:"SpecifiedTenantId",queryStringKey:"TenantId",mapping:["tenant","id"]}],S={popup:{title:"JbNotifier::Permission:NotificationTemplates",wrapperAttr:{class:"basic-popup"},width:500,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}]},form:{colCount:1,items:[{dataField:"SpecifiedTenantId",editorType:"dxSelectBox"},{dataField:"idCode",editorType:"dxTextBox"},{dataField:"name",editorType:"dxTextBox"},{dataField:"content",editorType:"dxTextArea",editorOptions:{height:160}},{dataField:"sortingNumber",editorType:"dxNumberBox"}],elementAttr:{class:"custom-form custom-form--edit"}}},N={popup:{title:"JbNotifier::Permission:NotificationTemplates",wrapperAttr:{class:"basic-popup"},width:500,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}]},form:{colCount:1,items:[{dataField:"SpecifiedTenantId",editorType:"dxSelectBox",editorOptions:{disabled:!0}},{dataField:"idCode",editorType:"dxTextBox",editorOptions:{disabled:!0}},{dataField:"name",editorType:"dxTextBox"},{dataField:"content",editorType:"dxTextArea",editorOptions:{height:160}},{dataField:"sortingNumber",editorType:"dxNumberBox"}],elementAttr:{class:"custom-form custom-form--edit"}}};var t=i(29039),C=i(33854),I=i(72783),O=i(59444),A=i(65787),M=i(90070),Q=i(13443),P=i(65343),J=i(92931),B=i(25659),T=i(12305),D=i(21194);const U=["grid"];function j(e,p){if(1&e&&t._UZ(0,"app-bottom-toolbar-btns",1),2&e){t.oxw();const n=t.MAs(4);t.Q6J("grid",n)}}function L(e,p){1&e&&t.GkF(0)}const $=e=>({$implicit:e});function z(e,p){if(1&e&&(t.ynx(0),t.YNc(1,L,1,0,"ng-container",7),t.BQk()),2&e){const n=p.$implicit,a=t.oxw().$implicit,o=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",o.templateStore.getGridTemplates(a.key))("ngTemplateOutletContext",t.VKq(2,$,n))}}function R(e,p){if(1&e&&(t.ynx(0),t.YNc(1,z,2,4,"ng-container",6),t.BQk()),2&e){const n=p.$implicit;t.xp6(),t.Q6J("dxTemplateOf",n.key)}}const Z=[{path:"",component:(()=>{class e{constructor(n,a,o,r){this.gridDataSourceService=n,this.templateStore=a,this.configStateService=o,this.tenantChooser=r,this.columns=h,this.cRUDEndpoints=f,this.dataFieldLookupSourceMapping=b,this.relatedDataValueAndQueryStringKeyMapping=u,this.editingPropertiesForCreating=S,this.editingPropertiesForUpdating=N,this.configStateService.getOne$("currentUser").subscribe(F=>{F.tenantId&&(this.columns[3].visible=!1,this.editingPropertiesForCreating.form.items[0].visible=!1,this.editingPropertiesForUpdating.form.items[0].visible=!1)}),this.tenantChooser.tenantId$.subscribe(F=>{this.grid?.instance?.refresh()})}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(f,u)}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(C.I),t.Y36(I.z),t.Y36(l.XJE),t.Y36(O.L))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification-templates"]],viewQuery:function(a,o){if(1&a&&t.Gf(U,5),2&a){let r;t.iGM(r=t.CRH())&&(o.grid=r.first)}},decls:9,vars:12,consts:[[1,"custom-grid-container"],[3,"grid"],["appGridFeature","","appGridFeatureNotification","",3,"datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource"],["grid",""],[3,"grid",4,"dxTemplate","dxTemplateOf"],[4,"ngFor","ngForOf"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,o){if(1&a&&(t.TgZ(0,"div",0),t._UZ(1,"app-tenant-chooser")(2,"app-grid-tool-bar",1),t.TgZ(3,"dx-data-grid",2,3),t.YNc(5,j,1,1,"app-bottom-toolbar-btns",4)(6,R,2,1,"ng-container",5),t.ALo(7,"keyvalue"),t.qZA(),t._UZ(8,"app-notification-pager",1),t.qZA()),2&a){const r=t.MAs(4);t.xp6(2),t.Q6J("grid",r),t.xp6(),t.Q6J("datafieldValueQueryStringKeyMapping",o.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",o.dataFieldLookupSourceMapping)("editingPropertiesForCreating",o.editingPropertiesForCreating)("editingPropertiesForUpdating",o.editingPropertiesForUpdating)("columns",o.columns)("dataSource",o.gridDataSource),t.xp6(2),t.Q6J("dxTemplateOf","bottom-toolbar"),t.xp6(),t.Q6J("ngForOf",t.lcZ(7,10,o.templateStore.gridTemplates)),t.xp6(2),t.Q6J("grid",r)}},dependencies:[d.sg,d.tP,A.p6,M.e,Q._,P.f,J.R,B.l,T.D,D.D,d.Nd],encapsulation:2})}return e})(),canActivate:[l.a1M,l.nG9]}];let G=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(Z),g.Bz]})}return e})();var K=i(5533),Y=i(41992);let V=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[d.ez,K.P,d.ez,G,x.m,T.D,Y.e]})}return e})()}}]);
//# sourceMappingURL=66569.7cafffe069263567.js.map