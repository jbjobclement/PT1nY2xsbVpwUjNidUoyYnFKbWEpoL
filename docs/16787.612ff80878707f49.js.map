{"version":3,"file":"16787.612ff80878707f49.js","mappings":"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","names":["columns","type","fixed","buttons","name","template","width","minWidth","dataField","visible","caption","dataType","filterOperations","filterOperationTypes","text","date","fixedPosition","cRUDEndpoints","index","get","create","update","delete","dataFieldLookupSourceMapping","relatedDataValueAndQueryStringKeyMapping","mapping","queryStringKey","formItems","editorType","colSpan","itemType","cssClass","colCount","items","editorOptions","height","htmlProperties","editingPropertiesForCreating","popup","title","wrapperAttr","class","showCloseButton","toolbarItems","toolbar","form","editingPropertiesForUpdating","elementAttr","PendingNotificationsMasterDetailComponent","constructor","this","isHTMLContentVisible","isTextContentVisible","static","t","core","Xpm","selectors","inputs","cellInfo","decls","vars","consts","rf","ctx","i0","$event","_c0","data","hookEndpoint","isModifiedWhenPending","htmlContent","textContent","_r0","PendingNotificationsComponent_ng_container_7_ng_container_1_ng_container_1_Template","ctx_r7","templateStore","getGridTemplates","template_r6","key","_c1","cellInfo_r8","PendingNotificationsComponent_ng_container_7_ng_container_1_Template","routes","path","component","PendingNotificationsComponent","gridDataSourceService","tenantChooser","gridProperties","editing","allowAdding","masterDetail","enabled","rowExpanded","e","applyyNotificationMasterDetailRowCollapse","tenantId$","subscribe","tenandId","grid","instance","refresh","ngOnInit","gridDataSource","getDataSource","ngAfterViewInit","on","setTimeout","trElementRowIndex","element","querySelector","parentElement","ariaRowIndex","classList","add","masterDetailRowCollapseKey","collapseRow","i1","i2","i3","viewQuery","PendingNotificationsComponent_app_pending_notifications_master_detail_5_Template","PendingNotificationsComponent_div_6_Template","PendingNotificationsComponent_ng_container_7_Template","gridTemplates","canActivate","AuthGuard","PermissionGuard","PendingNotificationsRoutingModule","oAB","cJS","RouterModule","forChild","PendingNotificationsModule","CommonModule","SharedModule","DXComponentsModule","TextContentViewerComponent","HtmlContentViewerComponent","NotificationPagerComponent","TenantChooserModule"],"sourceRoot":"webpack:///","sources":["./src/app/pending-notifications/config/columns.ts","./src/app/pending-notifications/config/crud-endpoints.ts","./src/app/pending-notifications/config/datafield-lookup-source-mapping.ts","./src/app/pending-notifications/config/datafield-value-query-string-key-mapping.ts","./src/app/pending-notifications/config/form-properties.ts","./src/app/pending-notifications/components/pending-notifications-master-detail/pending-notifications-master-detail.component.ts","./src/app/pending-notifications/components/pending-notifications-master-detail/pending-notifications-master-detail.component.html","./src/app/pending-notifications/components/pending-notifications.component.html","./src/app/pending-notifications/pending-notifications-routing.module.ts","./src/app/pending-notifications/components/pending-notifications.component.ts","./src/app/pending-notifications/pending-notifications.module.ts"],"sourcesContent":["import { Column } from 'devextreme/ui/data_grid';\r\nimport { filterOperationTypes } from 'src/app/shared/grid/filterOperations';\r\n\r\nexport const columns: Column[] = [\r\n  {\r\n    type: 'buttons',\r\n    fixed: true,\r\n    buttons: [\r\n      {\r\n        name: 'edit',\r\n        template: 'grid-edit-button'\r\n      }\r\n    ],\r\n    width: 50,\r\n    minWidth: 50\r\n  },\r\n  {\r\n    dataField: 'id',\r\n    visible: false\r\n  },\r\n  {\r\n    dataField: 'concurrencyStamp',\r\n    visible: false\r\n  },\r\n  {\r\n    name: 'tenantName',\r\n    caption: '租戶名稱',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text\r\n  },\r\n  {\r\n    dataField: 'expectedPushTime',\r\n    caption: '預計推送時間',\r\n    dataType: 'datetime',\r\n    filterOperations: filterOperationTypes.date\r\n  },\r\n  {\r\n    name: 'receiverName',\r\n    caption: '接收者名稱',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text\r\n  },\r\n  {\r\n    name: 'category',\r\n    caption: '分類',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text\r\n  },\r\n  {\r\n    dataField: 'title',\r\n    caption: '標題',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text\r\n  },\r\n  {\r\n    dataField: 'subtitle',\r\n    caption: '子標題',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text\r\n  },\r\n  {\r\n    dataField: 'textContent',\r\n    dataType: 'string',\r\n    visible: false\r\n\r\n  },\r\n  {\r\n    dataField: 'htmlContent',\r\n    dataType: 'string',\r\n    visible: false\r\n  },\r\n\r\n  // master detail\r\n  {\r\n    type: 'detailExpand',\r\n    fixed: true,\r\n    fixedPosition: 'right'\r\n  },\r\n];","import { CRUDEndpoints } from \"src/app/shared/typing\";\r\n\r\nexport const cRUDEndpoints: CRUDEndpoints = {\r\n  index: '/api/app/jbnotifier-admin/pending-notifications',\r\n  get: '/api/app/jbnotifier-admin/pending-notifications',\r\n  create: '/api/app/jbnotifier-admin/pending-notifications',\r\n  update: '/api/app/jbnotifier-admin/pending-notifications',\r\n  delete: '/api/app/jbnotifier-admin/pending-notifications',\r\n};","import { DataFieldLookUpSourceMapping } from \"src/app/shared/typing\";\r\n\r\nexport const dataFieldLookupSourceMapping: DataFieldLookUpSourceMapping = [];","import { RelatedDataValueAndQueryStringKeyMapping } from 'src/app/shared/typing';\r\n\r\nexport const relatedDataValueAndQueryStringKeyMapping: RelatedDataValueAndQueryStringKeyMapping = [\r\n  {\r\n    dataField: 'id',\r\n    mapping: ['pendingNotification', 'id'],\r\n  },\r\n  {\r\n    dataField: 'concurrencyStamp',\r\n    mapping: ['pendingNotification', 'concurrencyStamp'],\r\n  },\r\n  {\r\n    name: 'tenantName',\r\n    mapping: ['tenant', 'name'],\r\n    queryStringKey: 'TenantName',\r\n  },\r\n  {\r\n    dataField: 'isModifiedWhenPending',\r\n    mapping: ['pendingNotification', 'isModifiedWhenPending'],\r\n    queryStringKey: 'IsModifiedWhenPending',\r\n  },\r\n  {\r\n    dataField: 'expectedPushTime',\r\n    mapping: ['notificationSchedulePlan', 'nextExpectedPushTime'],\r\n    queryStringKey: 'ExpectedPushTime',\r\n  },\r\n  {\r\n    name: 'receiverName',\r\n    mapping: ['receiver', 'name'],\r\n    queryStringKey: 'ReceiverName',\r\n  },\r\n  {\r\n    name: 'category',\r\n    queryStringKey: 'NotificationCategoryName',\r\n    mapping: ['notificationCategory', 'name'],\r\n  },\r\n  {\r\n    dataField: 'title',\r\n    queryStringKey: 'Title',\r\n    mapping: ['pendingNotification', 'title'],\r\n  },\r\n  {\r\n    dataField: 'subtitle',\r\n    queryStringKey: 'Subtitle',\r\n    mapping: ['pendingNotification', 'subtitle'],\r\n  },\r\n  {\r\n    dataField: 'textContent',\r\n    queryStringKey: 'TextContent',\r\n    mapping: ['pendingNotification', 'textContent'],\r\n  },\r\n  {\r\n    dataField: 'htmlContent',\r\n    queryStringKey: 'HtmlContent',\r\n    mapping: ['pendingNotification', 'htmlContent'],\r\n  },\r\n  {\r\n    dataField: 'concurrencyStamp',\r\n    queryStringKey: 'ConcurrencyStamp',\r\n    mapping: ['pendingNotification', 'concurrencyStamp'],\r\n  },\r\n  {\r\n    name: 'hookEndpoint',\r\n    queryStringKey: 'HookEndpoint',\r\n    mapping: ['notificationInfo', 'notificationDataFetchEndpoint'],\r\n  },\r\n  {\r\n    name: 'filePaths',\r\n    queryStringKey: 'FilePaths',\r\n    mapping: ['pendingNotification', 'filePaths'],\r\n  },\r\n  {\r\n    name: 'hyperlink',\r\n    queryStringKey: 'Hyperlink',\r\n    mapping: ['pendingNotification', 'hyperlink'],\r\n  },\r\n];","import { Editing } from 'devextreme/ui/data_grid';\r\nimport { htmlProperties } from 'src/app/shared/htmlProperties';\r\n\r\nconst formItems: Editing['form']['items'] = [\r\n  {\r\n    dataField: 'title',\r\n    editorType: 'dxTextBox',\r\n    colSpan: 1\r\n  },\r\n  {\r\n    dataField: 'subtitle',\r\n    editorType: 'dxTextBox',\r\n    colSpan: 1\r\n  },\r\n  {\r\n    itemType: 'group',\r\n    name: 'CustomContentGroup',\r\n    cssClass: 'CustomContentGroup',\r\n    colSpan: 2,\r\n    colCount: 8,\r\n    items: [\r\n      {\r\n        dataField: 'textContent',\r\n        editorType: 'dxTextArea',\r\n        editorOptions: {\r\n          height: '240px'\r\n        },\r\n        colSpan: 3\r\n      },\r\n      {\r\n        dataField: 'htmlContent',\r\n        editorType: 'dxHtmlEditor',\r\n        editorOptions: {\r\n          ...htmlProperties,\r\n          height: '240px'\r\n        },\r\n        colSpan: 5\r\n      }\r\n    ]\r\n  },\r\n  // {\r\n  //   dataField: 'filePaths',\r\n  //   editorType: 'dxTextBox'\r\n\r\n  // },\r\n  // {\r\n  //   dataField: 'hyperlink',\r\n  //   editorType: 'dxTextBox'\r\n  // }\r\n];\r\n/**\r\n * Properties for creating popup form.\r\n */\r\nexport const editingPropertiesForCreating: Editing = {\r\n  popup: {\r\n    title: '',\r\n    wrapperAttr: { class: 'basic-popup' },\r\n    showCloseButton: true,\r\n    toolbarItems: [\r\n      {\r\n        toolbar: 'bottom',\r\n        template: 'bottom-toolbar'\r\n      }\r\n    ],\r\n    width: '85vw',\r\n    height: '90vh'\r\n  },\r\n  form: {\r\n    colCount: 2,\r\n    items: formItems,\r\n  },\r\n};\r\n\r\n/**\r\n * Properties for updating popup form.\r\n */\r\n\r\nexport const editingPropertiesForUpdating: Editing = {\r\n  popup: {\r\n    title: 'JbNotifier::Permission:Notifications',\r\n    wrapperAttr: { class: 'basic-popup' },\r\n    showCloseButton: true,\r\n    toolbarItems: [\r\n      {\r\n        toolbar: 'bottom',\r\n        template: 'bottom-toolbar'\r\n      }\r\n    ],\r\n    width: '85vw',\r\n    height: '90vh'\r\n  },\r\n  form: {\r\n    colCount: 2,\r\n    items: formItems,\r\n    elementAttr: { class: 'custom-form custom-form--edit custom-form--edit-notification' }\r\n  },\r\n};\r\n","import { Component, Input } from '@angular/core';\r\nimport { ColumnCellTemplateData } from 'devextreme/ui/data_grid';\r\n\r\n@Component({\r\n  selector: 'app-pending-notifications-master-detail',\r\n  templateUrl: './pending-notifications-master-detail.component.html',\r\n  styleUrls: ['./pending-notifications-master-detail.component.scss']\r\n})\r\n\r\nexport class PendingNotificationsMasterDetailComponent {\r\n  @Input() cellInfo: ColumnCellTemplateData\r\n  isHTMLContentVisible: boolean = false\r\n  isTextContentVisible: boolean = false\r\n}","<div class=\"master-detail\">\r\n    <div class=\"master-detail-container\">\r\n        <div class=\"master-detail-title\">\r\n            <h3>詳細描述</h3>\r\n        </div>\r\n        <div class=\"master-detail-content\">\r\n            <div class=\"master-detail-item\">\r\n                <label class=\"master-detail-label\">純文字內容</label>\r\n                <dx-button\r\n                    appCustomButton\r\n                    text=\"查看\"\r\n                    [elementAttr]=\"{class: 'custom-button custom-button--blue'}\"\r\n                    (onClick)=\"isTextContentVisible = true\"\r\n                >\r\n                </dx-button>\r\n            </div>\r\n            <div class=\"master-detail-item\">\r\n                <label class=\"master-detail-label\">HTML內容</label>\r\n                <dx-button\r\n                    appCustomButton\r\n                    text=\"查看\"\r\n                    [elementAttr]=\"{class: 'custom-button custom-button--blue'}\"    \r\n                    (onClick)=\"isHTMLContentVisible = true\"\r\n                >\r\n                </dx-button>\r\n            </div>\r\n            <div class=\"master-detail-item\">\r\n                <label class=\"master-detail-label\">Hook Endpoint</label>\r\n                <span class=\"master-detail-text\">{{cellInfo.data.hookEndpoint}}</span>\r\n            </div>\r\n            <div class=\"master-detail-item\">\r\n                <label class=\"master-detail-label\">等候中修改(是/否)</label>\r\n                <dx-check-box\r\n                    appCheckBox\r\n                    [disabled]=\"true\"\r\n                    [value]=\"cellInfo.data.isModifiedWhenPending\"\r\n                >\r\n                </dx-check-box>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<app-html-content-viewer\r\n    [(isHTMLContentVisible)]=\"isHTMLContentVisible\"\r\n    [htmlContent]=\"cellInfo.data.htmlContent\"\r\n>\r\n</app-html-content-viewer>\r\n\r\n<app-text-content-viewer\r\n    [(isTextContentVisible)]=\"isTextContentVisible\"\r\n    [textContent]=\"cellInfo.data.textContent\"\r\n>\r\n</app-text-content-viewer>","<div class=\"custom-grid-container\">\r\n  <app-tenant-chooser></app-tenant-chooser>\r\n\r\n  <app-grid-tool-bar [grid]=\"grid\" [hideCreateBtn]=\"true\"></app-grid-tool-bar>\r\n\r\n  <dx-data-grid\r\n    #grid\r\n    appGridFeature\r\n    appGridFeatureNotification\r\n    [datafieldValueQueryStringKeyMapping]=\"relatedDataValueAndQueryStringKeyMapping\"\r\n    [dataFieldLookUpSourceMapping]=\"dataFieldLookupSourceMapping\"\r\n    [editingPropertiesForCreating]=\"editingPropertiesForCreating\"\r\n    [editingPropertiesForUpdating]=\"editingPropertiesForUpdating\"\r\n    [columns]=\"columns\"\r\n    [dataSource]=\"gridDataSource\"\r\n    [gridProperties]=\"gridProperties\"\r\n  >\r\n    <app-pending-notifications-master-detail\r\n      *dxTemplate=\"let cellInfo of 'pending-notifications-master-detail'\"\r\n      [cellInfo]=\"cellInfo\"\r\n    >\r\n    </app-pending-notifications-master-detail>\r\n\r\n    <div *dxTemplate=\"let cellInfo of 'bottom-toolbar'\">\r\n      <app-bottom-toolbar-btns [grid]=\"grid\"></app-bottom-toolbar-btns>\r\n    </div>\r\n\r\n    <!-- <dxo-toolbar>\r\n      <dxi-item location=\"after\">\r\n        <app-grid-after-tool-bar\r\n          *dxTemplate\r\n          [grid]=\"grid\"\r\n        >\r\n        </app-grid-after-tool-bar>\r\n      </dxi-item>\r\n      <dxi-item name=\"applyFilterButton\" cssClass=\"d-none\"></dxi-item>\r\n    </dxo-toolbar> -->\r\n\r\n    <ng-container *ngFor=\"let template of templateStore.gridTemplates | keyvalue\">\r\n      <ng-container *dxTemplate=\"let cellInfo of template.key\">\r\n        <ng-container\r\n          *ngTemplateOutlet=\"\r\n            templateStore.getGridTemplates(template.key);\r\n            context: { $implicit: cellInfo }\r\n          \"\r\n        >\r\n        </ng-container>\r\n      </ng-container>\r\n    </ng-container>\r\n  </dx-data-grid>\r\n\r\n  <app-notification-pager\r\n    [grid]=\"grid\"\r\n  >\r\n  </app-notification-pager>\r\n</div>","import { AuthGuard, PermissionGuard } from '@abp/ng.core';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { PendingNotificationsComponent } from './components/pending-notifications.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PendingNotificationsComponent,\r\n    canActivate: [AuthGuard, PermissionGuard],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PendingNotificationsRoutingModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport type { Editing, Properties } from 'devextreme/ui/data_grid';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Column } from 'devextreme/ui/data_grid';\r\nimport { columns } from '../config/columns';\r\nimport { cRUDEndpoints } from '../config/crud-endpoints';\r\nimport { dataFieldLookupSourceMapping } from '../config/datafield-lookup-source-mapping';\r\nimport { relatedDataValueAndQueryStringKeyMapping } from '../config/datafield-value-query-string-key-mapping';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { CRUDEndpoints, DataFieldLookUpSourceMapping, RelatedDataValueAndQueryStringKeyMapping } from 'src/app/shared/typing';\r\nimport { GridDataSourceService } from 'src/app/shared/service/grid-data-source.service/grid-data-source.service';\r\nimport { TemplateStoreService } from 'src/app/shared/service/template-store.service';\r\nimport { editingPropertiesForCreating, editingPropertiesForUpdating } from '../config/form-properties';\r\nimport { TenantChooserService } from 'src/app/shared/modules/tenant-chooser/tenant-chooser.service';\r\n@Component({\r\n  selector: 'app-pending-notifications',\r\n  templateUrl: 'pending-notifications.component.html',\r\n  styleUrls: [],\r\n})\r\n/**\r\n *\r\n */\r\nexport class PendingNotificationsComponent implements OnInit {\r\n  /**\r\n   * @property {Editing} editingPropertiesForCreating Setting for create.\r\n   * @property {Editing} editingPropertiesForUpdating Setting for upate.\r\n   * @property {Array} probationaryCalculations Probationary related calculations.\r\n   */\r\n  @ViewChild('grid', { static: false }) grid: DxDataGridComponent;\r\n  gridProperties: Properties = {\r\n    editing: { allowAdding: false },\r\n    masterDetail: {\r\n      enabled: true,\r\n      template: 'pending-notifications-master-detail'\r\n    }\r\n  };\r\n\r\n  columns: Column[] = columns;\r\n  gridDataSource: DataSource;\r\n  cRUDEndpoints: CRUDEndpoints = cRUDEndpoints;\r\n  dataFieldLookupSourceMapping: DataFieldLookUpSourceMapping = dataFieldLookupSourceMapping;\r\n  relatedDataValueAndQueryStringKeyMapping: RelatedDataValueAndQueryStringKeyMapping =\r\n    relatedDataValueAndQueryStringKeyMapping;\r\n  editingPropertiesForCreating: Editing = editingPropertiesForCreating;\r\n  editingPropertiesForUpdating: Editing = editingPropertiesForUpdating;\r\n  masterDetailRowCollapseKey: string\r\n\r\n  constructor(\r\n    private gridDataSourceService: GridDataSourceService,\r\n    protected templateStore: TemplateStoreService,\r\n    private tenantChooser: TenantChooserService\r\n  ) {\r\n    this.tenantChooser.tenantId$.subscribe(tenandId => {\r\n      this.grid?.instance?.refresh()\r\n    })\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.gridDataSource = this.gridDataSourceService.getDataSource(\r\n      cRUDEndpoints,\r\n      relatedDataValueAndQueryStringKeyMapping\r\n    );\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.grid.instance.on('rowExpanded', this.rowExpanded)\r\n  }\r\n\r\n  rowExpanded = (e) => {\r\n    this.applyyNotificationMasterDetailRowCollapse(e)\r\n  }\r\n\r\n  applyyNotificationMasterDetailRowCollapse(e) {\r\n    // use setTimeout to wait HTML DOM change before get element\r\n    setTimeout(() => {\r\n      const tdElementCollapse = e.element.querySelector('[aria-label=\"Collapse\"]')\r\n      const trElementRowIndex = tdElementCollapse.parentElement.ariaRowIndex\r\n      const trElementRow = e.element.querySelector(`tr.dx-row.dx-data-row.dx-row-lines[aria-rowindex=\"${trElementRowIndex}\"]`)\r\n      trElementRow.classList.add('master-detail-row-collapse')\r\n    })\r\n\r\n    if (e.key === this.masterDetailRowCollapseKey) {\r\n      return\r\n    }\r\n\r\n    e.component.collapseRow(this.masterDetailRowCollapseKey);\r\n    this.masterDetailRowCollapseKey = e.key\r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { PendingNotificationsComponent } from './components/pending-notifications.component';\r\nimport { PendingNotificationsRoutingModule } from './pending-notifications-routing.module';\r\nimport { DXComponentsModule } from '../shared/dx-components.module';\r\nimport { TextContentViewerComponent } from '../shared/components/text-content-viewer/text-content-viewer.component';\r\nimport { HtmlContentViewerComponent } from '../shared/components/html-content-viewer/html-content-viewer.component';\r\nimport { NotificationPagerComponent } from '../shared/components/notification/notification-pager/notification-pager.component';\r\nimport { PendingNotificationsMasterDetailComponent } from './components/pending-notifications-master-detail/pending-notifications-master-detail.component';\r\nimport { TenantChooserModule } from \"../shared/modules/tenant-chooser/tenant-chooser.module\";\r\n\r\n@NgModule({\r\n  declarations: [PendingNotificationsComponent, PendingNotificationsMasterDetailComponent],\r\n  imports: [\r\n    CommonModule,\r\n    PendingNotificationsRoutingModule,\r\n    SharedModule,\r\n    DXComponentsModule,\r\n    TextContentViewerComponent,\r\n    HtmlContentViewerComponent,\r\n    NotificationPagerComponent,\r\n    TenantChooserModule\r\n  ],\r\n})\r\nexport class PendingNotificationsModule { }\r\n"],"x_google_ignoreList":[]}