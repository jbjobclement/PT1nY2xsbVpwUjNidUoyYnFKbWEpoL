{"version":3,"file":"10486.b5d437ab691a7e4c.js","mappings":"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","names":["columns","type","fixed","buttons","name","template","disabled","options","row","data","isDeletable","dataField","visible","caption","dataType","filterOperations","filterOperationTypes","text","validationRules","requiredValidationRule","calculateDisplayValue","rowData","notificationProviders","map","provider","displayName","join","width","allowFiltering","allowSorting","fixedPosition","editCellTemplate","cRUDEndpoints","index","get","create","update","delete","dataFieldLookupSourceMapping","path","relatedDataValueAndQueryStringKeyMapping","mapping","queryStringKey","formItems","itemType","cssClass","colCount","items","colSpan","editorType","label","editorOptions","height","htmlProperties","editingPropertiesForCreating","popup","title","wrapperAttr","class","showCloseButton","toolbarItems","toolbar","form","elementAttr","editingPropertiesForUpdating","i0","_r7","_r0","instance","cancelEditData","_c1","InstantNotificationInfosComponent_ng_container_12_ng_container_1_ng_container_1_Template","ctx_r9","templateStore","getGridTemplates","template_r8","key","_c2","cellInfo_r10","InstantNotificationInfosComponent_ng_container_12_ng_container_1_Template","InstantNotificationInfosComponent_ng_container_14_ng_container_1_Conditional_1_ng_container_0_Template","ctx_r16","notificationTemplateStore","getTemplates","template_r13","_c3","cellInfo_r15","notificationTemplateId","InstantNotificationInfosComponent_ng_container_14_ng_container_1_Conditional_2_ng_container_0_Template","ctx_r17","_c4","InstantNotificationInfosComponent_ng_container_14_ng_container_1_Conditional_1_Template","InstantNotificationInfosComponent_ng_container_14_ng_container_1_Conditional_2_Template","InstantNotificationInfosComponent_ng_container_14_ng_container_1_Template","routes","component","InstantNotificationInfosComponent","constructor","gridDataSourceService","router","tenantChooser","this","gridProperties","masterDetail","enabled","tenantId$","subscribe","tenandId","grid","refresh","ngOnInit","gridDataSource","getDataSource","onRowExpanded","e","applyNotificationMasterDetailRowCollapse","setTimeout","trElementRowIndex","element","querySelector","parentElement","ariaRowIndex","classList","add","masterDetailRowCollapseKey","collapseRow","onOptionChanged","fullName","value","textContentNotificationTemplateId","static","t","i1","i2","i3","i4","i5","core","Xpm","selectors","viewQuery","rf","ctx","navigate","$event","InstantNotificationInfosComponent_dx_button_11_Template","InstantNotificationInfosComponent_ng_container_12_Template","InstantNotificationInfosComponent_ng_container_14_Template","InstantNotificationInfosComponent_ng_container_16_Template","gridTemplates","templates","canActivate","AuthGuard","PermissionGuard","loadChildren","Promise","all","__webpack_require__","then","bind","m","CreateNotificationInfoModule","InstantNotificationInfosRoutingModule","oAB","cJS","RouterModule","forChild","InstantNotificationInfosModule","CommonModule","DXComponentsModule","DxHtmlEditorModule","SharedModule","GridFilterItemsComponent","TenantChooserModule"],"sourceRoot":"webpack:///","sources":["./src/app/instant-notification-infos/config/columns.ts","./src/app/instant-notification-infos/config/crud-endpoints.ts","./src/app/instant-notification-infos/config/datafield-lookup-source-mapping.ts","./src/app/instant-notification-infos/config/datafield-value-query-string-key-mapping.ts","./src/app/instant-notification-infos/config/form-properties.ts","./src/app/instant-notification-infos/components/instant-notification-infos.component.html","./src/app/instant-notification-infos/instant-notification-infos-routing.module.ts","./src/app/instant-notification-infos/components/instant-notification-infos.component.ts","./src/app/instant-notification-infos/instant-notification-infos.module.ts"],"sourcesContent":["import { Column } from 'devextreme/ui/data_grid';\r\nimport { filterOperationTypes } from 'src/app/shared/grid/filterOperations';\r\nimport { requiredValidationRule } from 'src/app/shared/validationRules/required';\r\n\r\nexport const columns: Column[] = [\r\n  {\r\n    type: 'buttons',\r\n    fixed: true,\r\n    buttons: [\r\n      {\r\n        name: 'edit',\r\n        template: 'grid-view-button'\r\n      },\r\n      {\r\n        name: 'delete',\r\n        template: 'grid-delete-button',\r\n        disabled(options) {\r\n          return !options.row?.data?.isDeletable\r\n        },\r\n      }\r\n    ],\r\n  },\r\n  {\r\n    dataField: 'id',\r\n    visible: false,\r\n  },\r\n  {\r\n    dataField: 'concurrencyStamp',\r\n    visible: false,\r\n  },\r\n\r\n  // grid item\r\n  {\r\n    name: 'tenantName',\r\n    caption: '租戶名稱',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text\r\n  },\r\n  {\r\n    name: 'notificationCategoryName',\r\n    caption: '分類名稱',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text\r\n  },\r\n  {\r\n    dataField: 'name',\r\n    caption: '通知名稱',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text,\r\n    validationRules: [requiredValidationRule]\r\n  },\r\n  {\r\n    name: 'notificationProviders',\r\n    caption: '通知提供者',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text,\r\n    calculateDisplayValue(rowData) {\r\n      return rowData.notificationProviders?.map(provider => provider.displayName).join('、')\r\n    },\r\n    width: 160,\r\n    allowFiltering: false,\r\n    allowSorting: false\r\n  },\r\n  {\r\n    name: 'receiverDescription',\r\n    caption: '接收者描述',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text,\r\n    allowFiltering: false,\r\n    allowSorting: false\r\n  },\r\n\r\n  // master detail\r\n  {\r\n    type: 'detailExpand',\r\n    fixed: true,\r\n    fixedPosition: 'right'\r\n  },\r\n  {\r\n    dataField: 'notificationDataFetchEndpoint',\r\n    caption: '取得通知資料 Endpoint',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text,\r\n    visible: false\r\n  },\r\n  {\r\n    dataField: 'hookEndpoint',\r\n    caption: 'Hook',\r\n    dataType: 'string',\r\n    filterOperations: filterOperationTypes.text,\r\n    visible: false\r\n  },\r\n  {\r\n    name: 'isFullyFinished',\r\n    caption: '是否已完成',\r\n    dataType: 'boolean',\r\n    visible: false\r\n  },\r\n  {\r\n    name: 'isDeletable',\r\n    caption: '是否可刪除',\r\n    dataType: 'boolean',\r\n    visible: false\r\n  },\r\n  {\r\n    name: 'isEditable',\r\n    caption: '是否可編輯',\r\n    dataType: 'boolean',\r\n    visible: false\r\n  },\r\n\r\n  // edit form\r\n  {\r\n    dataField: 'notificationProviderIds',\r\n    caption: '通知提供者id (可複選)',\r\n    dataType: 'object',\r\n    visible: false,\r\n    editCellTemplate: 'notificationProviderIds',\r\n    validationRules: [requiredValidationRule]\r\n  },\r\n  {\r\n    dataField: 'isSendToAllReceivers',\r\n    caption: '接收者',\r\n    dataType: 'boolean',\r\n    visible: false,\r\n    editCellTemplate: 'isSendToAllReceivers'\r\n  },\r\n  {\r\n    dataField: 'receiverIds',\r\n    caption: '接收者 (可複選)',\r\n    dataType: 'object',\r\n    visible: false,\r\n    editCellTemplate: 'receiverIds'\r\n  },\r\n  {\r\n    dataField: 'receiverGroupIds',\r\n    caption: '接收群組 (可複選)',\r\n    dataType: 'object',\r\n    visible: false,\r\n    editCellTemplate: 'receiverGroupIds'\r\n  },\r\n  {\r\n    dataField: 'topicIds',\r\n    caption: '主題 (可複選)',\r\n    dataType: 'object',\r\n    visible: false,\r\n    editCellTemplate: 'topicIds'\r\n  },\r\n  {\r\n    dataField: 'isIndependentNotificationSettingUsing',\r\n    caption: '通知設定',\r\n    dataType: 'boolean',\r\n    visible: false,\r\n    editCellTemplate: 'isIndependentNotificationSettingUsing'\r\n  },\r\n  {\r\n    dataField: 'notificationSettings',\r\n    caption: '通知設定項目',\r\n    dataType: 'object',\r\n    visible: false,\r\n    editCellTemplate: 'notificationSettings'\r\n  },\r\n  {\r\n    dataField: 'notificationCategoryId',\r\n    caption: '通知分類 Id',\r\n    dataType: 'string',\r\n    visible: false,\r\n    validationRules: [requiredValidationRule]\r\n  },\r\n  {\r\n    dataField: 'title',\r\n    caption: '標題',\r\n    dataType: 'string',\r\n    visible: false,\r\n    validationRules: [requiredValidationRule]\r\n  },\r\n  {\r\n    dataField: 'subtitle',\r\n    caption: '子標題',\r\n    dataType: 'string',\r\n    visible: false\r\n  },\r\n\r\n  // notification content\r\n  {\r\n    dataField: 'textContent',\r\n    caption: '文字內容',\r\n    dataType: 'string',\r\n    visible: false,\r\n    // validationRules: [requiredValidationRule]\r\n  },\r\n  {\r\n    dataField: 'htmlContent',\r\n    caption: 'Html 內容',\r\n    dataType: 'string',\r\n    visible: false,\r\n    // validationRules: [requiredValidationRule]\r\n  },\r\n  {\r\n    dataField: 'isFetchNotificationDataByEachReceiver',\r\n    caption: '是否依各通知接收者取得資料',\r\n    dataType: 'string',\r\n    visible: false\r\n  },\r\n  {\r\n    dataField: 'filePaths',\r\n    dataType: 'string',\r\n    visible: false\r\n  },\r\n  {\r\n    dataField: 'hyperlink',\r\n    dataType: 'string',\r\n    visible: false\r\n  },\r\n\r\n  // notification template\r\n  {\r\n    dataField: 'isUsingTemplate',\r\n    caption: '模板',\r\n    dataType: 'boolean',\r\n    visible: false,\r\n    editCellTemplate: 'isUsingTemplate'\r\n  },\r\n  {\r\n    dataField: 'textContentNotificationTemplateId',\r\n    caption: '通知模板 Id',\r\n    dataType: 'string',\r\n    visible: false,\r\n    // validationRules: [requiredValidationRule]\r\n  },\r\n  {\r\n    name: 'textContentNotificationTemplateName',\r\n    caption: '通知模板名稱',\r\n    dataType: 'string',\r\n    visible: false,\r\n    // validationRules: [requiredValidationRule]\r\n  },\r\n  {\r\n    dataField: 'textContentNotificationTemplateArgs',\r\n    caption: '通知模板參數',\r\n    dataType: 'string',\r\n    visible: false,\r\n    // validationRules: [requiredValidationRule],\r\n    editCellTemplate: 'textContentNotificationTemplateArgs'\r\n  }\r\n];","import { CRUDEndpoints } from \"src/app/shared/typing\";\r\n\r\nexport const cRUDEndpoints: CRUDEndpoints = {\r\n  index: '/api/app/instant-notifications',\r\n  get: '/api/app/instant-notifications',\r\n  create: '/api/app/instant-notifications',\r\n  update: '/api/app/instant-notifications',\r\n  delete: '/api/app/instant-notifications',\r\n};\r\n","import { DataFieldLookUpSourceMapping } from \"src/app/shared/typing\";\r\n\r\nexport const dataFieldLookupSourceMapping: DataFieldLookUpSourceMapping = [\r\n  {\r\n    dataField: 'notificationProviderIds',\r\n    path: '/api/app/instant-notifications/notification-provider-lookup',\r\n  },\r\n  {\r\n    dataField: 'receiverIds',\r\n    path: '/api/app/instant-notifications/receiver-lookup',\r\n  },\r\n  {\r\n    dataField: 'topicIds',\r\n    path: '/api/app/instant-notifications/topic-lookup',\r\n  },\r\n  {\r\n    dataField: 'receiverGroupIds',\r\n    path: '/api/app/notification-infos/receiver-group-treeview',\r\n  },\r\n  {\r\n    dataField: 'notificationCategoryId',\r\n    path: '/api/app/instant-notifications/notification-category-lookup',\r\n  },\r\n  {\r\n    dataField: 'textContentNotificationTemplateId',\r\n    path: '/api/app/instant-notifications/notification-template-lookup',\r\n  }\r\n];\r\n","import { RelatedDataValueAndQueryStringKeyMapping } from 'src/app/shared/typing';\r\n\r\nexport const relatedDataValueAndQueryStringKeyMapping: RelatedDataValueAndQueryStringKeyMapping = [\r\n  {\r\n    dataField: 'id',\r\n    mapping: ['notificationInfo', 'id'],\r\n  },\r\n  {\r\n    dataField: 'concurrencyStamp',\r\n    mapping: ['notificationInfo', 'concurrencyStamp'],\r\n  },\r\n  {\r\n    dataField: 'type',\r\n    mapping: ['notificationInfo', 'type'],\r\n  },\r\n  // \r\n  {\r\n    dataField: 'name',\r\n    queryStringKey: 'Name',\r\n    mapping: ['notificationInfo', 'name'],\r\n  },\r\n  {\r\n    name: 'tenantName',\r\n    queryStringKey: 'TenantName',\r\n    mapping: ['tenant', 'name'],\r\n  },\r\n  {\r\n    name: 'notificationCategoryName',\r\n    queryStringKey: 'NotificationCategoryName',\r\n    mapping: ['notificationCategory', 'name'],\r\n  },\r\n  {\r\n    name: 'notificationProviders',\r\n    queryStringKey: 'NotificationProviderNames',\r\n    mapping: ['notificationProviders'],\r\n  },\r\n  {\r\n    name: 'receiverDescription',\r\n    queryStringKey: 'ReceiverDescription',\r\n    mapping: ['receiverDescription'],\r\n  },\r\n\r\n  // \r\n  {\r\n    dataField: 'notificationDataFetchEndpoint',\r\n    queryStringKey: 'NotificationDataFetchEndpoint',\r\n    mapping: ['notificationInfo', 'notificationDataFetchEndpoint']\r\n  },\r\n  {\r\n    dataField: 'hookEndpoint',\r\n    queryStringKey: 'HookEndpoint',\r\n    mapping: ['notificationInfo', 'hookEndpoint'],\r\n  },\r\n  {\r\n    name: 'isFullyFinished',\r\n    queryStringKey: 'IsFullyFinished',\r\n    mapping: ['notificationInfo', 'isFullyFinished'],\r\n  },\r\n  {\r\n    name: 'isDeletable',\r\n    queryStringKey: 'IsDeletable',\r\n    mapping: ['isDeletable'],\r\n  },\r\n  {\r\n    name: 'isEditable',\r\n    queryStringKey: 'IsEditable',\r\n    mapping: ['isEditable'],\r\n  },\r\n\r\n  // \r\n  {\r\n    dataField: 'notificationProviderIds',\r\n    mapping: ['notificationProviderIds']\r\n  },\r\n  {\r\n    dataField: 'isSendToAllReceivers',\r\n    mapping: ['notificationInfo', 'isSendToAllReceivers']\r\n  },\r\n  {\r\n    dataField: 'receiverIds',\r\n    mapping: ['receiverIds']\r\n  },\r\n  {\r\n    dataField: 'receiverGroupIds',\r\n    mapping: ['receiverGroupIds']\r\n  },\r\n  {\r\n    dataField: 'topicIds',\r\n    mapping: ['topicIds']\r\n  },\r\n  {\r\n    dataField: 'isIndependentNotificationSettingUsing',\r\n    mapping: ['notificationInfo', 'isIndependentNotificationSettingUsing']\r\n  },\r\n  {\r\n    dataField: 'notificationSettings',\r\n    mapping: ['notificationSettings']\r\n  },\r\n  {\r\n    dataField: 'notificationCategoryId',\r\n    mapping: ['notificationCategory', 'id']\r\n  },\r\n  {\r\n    dataField: 'title',\r\n    queryStringKey: 'Title',\r\n    mapping: ['notificationInfo', 'title'],\r\n  },\r\n  {\r\n    dataField: 'subtitle',\r\n    mapping: ['notificationInfo', 'subtitle']\r\n  },\r\n  {\r\n    dataField: 'textContent',\r\n    mapping: ['notificationInfo', 'textContent']\r\n  },\r\n  {\r\n    dataField: 'htmlContent',\r\n    mapping: ['notificationInfo', 'htmlContent']\r\n  },\r\n  {\r\n    dataField: 'isFetchNotificationDataByEachReceiver',\r\n    mapping: ['notificationInfo', 'isFetchNotificationDataByEachReceiver']\r\n  },\r\n  {\r\n    dataField: 'filePaths',\r\n    mapping: ['notificationInfo', 'filePaths']\r\n  },\r\n  {\r\n    dataField: 'hyperlink',\r\n    mapping: ['notificationInfo', 'hyperlink']\r\n  },\r\n\r\n  // \r\n  {\r\n    dataField: 'textContentNotificationTemplateId',\r\n    mapping: ['textContentNotificationTemplate', 'id']\r\n  },\r\n  {\r\n    name: 'textContentNotificationTemplateName',\r\n    mapping: ['textContentNotificationTemplate', 'name']\r\n  },\r\n  {\r\n    dataField: 'textContentNotificationTemplateArgs',\r\n    mapping: ['notificationInfo', 'textContentNotificationTemplateArgs']\r\n  },\r\n  // \r\n  {\r\n    name: 'notificationSchedulePlans',\r\n    mapping: ['notificationSchedulePlans'],\r\n  },\r\n\r\n  {\r\n    dataField: 'receivers',\r\n    mapping: ['receivers']\r\n  },\r\n  {\r\n    dataField: 'receiverGroups',\r\n    mapping: ['receiverGroups']\r\n  },\r\n  {\r\n    dataField: 'topics',\r\n    mapping: ['topics']\r\n  }\r\n];\r\n","import { Editing } from 'devextreme/ui/data_grid';\r\nimport type { Properties } from 'devextreme/ui/form';\r\nimport { htmlProperties } from 'src/app/shared/htmlProperties';\r\n\r\nconst formItems: Properties['items'] = [\r\n    {\r\n        itemType: 'group',\r\n        name: 'TopGroup',\r\n        cssClass: 'TopGroup',\r\n        colCount: 8,\r\n        items: [\r\n            {\r\n                itemType: 'group',\r\n                name: 'BasicGroup',\r\n                cssClass: 'BasicGroup',\r\n                caption: '基本',\r\n                colSpan: 5,\r\n                items: [\r\n                    {\r\n                        dataField: 'name',\r\n                        editorType: 'dxTextBox',\r\n                        label: {\r\n                            text: '通知名稱'\r\n                        }\r\n                    },\r\n                    {\r\n                        dataField: 'notificationProviderIds',\r\n                        label: {\r\n                            visible: false\r\n                        }\r\n                    },\r\n                    {\r\n                        dataField: 'isSendToAllReceivers'\r\n                    },\r\n                    // {\r\n                    //     dataField: 'receiverIds',\r\n                    //     label: {\r\n                    //         visible: false\r\n                    //     }\r\n                    // },\r\n                    // {\r\n                    //     dataField: 'receiverGroupIds',\r\n                    //     label: {\r\n                    //         visible: false\r\n                    //     }\r\n                    // },\r\n                    // {\r\n                    //     dataField: 'topicIds',\r\n                    //     label: {\r\n                    //         visible: false\r\n                    //     }\r\n                    // }\r\n                    {\r\n                        itemType: 'group',\r\n                        name: \"custom-validation-group\",\r\n                        cssClass: \"custom-validation-group recurring-notification-custom-validation-group\",\r\n                        items: [\r\n                            {\r\n                                itemType: 'group',\r\n                                name: 'custom-validation-group-inputs',\r\n                                cssClass: 'custom-validation-group-inputs',\r\n                                items: [\r\n                                    {\r\n                                        dataField: 'receiverIds',\r\n                                        label: {\r\n                                            visible: false\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        dataField: 'receiverGroupIds',\r\n                                        label: {\r\n                                            visible: false\r\n                                        }\r\n                                    },\r\n                                    {\r\n                                        dataField: 'topicIds',\r\n                                        label: {\r\n                                            visible: false\r\n                                        }\r\n                                    },\r\n                                ]\r\n                            },\r\n                            {\r\n                                name: 'error',\r\n                                cssClass: 'custom-validation-group-error-message',\r\n                                template: 'error'\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                itemType: 'group',\r\n                name: 'SettingGroup',\r\n                cssClass: 'SettingGroup',\r\n                caption: '設定',\r\n                colSpan: 3,\r\n                items: [\r\n                    {\r\n                        dataField: 'isIndependentNotificationSettingUsing'\r\n                    },\r\n                    {\r\n                        dataField: 'notificationSettings',\r\n                        label: {\r\n                            visible: false\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        itemType: 'group',\r\n        name: 'NotificationContentGroup',\r\n        cssClass: 'NotificationContentGroup',\r\n        caption: '通知內容',\r\n        colCount: 2,\r\n        items: [\r\n            {\r\n                dataField: 'isUsingTemplate',\r\n                cssClass: 'isUsingTemplate',\r\n                label: {\r\n                    visible: false\r\n                }\r\n            },\r\n            {\r\n                itemType: 'empty'\r\n            },\r\n            {\r\n                dataField: 'notificationCategoryId',\r\n                editorType: 'dxSelectBox'\r\n            },\r\n            {\r\n                itemType: 'empty'\r\n            },\r\n            {\r\n                dataField: 'title',\r\n                editorType: 'dxTextBox'\r\n            },\r\n            {\r\n                dataField: 'subtitle',\r\n                editorType: 'dxTextBox'\r\n            },\r\n            {\r\n                itemType: 'group',\r\n                name: 'CustomContentGroup',\r\n                cssClass: 'CustomContentGroup',\r\n                colSpan: 2,\r\n                colCount: 8,\r\n                items: [\r\n                    {\r\n                        dataField: 'textContent',\r\n                        editorType: 'dxTextArea',\r\n                        editorOptions: {\r\n                            height: '240px'\r\n                        },\r\n                        colSpan: 3\r\n                    },\r\n                    {\r\n                        dataField: 'htmlContent',\r\n                        editorType: 'dxHtmlEditor',\r\n                        editorOptions: {\r\n                            ...htmlProperties,\r\n                            height: '240px'\r\n                        },\r\n                        colSpan: 5\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                itemType: 'group',\r\n                name: 'NotificationTemplateGroup',\r\n                cssClass: 'NotificationTemplateGroup NotificationTemplateGroup--inactive',\r\n                colSpan: 2,\r\n                colCount: 2,\r\n                items: [\r\n                    {\r\n                        dataField: 'textContentNotificationTemplateId',\r\n                        editorType: 'dxSelectBox',\r\n                        cssClass: 'textContentNotificationTemplateId'\r\n                    },\r\n                    {\r\n                        itemType: 'empty'\r\n                    },\r\n                    {\r\n                        dataField: 'textContentNotificationTemplateArgs',\r\n                        label: {\r\n                            visible: false\r\n                        },\r\n                        colSpan: 2,\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                itemType: 'group',\r\n                name: 'EndpointGroup',\r\n                cssClass: 'EndpointGroup',\r\n                colSpan: 2,\r\n                colCount: 3,\r\n                items: [\r\n                    {\r\n                        dataField: 'notificationDataFetchEndpoint',\r\n                        editorType: 'dxTextBox'\r\n                    },\r\n                    {\r\n                        dataField: 'hookEndpoint',\r\n                        editorType: 'dxTextBox'\r\n                    },\r\n                    {\r\n                        dataField: 'isFetchNotificationDataByEachReceiver',\r\n                        editorType: 'dxCheckBox',\r\n                        cssClass: 'basic-form-checkbox'\r\n                    }\r\n                ]\r\n            },\r\n        ]\r\n    }\r\n]\r\n\r\nexport const formProperties: Properties = {\r\n    colCount: 1,\r\n    items: formItems,\r\n};\r\n\r\n\r\nexport const editingPropertiesForCreating: Editing = {\r\n    popup: {\r\n        title: '',\r\n        wrapperAttr: { class: 'basic-popup' },\r\n        showCloseButton: true,\r\n        toolbarItems: [\r\n            {\r\n                toolbar: 'bottom',\r\n                template: 'bottom-toolbar'\r\n            }\r\n        ]\r\n    },\r\n    form: {\r\n        colCount: 1,\r\n        items: formItems,\r\n        elementAttr: { class: 'custom-form custom-form--edit custom-form--edit-notification' }\r\n    }\r\n}\r\n\r\nexport const editingPropertiesForUpdating: Editing = {\r\n    popup: {\r\n        title: 'JbNotifier::Permission:Notifications',\r\n        wrapperAttr: { class: 'basic-popup' },\r\n        showCloseButton: true,\r\n        toolbarItems: [\r\n            {\r\n                toolbar: 'bottom',\r\n                template: 'bottom-toolbar'\r\n            }\r\n        ]\r\n    },\r\n    form: {\r\n        colCount: 1,\r\n        items: formItems,\r\n        elementAttr: { class: 'custom-form custom-form--edit custom-form--edit-notification custom-form--edit-readonly' }\r\n    }\r\n}","<div class=\"custom-grid-container\">\r\n  <app-tenant-chooser></app-tenant-chooser>\r\n\r\n  <div class=\"grid-tool-bar\">\r\n      <div>\r\n        <app-grid-filter-items\r\n          [grid]=\"grid\"\r\n        ></app-grid-filter-items>\r\n      </div>\r\n      <div class=\"d-flex justify-content-between\">\r\n        <div>\r\n          <dx-button\r\n            appGridAddButton\r\n            (onClick)=\"router.navigate(['./instant-notification-infos/create-notification-info'])\"\r\n          >\r\n          </dx-button>\r\n        </div>\r\n        <app-grid-after-tool-bar\r\n          [grid]=\"grid\"\r\n        >\r\n        </app-grid-after-tool-bar>\r\n      </div>\r\n  </div>\r\n\r\n  <dx-data-grid\r\n    #grid\r\n    appGridFeature\r\n    appGridFeatureNotification\r\n    [datafieldValueQueryStringKeyMapping]=\"relatedDataValueAndQueryStringKeyMapping\"\r\n    [dataFieldLookUpSourceMapping]=\"dataFieldLookupSourceMapping\"\r\n    [editingPropertiesForCreating]=\"editingPropertiesForCreating\"\r\n    [editingPropertiesForUpdating]=\"editingPropertiesForUpdating\"\r\n    [columns]=\"columns\"\r\n    [dataSource]=\"gridDataSource\"\r\n    [isEditingDataAsync]=\"true\"\r\n    [gridProperties]=\"gridProperties\"\r\n    [(notificationTemplateId)]=\"notificationTemplateId\"\r\n    (onRowExpanded)=\"onRowExpanded($event)\"\r\n    (onOptionChanged)=\"onOptionChanged($event)\"\r\n  >\r\n    <dx-button\r\n      *dxTemplate=\"let cellInfo of 'bottom-toolbar'\"\r\n      appCustomButton\r\n      text=\"關閉\"\r\n      [elementAttr]=\"{class: 'custom-button'}\"\r\n      (onClick)=\"grid.instance.cancelEditData()\"\r\n    >\r\n    </dx-button>\r\n\r\n    <ng-container *ngFor=\"let template of templateStore.gridTemplates | keyvalue\">\r\n      <ng-container *dxTemplate=\"let cellInfo of template.key\">\r\n        <ng-container\r\n          *ngTemplateOutlet=\"\r\n            templateStore.getGridTemplates(template.key);\r\n            context: { $implicit: cellInfo }\r\n          \"\r\n        >\r\n        </ng-container>\r\n      </ng-container>\r\n    </ng-container>\r\n\r\n    <ng-container *ngFor=\"let template of notificationTemplateStore.templates | keyvalue\">\r\n      <ng-container *dxTemplate=\"let cellInfo of template.key\">\r\n        @if (template.key === 'textContentNotificationTemplateArgs') {\r\n          <ng-container\r\n            *ngTemplateOutlet=\"\r\n            notificationTemplateStore.getTemplates(template.key);\r\n            context: {$implicit: cellInfo, templateKey: template.key, notificationTemplateId: notificationTemplateId}\r\n            \"\r\n          >\r\n          </ng-container>\r\n        }\r\n        @else {\r\n          <ng-container\r\n            *ngTemplateOutlet=\"\r\n            notificationTemplateStore.getTemplates(template.key);\r\n            context: {$implicit: cellInfo, templateKey: template.key}\r\n            \"\r\n          >\r\n          </ng-container>\r\n        }\r\n      </ng-container>\r\n    </ng-container>\r\n  </dx-data-grid>\r\n\r\n  <ng-container\r\n    *ngTemplateOutlet=\"\r\n      notificationTemplateStore.getTemplates('notificationPager');\r\n      context: { $implicit: grid }\r\n    \"\r\n  >\r\n  </ng-container>\r\n</div>","import { AuthGuard, PermissionGuard } from '@abp/ng.core';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { InstantNotificationInfosComponent } from './components/instant-notification-infos.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: InstantNotificationInfosComponent,\r\n    canActivate: [AuthGuard, PermissionGuard],\r\n  },\r\n  {\r\n    path: 'create-notification-info',\r\n    loadChildren: () => import('../create-notification-info/create-notification-info.module').then(m => m.CreateNotificationInfoModule)\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class InstantNotificationInfosRoutingModule { }\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport type { Editing, OptionChangedEvent, Properties, RowExpandedEvent } from 'devextreme/ui/data_grid';\r\nimport { DxDataGridComponent } from 'devextreme-angular';\r\nimport { Column } from 'devextreme/ui/data_grid';\r\nimport { columns } from '../config/columns';\r\nimport { cRUDEndpoints } from '../config/crud-endpoints';\r\nimport { dataFieldLookupSourceMapping } from '../config/datafield-lookup-source-mapping';\r\nimport { relatedDataValueAndQueryStringKeyMapping } from '../config/datafield-value-query-string-key-mapping';\r\nimport {\r\n  editingPropertiesForCreating,\r\n  editingPropertiesForUpdating,\r\n} from '../config/form-properties';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { CRUDEndpoints, DataFieldLookUpSourceMapping, RelatedDataValueAndQueryStringKeyMapping } from 'src/app/shared/typing';\r\nimport { GridDataSourceService } from 'src/app/shared/service/grid-data-source.service/grid-data-source.service';\r\nimport { TemplateStoreService } from 'src/app/shared/service/template-store.service';\r\nimport { NotificationTemplateStoreService } from 'src/app/shared/service/notification-template-store/notification-template-store.service';\r\nimport { Router } from '@angular/router';\r\nimport { TenantChooserService } from 'src/app/shared/modules/tenant-chooser/tenant-chooser.service';\r\n\r\n@Component({\r\n  selector: 'app-instant-notification',\r\n  templateUrl: './instant-notification-infos.component.html',\r\n  styleUrls: ['./instant-notification-infos.scss']\r\n})\r\n/**\r\n *\r\n */\r\nexport class InstantNotificationInfosComponent implements OnInit {\r\n  /**\r\n   * 取得datagrid元件，將之存於變數grid。\r\n   */\r\n  @ViewChild('grid', { static: false }) grid: DxDataGridComponent;\r\n\r\n  /**\r\n   * devextreme data grid columns\r\n   * \r\n   * 用來設定grid具有那些欄位。\r\n   * \r\n   * DevExtreme官方文件: [Column]{@link https://js.devexpress.com/Angular/Documentation/23_2/Guide/UI_Components/DataGrid/Columns/Overview/}\r\n   */\r\n  columns: Column[] = columns;\r\n\r\n  /**\r\n   * devextreme grid datasource\r\n   * \r\n   * grid dataSource, 用來連接grid與後端data的新增、讀取、修改、刪除。\r\n   * \r\n   * 透過[getDataSource]{@link GridDataSourceService#getDataSource}使用[cRUDEndpoints]{@link InstantNotificationInfosComponent#cRUDEndpoints}與[relatedDataValueAndQueryStringKeyMapping]{@link InstantNotificationInfosComponent#relatedDataValueAndQueryStringKeyMapping}產生。\r\n   * \r\n   * DevExtreme官方文件: [DataSource]{@link https://js.devexpress.com/Angular/Documentation/23_2/ApiReference/Data_Layer/DataSource/}\r\n   */\r\n  gridDataSource: DataSource;\r\n\r\n  /**\r\n   * 設定增、刪、查、改的路徑\r\n   * \r\n   * 用於[getDataSource]{@link GridDataSourceService#getDataSource}接收然後利用產生[gridDataSource]{@link InstantNotificationInfosComponent#gridDataSource}。\r\n   */\r\n  cRUDEndpoints: CRUDEndpoints = cRUDEndpoints;\r\n\r\n  /**\r\n   * 選單與資料路徑對應設定檔案\r\n   * \r\n   * {@link GridFeatureDirective}接收後用來設定[DataGrid]{@link https://js.devexpress.com/Angular/Documentation/23_2/Guide/UI_Components/DataGrid/Getting_Started_with_DataGrid/}的新增、編輯表單裡的選單。\r\n   */\r\n  dataFieldLookupSourceMapping: DataFieldLookUpSourceMapping = dataFieldLookupSourceMapping;\r\n\r\n  /**\r\n   * 欄位、值、與回應資料結構的對應設定檔案\r\n   * \r\n   * 用於[getDataSource]{@link GridDataSourceService#getDataSource}接收然後利用產生[gridDataSource]{@link InstantNotificationInfosComponent#gridDataSource}。\r\n   */\r\n  relatedDataValueAndQueryStringKeyMapping: RelatedDataValueAndQueryStringKeyMapping =\r\n    relatedDataValueAndQueryStringKeyMapping;\r\n\r\n  /**\r\n   * 新增的表單設定\r\n   * \r\n   * DevExtreme官方文件: [Editing]{@link https://js.devexpress.com/Angular/Documentation/23_2/Guide/UI_Components/DataGrid/Editing/}\r\n   */\r\n  editingPropertiesForCreating: Editing = editingPropertiesForCreating;\r\n\r\n  /**\r\n   * 編輯的表單設定\r\n   * \r\n   * DevExtreme官方文件: [Editing]{@link https://js.devexpress.com/Angular/Documentation/23_2/Guide/UI_Components/DataGrid/Editing/}\r\n   */\r\n  editingPropertiesForUpdating: Editing = editingPropertiesForUpdating;\r\n\r\n  /**\r\n   * 通知模板ID\r\n   * \r\n   * 選擇通知模板後，藉由ID取得該模板的內容與參數\r\n   */\r\n  notificationTemplateId: string\r\n\r\n  /**\r\n   * 使用master detail功能時，記錄目前展開的Row，以在展開新的Row時，可以關閉上一個開啟的Row，確保只會有一個Row是展開的 \r\n   */\r\n  masterDetailRowCollapseKey: string\r\n\r\n  /**\r\n   * 啟用master detail功能，並給予[template]{@link https://js.devexpress.com/Angular/Documentation/ApiReference/Common/Object_Structures/template/}\r\n   * \r\n   * 設定高度\r\n   * \r\n   * DevExtreme官方文件: [Properties]{@link https://js.devexpress.com/Angular/Documentation/ApiReference/UI_Components/dxDataGrid/Configuration/masterDetail/}\r\n   */\r\n  gridProperties: Properties = {\r\n    masterDetail: {\r\n      enabled: true,\r\n      template: 'basic-master-detail-row-template'\r\n    },\r\n    height: '85%'\r\n  }\r\n\r\n  /**\r\n   * 參考{@link https://js.devexpress.com/Angular/Documentation/23_2/Guide/UI_Components/DataGrid/Editing|Editing},\r\n   * [editCellTemplate]{@link https://js.devexpress.com/Angular/Documentation/23_2/ApiReference/UI_Components/dxDataGrid/Configuration/columns/\\#editCellTemplate/},\r\n   * [template]{@link js.devexpress.com/Angular/Documentation/23_2/ApiReference/UI_Components/dxForm/Item_Types/SimpleItem/#template/}\r\n   * \r\n   * @param gridDataSourceService dxdatagrid所使用的產生datasource相關功能\r\n   * @param templateStore 共用的dx template儲存service，用於dx-data-grid、dx-form的custom template, 參考editCellTemplate, template\r\n   * @param notificationTemplateStore 共用的dx template儲存service，用於dx-data-grid、dx-form的custom template, 參考editCellTemplate, template,\r\n   * 但只用於新增通知項目時使用\r\n   * @param router 用於新增時，將頁面導向共用的新增頁面\r\n   */\r\n  constructor(\r\n    private gridDataSourceService: GridDataSourceService,\r\n    protected templateStore: TemplateStoreService,\r\n    protected notificationTemplateStore: NotificationTemplateStoreService,\r\n    protected router: Router,\r\n    private tenantChooser: TenantChooserService\r\n  ) {\r\n    this.tenantChooser.tenantId$.subscribe(tenandId => {\r\n      this.grid?.instance?.refresh()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 元件啟動後，透過[getDataSource]{@link GridDataSourceService#getDataSource}使用設定檔設定grid的dataSource - [gridDataSource]{@link InstantNotificationInfosComponent#gridDataSource}。\r\n   */\r\n  ngOnInit(): void {\r\n    this.gridDataSource = this.gridDataSourceService.getDataSource(\r\n      cRUDEndpoints,\r\n      relatedDataValueAndQueryStringKeyMapping\r\n    );\r\n  }\r\n\r\n  /**\r\n   * [rowExpanded]{@link https://js.devexpress.com/Angular/Documentation/ApiReference/UI_Components/dxDataGrid/Events/#rowExpanded}事件觸發時，呼叫[applyyNotificationMasterDetailRowCollapse]{@link InstantNotificationInfosComponent#applyNotificationMasterDetailRowCollapse}\r\n   * \r\n   * @param e 參考RowExpandedEvent\r\n   */\r\n  onRowExpanded(e: RowExpandedEvent) {\r\n    this.applyNotificationMasterDetailRowCollapse(e)\r\n  }\r\n\r\n  /**\r\n   * 展開master detail時，添加畫面項目需要的CSS\r\n   * \r\n   * 如果[masterDetailRowCollapseKey]{@link InstantNotificationInfosComponent#masterDetailRowCollapseKey}與按下展開按鈕的Row是一樣的時，則[masterDetailRowCollapseKey]{@link InstantNotificationInfosComponent#masterDetailRowCollapseKey}不變\r\n   * \r\n   * 記錄展開當下的[masterDetailRowCollapseKey]{@link InstantNotificationInfosComponent#masterDetailRowCollapseKey}，並確保\r\n   *每次只會有一個項目被展開\r\n   * \r\n   * 使用setTimeout避免NG0100{@link https://angular.dev/errors/NG0100}Error\r\n   */\r\n  applyNotificationMasterDetailRowCollapse(e: RowExpandedEvent) {\r\n    setTimeout(() => {\r\n      const tdElementCollapse = e.element.querySelector('[aria-label=\"Collapse\"]')\r\n      const trElementRowIndex = tdElementCollapse.parentElement.ariaRowIndex\r\n      const trElementRow = e.element.querySelector(`tr.dx-row.dx-data-row.dx-row-lines[aria-rowindex=\"${trElementRowIndex}\"]`)\r\n      trElementRow.classList.add('master-detail-row-collapse')\r\n    })\r\n\r\n    if (e.key === this.masterDetailRowCollapseKey) {\r\n      return\r\n    }\r\n\r\n    e.component.collapseRow(this.masterDetailRowCollapseKey);\r\n    this.masterDetailRowCollapseKey = e.key\r\n  }\r\n\r\n  /**\r\n   * 取得[notificationTemplateId]{@link InstantNotificationInfosComponent#notificationTemplateId}\r\n   * \r\n   * @param e OptionChangedEvent\r\n   */\r\n  onOptionChanged(e: OptionChangedEvent) {\r\n    if (\r\n      e.fullName !== 'editing.changes' ||\r\n      !e.value ||\r\n      !e.value[0]?.data ||\r\n      !('textContentNotificationTemplateId' in e.value[0].data)\r\n    ) {\r\n      return\r\n    }\r\n\r\n    this.notificationTemplateId = e.value[0].data.textContentNotificationTemplateId\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { InstantNotificationInfosComponent } from './components/instant-notification-infos.component';\r\nimport { InstantNotificationInfosRoutingModule } from './instant-notification-infos-routing.module';\r\nimport { DXComponentsModule } from '../shared/dx-components.module';\r\nimport { DxHtmlEditorModule } from 'devextreme-angular';\r\nimport { GridFilterItemsComponent } from \"../shared/components/grid/grid-filter-items/grid-filter-items.component\";\r\nimport { TenantChooserModule } from \"../shared/modules/tenant-chooser/tenant-chooser.module\";\r\n@NgModule({\r\n  declarations: [InstantNotificationInfosComponent],\r\n  imports: [\r\n    CommonModule,\r\n    InstantNotificationInfosRoutingModule,\r\n    DXComponentsModule,\r\n    DxHtmlEditorModule,\r\n    SharedModule,\r\n    GridFilterItemsComponent,\r\n    TenantChooserModule\r\n  ],\r\n})\r\nexport class InstantNotificationInfosModule { }\r\n"],"x_google_ignoreList":[]}