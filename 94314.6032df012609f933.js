"use strict";(self.webpackChunkJBNotifier=self.webpackChunkJBNotifier||[]).push([[94314],{94314:(te,c,o)=>{o.r(c),o.d(c,{CronExpressionsModule:()=>ee});var d=o(96814),g=o(23758);const h=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"job-list",template:"job-list"}]},{dataField:"cronExpression",caption:"Cron\u8868\u793a\u5f0f",dataType:"string"},{dataField:"cronDescription",caption:"Cron\u63cf\u8ff0",dataType:"string"}],u={index:"/api/app/cron-expressions",get:"/api/app/cron-expressions",create:"/api/app/cron-expressions",update:"/api/app/cron-expressions",delete:"/api/app/cron-expressions"},T=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"}],b=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],m=[{dataField:"cronExpression",queryStringKey:"CronExpression",mapping:["cronExpression"]},{dataField:"cronDescription",queryStringKey:"CronDescription",mapping:["cronDescription"]},{dataField:"notificationCount",queryStringKey:"NotificationCount",mapping:["notificationCount"]},{dataField:"concurrencyStamp",mapping:["apiKey","concurrencyStamp"]}],M={popup:{title:"\u65b0\u589e"},form:{colCount:2,items:[{dataField:"tenantId",editorType:"dxSelectBox",colSpan:1},{dataField:"startDate",editorType:"dxDateBox",colSpan:1},{dataField:"endDate",editorType:"dxDateBox",colSpan:1}]}},K={popup:{title:"\u7de8\u8f2f"},form:{colCount:2,items:[{dataField:"tenantId",editorType:"dxSelectBox",colSpan:1,editorOptions:{disabled:!0}},{dataField:"startDate",editorType:"dxDateBox",colSpan:1},{dataField:"endDate",editorType:"dxDateBox",colSpan:1}]}};var e=o(19212),x=o(67),y=o(72783),E=o(88762),A=o(16358),f=o(20843),l=o(2173),F=o(25012),S=o(43821),C=o(10313);const J=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"delete",template:"grid-delete-button",visible:t=>t.row.data.isDeletable}]},{dataField:"id",visible:!1},{dataField:"notificationInfoName",caption:"\u901a\u77e5\u540d\u7a31",dataType:"string"},{dataField:"title",caption:"\u6a19\u984c",dataType:"string"},{dataField:"isDeletable",caption:"\u6a19\u984c",dataType:"boolean",visible:!1}],L={index:"/api/app/cron-expressions",get:"/api/app/cron-expressions",create:"/api/app/cron-expressions",update:"/api/app/cron-expressions",delete:"/api/app/cron-expressions"},B=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"}],Q=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],_=[{dataField:"id",mapping:["notificationSchedulePlanId"]},{dataField:"notificationInfoName",queryStringKey:"NotificationInfoName",mapping:["notificationInfoName"]},{dataField:"title",queryStringKey:"Title",mapping:["title"]},{dataField:"concurrencyStamp",mapping:["apiKey","concurrencyStamp"]},{dataField:"isDeletable",mapping:["isDeletable"]}],P={popup:{title:"\u65b0\u589e"},form:{colCount:2,items:[{dataField:"tenantId",editorType:"dxSelectBox",colSpan:1},{dataField:"startDate",editorType:"dxDateBox",colSpan:1},{dataField:"endDate",editorType:"dxDateBox",colSpan:1}]}},Z={popup:{title:"\u7de8\u8f2f"},form:{colCount:2,items:[{dataField:"tenantId",editorType:"dxSelectBox",colSpan:1,editorOptions:{disabled:!0}},{dataField:"startDate",editorType:"dxDateBox",colSpan:1},{dataField:"endDate",editorType:"dxDateBox",colSpan:1}]}};var I=o(98179);function V(t,s){if(1&t&&e._UZ(0,"app-grid-general-filter",8),2&t){e.oxw();const n=e.MAs(2);e.Q6J("grid",n)}}function O(t,s){1&t&&e.GkF(0)}const j=t=>({$implicit:t});function Y(t,s){if(1&t&&(e.ynx(0),e.YNc(1,O,1,0,"ng-container",10),e.BQk()),2&t){const n=s.$implicit,a=e.oxw().$implicit,i=e.oxw();e.xp6(),e.Q6J("ngTemplateOutlet",i.templateStore.getGridTemplates(a.key))("ngTemplateOutletContext",e.VKq(2,j,n))}}function k(t,s){if(1&t&&(e.ynx(0),e.YNc(1,Y,2,4,"ng-container",9),e.BQk()),2&t){const n=s.$implicit;e.xp6(),e.Q6J("dxTemplateOf",n.key)}}const z=()=>({type:"default",stylingMode:"contained"});let w=(()=>{class t{constructor(n,a){this.gridDataSourceService=n,this.templateStore=a,this.visibleChange=new e.vpe,this.columns=J,this.cRUDEndpoints=L,this.dataFieldLookupSourceMapping=B,this.dataFieldTranslationKeysMapping=Q,this.relatedDataValueAndQueryStringKeyMapping=_,this.editingPropertiesForCreating=P,this.editingPropertiesForUpdating=Z,this.onHidden=()=>{this.visibleChange.emit(!1)}}ngOnChanges(n){n.cronExpression?.currentValue&&n.visible?.currentValue&&(this.gridDataSource=this.gridDataSourceService.getDataSource({index:`/api/app/cron-expressions/notifications/${this.cronExpression}`,delete:"/api/app/cron-expressions/notifications"},_))}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(x.I),e.Y36(y.z))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-job-list"]],inputs:{visible:"visible",cronExpression:"cronExpression"},outputs:{visibleChange:"visibleChange"},features:[e.TTD],decls:10,vars:14,consts:[[3,"visible","showCloseButton","visibleChange","onHidden"],["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource"],["grid",""],["name","addRowButton","location","before","widget","dxButton","cssClass","mb-1",3,"options"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[3,"grid"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,i){1&a&&(e.TgZ(0,"dx-popup",0),e.NdJ("visibleChange",function(p){return i.visible=p})("onHidden",function(){return i.onHidden()}),e.TgZ(1,"dx-data-grid",1,2)(3,"dxo-toolbar"),e._UZ(4,"dxi-item",3),e.TgZ(5,"dxi-item",4),e.YNc(6,V,1,1,"app-grid-general-filter",5),e.qZA(),e._UZ(7,"dxi-item",6),e.qZA(),e.YNc(8,k,2,1,"ng-container",7),e.ALo(9,"keyvalue"),e.qZA()()),2&a&&(e.Q6J("visible",i.visible)("showCloseButton",!0),e.xp6(),e.Q6J("dataFieldTranslationKeysMapping",i.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",i.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",i.dataFieldLookupSourceMapping)("editingPropertiesForCreating",i.editingPropertiesForCreating)("editingPropertiesForUpdating",i.editingPropertiesForUpdating)("columns",i.columns)("dataSource",i.gridDataSource),e.xp6(3),e.Q6J("options",e.DdM(13,z)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(9,11,i.templateStore.gridTemplates)))},dependencies:[d.sg,d.tP,f.p6,l.ZT3,I.x,F.e,l.y1f,S._,C.w,d.Nd]})}return t})();const G=["grid"];function H(t,s){if(1&t&&e._UZ(0,"app-grid-general-filter",7),2&t){e.oxw();const n=e.MAs(1);e.Q6J("grid",n)}}function R(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"dx-button",8),e.NdJ("onClick",function(){const r=e.CHM(n).$implicit,p=e.oxw();return e.KtG(p.showJobList(r.data.cronExpression))}),e.qZA()}2&t&&e.Q6J("text","\u5de5\u4f5c\u6e05\u55ae")}const $=[{path:"",component:(()=>{class t{constructor(n,a,i){this.gridDataSourceService=n,this.templateStore=a,this.configStateService=i,this.columns=h,this.cRUDEndpoints=u,this.dataFieldLookupSourceMapping=T,this.dataFieldTranslationKeysMapping=b,this.relatedDataValueAndQueryStringKeyMapping=m,this.editingPropertiesForCreating=M,this.editingPropertiesForUpdating=K,this.gridProperties={editing:{allowAdding:!1}},this.jobListVisible=!1,this.showJobList=p=>{this.jobListVisible=!0,this.cronExpression=p},this.configStateService.getOne("currentUser")}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(u,m)}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(x.I),e.Y36(y.z),e.Y36(E.XJE))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-cron-expressions"]],viewQuery:function(a,i){if(1&a&&e.Gf(G,5),2&a){let r;e.iGM(r=e.CRH())&&(i.grid=r.first)}},decls:8,vars:10,consts:[["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource"],["grid",""],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],["type","default",3,"text","onClick",4,"dxTemplate","dxTemplateOf"],[3,"visible","cronExpression","visibleChange"],[3,"grid"],["type","default",3,"text","onClick"]],template:function(a,i){1&a&&(e.TgZ(0,"dx-data-grid",0,1)(2,"dxo-toolbar")(3,"dxi-item",2),e.YNc(4,H,1,1,"app-grid-general-filter",3),e.qZA(),e._UZ(5,"dxi-item",4),e.qZA(),e.YNc(6,R,1,1,"dx-button",5),e.qZA(),e.TgZ(7,"app-job-list",6),e.NdJ("visibleChange",function(p){return i.jobListVisible=p}),e.qZA()),2&a&&(e.Q6J("dataFieldTranslationKeysMapping",i.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",i.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",i.dataFieldLookupSourceMapping)("editingPropertiesForCreating",i.editingPropertiesForCreating)("editingPropertiesForUpdating",i.editingPropertiesForUpdating)("columns",i.columns)("dataSource",i.gridDataSource),e.xp6(6),e.Q6J("dxTemplateOf","job-list"),e.xp6(),e.Q6J("visible",i.jobListVisible)("cronExpression",i.cronExpression))},dependencies:[A.K,f.p6,l.ZT3,F.e,l.y1f,S._,C.w,w]})}return t})()}];let X=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[g.Bz.forChild($),g.Bz]})}return t})();var W=o(77490),q=o(66648);let ee=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[d.ez,W.P,X,q.m]})}return t})()}}]);