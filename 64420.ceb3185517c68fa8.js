"use strict";(self.webpackChunkJBNotifier=self.webpackChunkJBNotifier||[]).push([[64420],{64420:(G,c,o)=>{o.r(c),o.d(c,{ApiKeysModule:()=>z});var s=o(96814),l=o(88762),u=o(23758),d=o(35461);const v=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"edit",template:"grid-edit-button"},{name:"delete",template:"grid-delete-button"},{name:"copy-token-value",template:"copy-token-value"},{name:"regenerate-token-button",template:"regenerate-token-button"}]},{dataField:"id",visible:!1},{dataField:"tenantId",caption:"\u79df\u6236",dataType:"string",visible:!1},{name:"tenantName",caption:"\u79df\u6236",dataType:"string",filterOperations:d.I.text},{name:"tokenValue",caption:"TokenValue",width:200},{dataField:"startDate",caption:"\u8d77\u65e5",dataType:"date",filterOperations:d.I.date},{dataField:"endDate",caption:"\u8fc4\u65e5",dataType:"date",filterOperations:d.I.date},{name:"status",caption:"\u72c0\u614b",dataType:"string"},{dataField:"concurrencyStamp",dataType:"string",visible:!1}],g={index:"/api/app/api-keys",get:"/api/app/api-keys",create:"/api/app/api-keys",update:"/api/app/api-keys",delete:"/api/app/api-keys"},S=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"}],h=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],m=[{dataField:"id",mapping:["apiKey","id"]},{dataField:"tenantId",queryStringKey:"TenantId",mapping:["tenant","id"]},{name:"tenantName",queryStringKey:"TenantName",mapping:["tenant","name"]},{name:"tokenValue",mapping:["apiKey","tokenValue"]},{dataField:"startDate",queryStringKey:"StartDate",mapping:["apiKey","startDate"]},{dataField:"endDate",queryStringKey:"EndDate",mapping:["apiKey","endDate"]},{name:"status",queryStringKey:"Status",mapping:["apiKey","status"]},{dataField:"concurrencyStamp",mapping:["apiKey","concurrencyStamp"]}],C={popup:{title:"\u65b0\u589e"},form:{colCount:2,items:[{dataField:"tenantId",editorType:"dxSelectBox",colSpan:1},{dataField:"startDate",editorType:"dxDateBox",colSpan:1},{dataField:"endDate",editorType:"dxDateBox",colSpan:1}]}},K={popup:{title:"\u7de8\u8f2f"},form:{colCount:2,items:[{dataField:"tenantId",editorType:"dxSelectBox",colSpan:1,editorOptions:{disabled:!0}},{dataField:"startDate",editorType:"dxDateBox",colSpan:1},{dataField:"endDate",editorType:"dxDateBox",colSpan:1}]}};var t=o(19212),A=o(67),D=o(72783),k=o(20515),y=o(2173),I=o(69784),b=o(43821),_=o(10313),f=o(24270),T=o(16358);let M=(()=>{class e{constructor(n){this.toastService=n,this.copyToClipboard=()=>{navigator.clipboard.writeText(this.value).then(()=>{this.toastService.info(`\u5df2\u8907\u88fdToken: ${this.value}`),console.log("Text copied to clipboard")}).catch(a=>{console.error("Error copying text: ",a)})}}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(f.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-copy-to-clipboard"]],inputs:{value:"value",cellInfo:"cellInfo"},decls:1,vars:0,consts:[["stylingMode","contained","icon","copy","type","normal",3,"onClick"]],template:function(a,i){1&a&&(t.TgZ(0,"dx-button",0),t.NdJ("onClick",function(){return i.copyToClipboard()}),t.qZA())},dependencies:[T.K],encapsulation:2})}return e})();var N=o(53009);let U=(()=>{class e{constructor(n,a){this.restService=n,this.toastService=a,this.regenerateApiKey=()=>{this.restService.request({url:`/api/app/api-keys/regenerate-token-value/${this.value}`,method:"PUT"}).subscribe(()=>{this.grid.instance.refresh(),this.toastService.info("\u5df2\u91cd\u65b0\u7522\u751fToken!")})}}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(N.$),t.Y36(f.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-regnerate-token-button"]],inputs:{value:"value",grid:"grid"},decls:1,vars:0,consts:[["stylingMode","contained","icon","refresh","type","success",3,"onClick"]],template:function(a,i){1&a&&(t.TgZ(0,"dx-button",0),t.NdJ("onClick",function(){return i.regenerateApiKey()}),t.qZA())},dependencies:[T.K],encapsulation:2})}return e})();const B=["grid"];function O(e,r){if(1&e&&t._UZ(0,"app-copy-to-clipboard",9),2&e){const n=r.$implicit;t.Q6J("cellInfo",n)("value",null==n.row||null==n.row.data?null:n.row.data.tokenValue)}}function Q(e,r){if(1&e&&t._UZ(0,"app-regnerate-token-button",10),2&e){const n=r.$implicit;t.oxw();const a=t.MAs(1);t.Q6J("value",null==n.row||null==n.row.data?null:n.row.data.id)("grid",a)}}function J(e,r){if(1&e&&t._UZ(0,"app-grid-general-filter",11),2&e){t.oxw();const n=t.MAs(1);t.Q6J("grid",n)}}function Z(e,r){1&e&&t.GkF(0)}const w=e=>({$implicit:e});function P(e,r){if(1&e&&(t.ynx(0),t.YNc(1,Z,1,0,"ng-container",13),t.BQk()),2&e){const n=r.$implicit,a=t.oxw().$implicit,i=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",i.templateStore.getGridTemplates(a.key))("ngTemplateOutletContext",t.VKq(2,w,n))}}function R(e,r){if(1&e&&(t.ynx(0),t.YNc(1,P,2,4,"ng-container",12),t.BQk()),2&e){const n=r.$implicit;t.xp6(),t.Q6J("dxTemplateOf",n.key)}}const V=()=>({type:"default",stylingMode:"contained"}),Y=[{path:"",component:(()=>{class e{constructor(n,a,i){this.gridDataSourceService=n,this.templateStore=a,this.configStateService=i,this.columns=v,this.cRUDEndpoints=g,this.dataFieldLookupSourceMapping=S,this.dataFieldTranslationKeysMapping=h,this.relatedDataValueAndQueryStringKeyMapping=m,this.editingPropertiesForCreating=C,this.editingPropertiesForUpdating=K,this.configStateService.getOne("currentUser").tenantId&&(this.editingPropertiesForCreating.form.items[0].visible=!1,this.editingPropertiesForUpdating.form.items[0].visible=!1)}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(g,m)}onInitNewRow(n){const a=this.configStateService.getOne("currentUser");a.tenantId&&(n.data.tenantId=a.tenantId)}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(A.I),t.Y36(D.z),t.Y36(l.XJE))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-api-keys"]],viewQuery:function(a,i){if(1&a&&t.Gf(B,5),2&a){let p;t.iGM(p=t.CRH())&&(i.grid=p.first)}},decls:11,vars:14,consts:[["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","onInitNewRow"],["grid",""],[3,"cellInfo","value",4,"dxTemplate","dxTemplateOf"],[3,"value","grid",4,"dxTemplate","dxTemplateOf"],["name","addRowButton","location","before","widget","dxButton","cssClass","mb-1",3,"options"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[3,"cellInfo","value"],[3,"value","grid"],[3,"grid"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,i){1&a&&(t.TgZ(0,"dx-data-grid",0,1),t.NdJ("onInitNewRow",function(E){return i.onInitNewRow(E)}),t.YNc(2,O,1,2,"app-copy-to-clipboard",2)(3,Q,1,2,"app-regnerate-token-button",3),t.TgZ(4,"dxo-toolbar"),t._UZ(5,"dxi-item",4),t.TgZ(6,"dxi-item",5),t.YNc(7,J,1,1,"app-grid-general-filter",6),t.qZA(),t._UZ(8,"dxi-item",7),t.qZA(),t.YNc(9,R,2,1,"ng-container",8),t.ALo(10,"keyvalue"),t.qZA()),2&a&&(t.Q6J("dataFieldTranslationKeysMapping",i.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",i.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",i.dataFieldLookupSourceMapping)("editingPropertiesForCreating",i.editingPropertiesForCreating)("editingPropertiesForUpdating",i.editingPropertiesForUpdating)("columns",i.columns)("dataSource",i.gridDataSource),t.xp6(2),t.Q6J("dxTemplateOf","copy-token-value"),t.xp6(),t.Q6J("dxTemplateOf","regenerate-token-button"),t.xp6(2),t.Q6J("options",t.DdM(13,V)),t.xp6(4),t.Q6J("ngForOf",t.lcZ(10,11,i.templateStore.gridTemplates)))},dependencies:[s.sg,s.tP,k.e,y.ZT3,y.y1f,I.p6,b._,_.w,M,U,s.Nd],encapsulation:2})}return e})(),canActivate:[l.a1M,l.nG9]}];let $=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(Y),u.Bz]})}return e})();var L=o(9452);let z=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[s.ez,$,L.m]})}return e})()}}]);