"use strict";(self.webpackChunkJBNotifier=self.webpackChunkJBNotifier||[]).push([[49226],{49226:(De,_,r)=>{r.r(_),r.d(_,{CronExpressionsModule:()=>Se});var l=r(96814),T=r(23758);const N=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"job-list",template:"job-list"}]},{dataField:"cronExpression",caption:"Cron\u8868\u793a\u5f0f",dataType:"string"},{dataField:"cronDescription",caption:"Cron\u63cf\u8ff0",dataType:"string"},{dataField:"notificationCount",caption:"\u767c\u9001\u6b21\u6578",dataType:"number"}],C={index:"/api/app/cron-expressions",get:"/api/app/cron-expressions",create:"/api/app/cron-expressions",update:"/api/app/cron-expressions",delete:"/api/app/cron-expressions"},M=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"}],V=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],y=[{dataField:"cronExpression",queryStringKey:"CronExpression",mapping:["cronExpression"]},{dataField:"cronDescription",queryStringKey:"CronDescription",mapping:["cronDescription"]},{dataField:"notificationCount",queryStringKey:"NotificationCount",mapping:["notificationCount"]},{dataField:"concurrencyStamp",mapping:["apiKey","concurrencyStamp"]}],B={popup:{title:"\u65b0\u589e"},form:{colCount:2,items:[{dataField:"cronExpression",editorType:"dxTextBox",validationRules:[{type:"pattern",pattern:/^(\*|([0-9]|1[0-9]|2[0-3]))(\/\d+)?(\s+(\*|([0-9]|[1-5][0-9]))(\/\d+)?){4}$/,message:"\u683c\u5f0f\u4e0d\u6b63\u78ba!"},r(85054).L],colSpan:1},{dataField:"cronDescription",editorType:"dxTextBox",editorOptions:{disabled:!0},colSpan:1}]}},Z={popup:{title:"\u7de8\u8f2f"},form:{colCount:2,items:[{dataField:"tenantId",editorType:"dxSelectBox",colSpan:1,editorOptions:{disabled:!0}},{dataField:"startDate",editorType:"dxDateBox",colSpan:1},{dataField:"endDate",editorType:"dxDateBox",colSpan:1}]}};var K=r(10708),e=r(19212),b=r(67),F=r(72783),S=r(53009),U=r(16358),I=r(20843),d=r(2173),D=r(25012),E=r(20481),c=r(61157),u=r(88762);function O(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e.NdJ("click",function(){const s=e.CHM(i).$implicit,p=e.oxw();return e.KtG(p.removeProvider(s.id))}),e.qZA()()}if(2&t){const i=a.$implicit;e.xp6(2),e.hij(" ",i.name," ")}}let f=(()=>{class t{constructor(i){this.appRestService=i,this.notificationProviderDefinitions=[],this.notificationProviders=[]}ngOnInit(){this.fetchNotificationProviderDefinitions()}onValueChanged(i){this.selectNotificationProvidersId(i.value)}fetchNotificationProviderDefinitions(){this.appRestService.request({method:"GET",url:"/api/app/notification-infos/assignable-notification-provider-definitions"}).subscribe(i=>{this.notificationProviderDefinitions=i.items,this.initNotificationProviders()})}initNotificationProviders(){!this.cellInfo.value||!Array.isArray(this.cellInfo.value)||0===this.cellInfo.value.length||(this.notificationProviders=this.notificationProviderDefinitions.filter(i=>this.cellInfo.value.includes(i.id)))}selectNotificationProvidersId(i){this.notificationProviders=i;const n=this.notificationProviders.map(o=>o.id);this.cellInfo.setValue(n)}removeProvider(i){const n=this.notificationProviders.findIndex(o=>o.id===i);this.notificationProviders.splice(n,1)}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(S.$))};static#i=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-notification-provider-definitions"]],inputs:{cellInfo:"cellInfo"},standalone:!0,features:[e.jDz],decls:5,vars:5,consts:[["appTagBox","","displayExpr","name","validationMessageMode","always","labelMode","outside","placeholder","\u9078\u64c7...",3,"dataSource","value","activeStateEnabled","focusStateEnabled","hoverStateEnabled","onValueChanged"],[1,"notification-providers"],[1,"notification-provider"],[1,"notification-provider-name"],[1,"notification-provider-close",3,"click"],["class","notification-provider"]],template:function(n,o){1&n&&(e.TgZ(0,"div")(1,"dx-tag-box",0),e.NdJ("onValueChanged",function(p){return o.onValueChanged(p)}),e.qZA(),e.TgZ(2,"div",1),e.SjG(3,O,4,1,"div",5,e.ikw),e.qZA()()),2&n&&(e.xp6(),e.Q6J("dataSource",o.notificationProviderDefinitions)("value",o.notificationProviders)("activeStateEnabled",!1)("focusStateEnabled",!1)("hoverStateEnabled",!1),e.xp6(2),e.wJu(o.notificationProviders))},dependencies:[c._,c.U,u.vaR],styles:[".notification-providers[_ngcontent-%COMP%]{margin-top:16px;display:flex;flex-wrap:wrap;gap:16px}.notification-provider[_ngcontent-%COMP%]{border-radius:16px;padding:4px 8px;background-color:var(--blue-2);display:flex;align-items:center;gap:4px;cursor:default}.notification-provider[_ngcontent-%COMP%]:hover{box-shadow:1px 3px 3px #0000001a}.notification-provider-close[_ngcontent-%COMP%]{content:url(remove-icon.17068bf6ca3a3713.svg)}"]})}return t})();var L=r(37398),P=r(31610),G=r(24106);let m=(()=>{class t{constructor(i,n){this.restService=i,this.localizationService=n,this.isViewMode=!1,this.hideReceiverTagBox=!1,this.receiversDataSource$=null,this.currentDataField="",this.receivers=[]}ngOnChanges(i){window.component=this,!this.hideReceiverTagBox&&this.receivers.length>0&&this.cellInfo.setValue([...this.receivers])}ngOnInit(){this.currentDataField=this.cellInfo.column.dataField,this.cellInfo.column.validationRules=[{type:"custom",message:this.localizationService.instant("AbpValidation::ThisFieldIsRequired."),validationCallback:this.receiverTagBoxValidationCallback}],this.receiversDataSource$=this.restService.request({method:"GET",url:"/api/app/notification-infos/assignable-receivers"}).pipe((0,L.U)(i=>i.items))}onValueChanged(i){this.receivers=[...i.value],this.cellInfo.setValue(i.value)}receiverTagBoxValidationCallback(i){return!!(i.data.isForAllReceivers||i.data[i.column.dataField]&&0!==i.data[i.column.dataField].length)}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(u.vgb),e.Y36(u.oQ8))};static#i=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-receiver-tag-box"]],inputs:{cellInfo:"cellInfo",isViewMode:"isViewMode",hideReceiverTagBox:"hideReceiverTagBox"},standalone:!0,features:[e.TTD,e.jDz],decls:7,vars:6,consts:[[3,"hidden"],[1,"dx-field-item-label","dx-field-item-label-location-top"],[1,"dx-field-item-label-content"],[1,"dx-field-item-label-text"],["appTagBox","","receiverTagBox","","displayExpr","name","valueExpr","id","validationMessageMode","always",3,"dataSource","value","disabled","onValueChanged"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"label",1)(2,"span",2)(3,"span",3),e._uU(4," \u63a5\u6536\u8005 (\u591a\u7b46) "),e.qZA()()(),e.TgZ(5,"dx-tag-box",4),e.NdJ("onValueChanged",function(p){return o.onValueChanged(p)}),e.ALo(6,"async"),e.qZA()()),2&n&&(e.Q6J("hidden",o.hideReceiverTagBox),e.xp6(5),e.Q6J("dataSource",e.lcZ(6,4,o.receiversDataSource$))("value",o.cellInfo.value)("disabled",o.isViewMode))},dependencies:[c._,c.U,l.ez,l.Ov,P.m,G.x],styles:["dx-tag-box[apptagbox][receiverTagBox] .dx-overlay-wrapper.dx-invalid-message.dx-invalid-message-always{width:100%!important}"]})}return t})();var R=r(86359);let g=(()=>{class t{constructor(){this.isViewMode=!1,this.notificationSettingRadioGroupDataSource=[],this.notificationSettingRadioGroupValue=null}ngOnInit(){this.notificationSettingRadioGroupDataSource=[{type:"share",text:"\u5957\u7528\u5171\u7528\u8a2d\u5b9a"},{type:"custom",text:"\u53e6\u884c\u8a2d\u5b9a"}],this.notificationSettingRadioGroupValue=this.notificationSettingRadioGroupDataSource[0]}onNotificationSettingRadioGroupChanged(i){this.cellInfo.setValue("share"===i.value.type?"share":"custom")}static#e=this.\u0275fac=function(n){return new(n||t)};static#i=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-notification-setting-items-radio-group"]],inputs:{cellInfo:"cellInfo",isViewMode:"isViewMode"},standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[["displayExpr","text","layout","horizontal",3,"dataSource","value","readOnly","valueChange","onValueChanged"],["radioGroup",""]],template:function(n,o){1&n&&(e.TgZ(0,"dx-radio-group",0,1),e.NdJ("valueChange",function(p){return o.notificationSettingRadioGroupValue=p})("onValueChanged",function(p){return o.onNotificationSettingRadioGroupChanged(p)}),e.qZA()),2&n&&e.Q6J("dataSource",o.notificationSettingRadioGroupDataSource)("value",o.notificationSettingRadioGroupValue)("readOnly",o.isViewMode)},dependencies:[R._,R.I]})}return t})();var v=r(90962),x=r(98991);const $=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"delete",template:"grid-delete-button",visible:t=>t.row.data.isDeletable}]},{dataField:"id",visible:!1},{dataField:"notificationProviderDefinitionIds",caption:"\u901a\u77e5\u63d0\u4f9b\u8005id (\u591a\u7b46)",visible:!1,editCellTemplate:"notification-provider-definition"},{dataField:"receiverIds",caption:"\u63a5\u6536\u8005 (\u591a\u7b46)",dataType:"object",visible:!1,editCellTemplate:"receivers-tag-box"},{dataField:"receiverGroupIds",caption:"\u63a5\u6536\u7fa4\u7d44 (\u591a\u7b46)",dataType:"object",visible:!1,editCellTemplate:"receiver-groups-tag-box"},{dataField:"isForAllReceivers",caption:"\u662f\u5426\u50b3\u9001\u7d66\u6240\u6709\u63a5\u6536\u8005",dataType:"boolean",visible:!1},{dataField:"notificationSettingRadioGroup",caption:"\u901a\u77e5\u8a2d\u5b9a",dataType:"object",visible:!1,editCellTemplate:"notification-setting-radio-group"},{dataField:"notificationSettingItems",caption:"\u901a\u77e5\u8a2d\u5b9a\u9805\u76ee",dataType:"object",visible:!1,editCellTemplate:"notification-setting-items"},{dataField:"notificationCategoryId",caption:"\u901a\u77e5\u5206\u985eId",visible:!1},{dataField:"isFetchNotificationDataByEachReceiver",caption:"\u662f\u5426\u4f9d\u5404\u901a\u77e5\u63a5\u6536\u8005\u53d6\u5f97\u8cc7\u6599",visible:!1},{dataField:"subtitle",caption:"\u5b50\u6a19\u984c",visible:!1},{dataField:"textContent",caption:"\u6587\u5b57\u5167\u5bb9",visible:!1},{dataField:"htmlContent",caption:"HTML\u5167\u5bb9",visible:!1},{dataField:"notificationInfoId",caption:"",visible:!1},{dataField:"notificationSchedulePlanId",caption:"",visible:!1},{dataField:"tenantName",caption:"\u79df\u6236"},{dataField:"notificationInfoName",caption:"\u901a\u77e5\u540d\u7a31"},{dataField:"notificationProviderNames",caption:"\u63d0\u4f9b\u8005"},{dataField:"notificationCategoryName",caption:"\u5206\u985e"},{dataField:"title",caption:"\u6a19\u984c"},{dataField:"receiverDescription",caption:"\u63a5\u6536\u8005"},{dataField:"notificationDataFetchEndpoint",caption:"\u53d6\u5f97\u8cc7\u6599Endpoint"},{dataField:"hookEndpoint",caption:"Hook Endpoint"},{dataField:"expectedEndTime",caption:"\u9810\u8a08\u7d50\u675f\u6642\u9593"},{dataField:"expectedPushCount",caption:"\u9810\u8a08\u63a8\u9001\u6b21\u6578"},{dataField:"isFinished",caption:"\u5df2\u5b8c\u6210"},{dataField:"isDeletable",caption:"",visible:!1},{dataField:"pushCount",caption:"",visible:!1}],k={index:"/api/app/cron-expressions",get:"/api/app/cron-expressions",create:"/api/app/cron-expressions",update:"/api/app/cron-expressions",delete:"/api/app/cron-expressions"},j=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"},{dataField:"notificationCategoryId",path:"/api/app/notification-infos/assignable-notification-categories",pathForSelectedDisplay:"/api/app/notification-categories"}],q=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],J=[{dataField:"id",queryStringKey:"id",mapping:["notificationSchedulePlanId"]},{dataField:"notificationSchedulePlanId",queryStringKey:"NotificationSchedulePlanId",mapping:["notificationSchedulePlanId"]},{dataField:"tenantName",queryStringKey:"TenantName",mapping:["tenantName"]},{dataField:"notificationInfoName",queryStringKey:"NotificationInfoName",mapping:["notificationInfoName"]},{dataField:"notificationProviderNames",queryStringKey:"NotificationProviderNames",mapping:["notificationProviderNames"]},{dataField:"notificationCategoryName",queryStringKey:"NotificationCategoryName",mapping:["notificationCategoryName"]},{dataField:"title",queryStringKey:"Title",mapping:["title"]},{dataField:"receiverDescription",queryStringKey:"ReceiverDescription",mapping:["receiverDescription"]},{dataField:"notificationDataFetchEndpoint",queryStringKey:"NotificationDataFetchEndpoint",mapping:["notificationDataFetchEndpoint"]},{dataField:"hookEndpoint",queryStringKey:"HookEndpoint",mapping:["hookEndpoint"]},{dataField:"expectedEndTime",queryStringKey:"ExpectedEndTime",mapping:["expectedEndTime"]},{dataField:"expectedPushCount",queryStringKey:"ExpectedPushCount",mapping:["expectedPushCount"]},{dataField:"isFinished",queryStringKey:"IsFinished",mapping:["isFinished"]},{dataField:"isDeletable",queryStringKey:"IsDeletable",mapping:["isDeletable"]},{dataField:"pushCount",queryStringKey:"PushCount",mapping:["pushCount"]}],h=[{itemType:"group",name:"basicGroup",caption:"\u57fa\u672c",colCount:2,items:[{dataField:"notificationProviderDefinitionIds"},{itemType:"group",name:"receiverGroup",colCount:2,items:[{dataField:"isForAllReceivers",editorType:"dxCheckBox"},{itemType:"empty"},{dataField:"receiverIds",label:{visible:!1}},{dataField:"receiverGroupIds",label:{visible:!1}}]}]},{itemType:"group",name:"notificationSettingGroup",caption:"\u8a2d\u5b9a",colCount:2,items:[{dataField:"notificationSettingRadioGroup",label:{visible:!1}},{dataField:"notificationSettingItems",label:{visible:!1}}]},{itemType:"group",name:"notificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"notificationCategoryId",editorType:"dxSelectBox"},{dataField:"title",editorType:"dxTextBox"},{itemType:"group",name:"textboxGroup",items:[{dataField:"subtitle",editorType:"dxTextBox"},{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox"},{dataField:"hookEndpoint",editorType:"dxTextBox"}]},{itemType:"group",name:"textareaGroup",items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"100px"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox"}]},{dataField:"htmlContent",colSpan:2,editorType:"dxHtmlEditor",editorOptions:{imageUpload:{fileUploadMode:"both",tabs:["url","file"]},toolbar:{items:[{name:"undo"},{name:"redo"},{name:"separator"},{name:"size",acceptedValues:["8pt","10pt","12pt","14pt","18pt","24pt","36pt"]},{name:"font",acceptedValues:["Arial","Georgia","Tahoma","Times New Roman","Verdana"]},{name:"separator"},{name:"bold"},{name:"italic"},{name:"strike"},{name:"underline"},{name:"separator"},{name:"alignLeft"},{name:"alignCenter"},{name:"alignRight"},{name:"alignJustify"},{name:"separator"},{name:"orderedList"},{name:"bulletList"},{name:"separator"},{name:"header",acceptedValues:[!1,1,2,3,4,5]},{name:"separator"},{name:"color"},{name:"background"},{name:"separator"},{name:"link"},{name:"image"},{name:"separator"},{name:"clear"},{name:"codeBlock"},{name:"blockquote"},{name:"separator"},{name:"insertTable"},{name:"deleteTable"},{name:"insertRowAbove"},{name:"insertRowBelow"},{name:"deleteRow"},{name:"insertColumnLeft"},{name:"insertColumnRight"},{name:"deleteColumn"},{name:"cellProperties"},{name:"tableProperties"}]},height:"250px"}}]}],z={form:{colCount:1,items:h}},Y={form:{colCount:1,items:h}};var H=r(98179);function X(t,a){if(1&t&&e._UZ(0,"app-grid-general-filter",13),2&t){e.oxw();const i=e.MAs(3);e.Q6J("grid",i)}}function W(t,a){1&t&&e.GkF(0)}const ee=t=>({$implicit:t});function ie(t,a){if(1&t&&(e.ynx(0),e.YNc(1,W,1,0,"ng-container",14),e.BQk()),2&t){const i=a.$implicit,n=e.oxw().$implicit,o=e.oxw(2);e.xp6(),e.Q6J("ngTemplateOutlet",o.templateStore.getGridTemplates(n.key))("ngTemplateOutletContext",e.VKq(2,ee,i))}}function te(t,a){if(1&t&&(e.ynx(0),e.YNc(1,ie,2,4,"ng-container",1),e.BQk()),2&t){const i=a.$implicit;e.xp6(),e.Q6J("dxTemplateOf",i.key)}}function ne(t,a){1&t&&e._UZ(0,"app-notification-provider-definitions",15),2&t&&e.Q6J("cellInfo",a.$implicit)}function oe(t,a){if(1&t&&e._UZ(0,"app-receiver-tag-box",16),2&t){const i=a.$implicit;e.Q6J("cellInfo",i)("hideReceiverTagBox",i.row.data.isForAllReceivers)}}function ae(t,a){if(1&t&&e._UZ(0,"app-receiver-group-tree-view",17),2&t){const i=a.$implicit;e.Q6J("cellInfo",i)("hideReceiverTreeView",i.row.data.isForAllReceivers)}}function re(t,a){1&t&&e._UZ(0,"app-notification-setting-items-radio-group",15),2&t&&e.Q6J("cellInfo",a.$implicit)}function se(t,a){if(1&t&&e._UZ(0,"app-notification-setting-items",18),2&t){const i=a.$implicit;e.Q6J("isUseCustomSetting","custom"===i.row.data.notificationSettingRadioGroup)("cellInfo",i)}}function pe(t,a){1&t&&e._UZ(0,"app-notification-schedule-plans",15),2&t&&e.Q6J("cellInfo",a.$implicit)}const le=()=>({type:"default",stylingMode:"contained"});function de(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"div")(1,"div")(2,"dx-data-grid",2,3),e.NdJ("onInitNewRow",function(o){e.CHM(i);const s=e.oxw();return e.KtG(s.onInitNewRow(o))}),e.TgZ(4,"dxo-toolbar"),e._UZ(5,"dxi-item",4),e.TgZ(6,"dxi-item",5),e.YNc(7,X,1,1,"app-grid-general-filter",6),e.qZA(),e._UZ(8,"dxi-item",7),e.qZA(),e.YNc(9,te,2,1,"ng-container",8),e.ALo(10,"keyvalue"),e.YNc(11,ne,1,1,"app-notification-provider-definitions",9)(12,oe,1,2,"app-receiver-tag-box",10)(13,ae,1,2,"app-receiver-group-tree-view",11)(14,re,1,1,"app-notification-setting-items-radio-group",9)(15,se,1,2,"app-notification-setting-items",12)(16,pe,1,1,"app-notification-schedule-plans",9),e.qZA()()()}if(2&t){const i=e.oxw();e.xp6(2),e.Q6J("dataFieldTranslationKeysMapping",i.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",i.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",i.dataFieldLookupSourceMapping)("editingPropertiesForCreating",i.editingPropertiesForCreating)("editingPropertiesForUpdating",i.editingPropertiesForUpdating)("columns",i.columns)("dataSource",i.gridDataSource),e.xp6(3),e.Q6J("options",e.DdM(17,le)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(10,15,i.templateStore.gridTemplates)),e.xp6(2),e.Q6J("dxTemplateOf","notification-provider-definition"),e.xp6(),e.Q6J("dxTemplateOf","receivers-tag-box"),e.xp6(),e.Q6J("dxTemplateOf","receiver-groups-tag-box"),e.xp6(),e.Q6J("dxTemplateOf","notification-setting-radio-group"),e.xp6(),e.Q6J("dxTemplateOf","notification-setting-items"),e.xp6(),e.Q6J("dxTemplateOf","notification-schedule-plans")}}let ce=(()=>{class t{constructor(i,n){this.gridDataSourceService=i,this.templateStore=n,this.visibleChange=new e.vpe,this.columns=$,this.cRUDEndpoints=k,this.dataFieldLookupSourceMapping=j,this.dataFieldTranslationKeysMapping=q,this.relatedDataValueAndQueryStringKeyMapping=J,this.editingPropertiesForCreating=z,this.editingPropertiesForUpdating=Y,this.onHidden=()=>{this.visibleChange.emit(!1)},this.onInitNewRow=o=>{o.data.receiverGroupIds=[],o.data.receiverIds=[]}}ngOnChanges(i){this.cronExpression&&i.visible?.currentValue&&(this.gridDataSource=this.gridDataSourceService.getDataSource({index:`/api/app/cron-expressions/notifications/${this.cronExpression}`,create:`/api/app/cron-expressions/notifications/${this.cronExpression}`,delete:"/api/app/cron-expressions/notifications"},J))}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(b.I),e.Y36(F.z))};static#i=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-job-list"]],inputs:{visible:"visible",cronExpression:"cronExpression",cronDescription:"cronDescription"},outputs:{visibleChange:"visibleChange"},features:[e.TTD],decls:2,vars:4,consts:[["contentTemplate","content",3,"visible","showCloseButton","title","visibleChange","onHidden"],[4,"dxTemplate","dxTemplateOf"],["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","onInitNewRow"],["grid",""],["name","addRowButton","location","before","widget","dxButton","cssClass","mb-1",3,"options"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[3,"cellInfo",4,"dxTemplate","dxTemplateOf"],[3,"cellInfo","hideReceiverTagBox",4,"dxTemplate","dxTemplateOf"],[3,"cellInfo","hideReceiverTreeView",4,"dxTemplate","dxTemplateOf"],[3,"isUseCustomSetting","cellInfo",4,"dxTemplate","dxTemplateOf"],[3,"grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"cellInfo"],[3,"cellInfo","hideReceiverTagBox"],[3,"cellInfo","hideReceiverTreeView"],[3,"isUseCustomSetting","cellInfo"]],template:function(n,o){1&n&&(e.TgZ(0,"dx-popup",0),e.NdJ("visibleChange",function(p){return o.visible=p})("onHidden",function(){return o.onHidden()}),e.YNc(1,de,17,18,"div",1),e.qZA()),2&n&&(e.Q6J("visible",o.visible)("showCloseButton",!0)("title","\u901a\u77e5\u6e05\u55ae |"+o.cronDescription),e.xp6(),e.Q6J("dxTemplateOf","content"))},dependencies:[l.sg,l.tP,I.p6,d.ZT3,H.x,D.e,d.y1f,E._,f,m,g,v.b,x.D,l.Nd]})}return t})();const ue=["grid"];function fe(t,a){if(1&t&&e._UZ(0,"app-grid-general-filter",12),2&t){e.oxw();const i=e.MAs(1);e.Q6J("grid",i)}}function me(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"dx-button",13),e.NdJ("onClick",function(){const s=e.CHM(i).$implicit,p=e.oxw();return e.KtG(p.showJobList(s.data.cronExpression,s.data.cronDescription))}),e.qZA()}2&t&&e.Q6J("text","\u901a\u77e5\u6e05\u55ae")}function ge(t,a){1&t&&e._UZ(0,"app-notification-provider-definitions",14),2&t&&e.Q6J("cellInfo",a.$implicit)}function ve(t,a){if(1&t&&e._UZ(0,"app-receiver-tag-box",15),2&t){const i=a.$implicit,n=e.oxw();e.Q6J("cellInfo",i)("hideReceiverTagBox",n.isForAllReceivers)}}function xe(t,a){if(1&t&&e._UZ(0,"app-receiver-group-tree-view",16),2&t){const i=a.$implicit,n=e.oxw();e.Q6J("cellInfo",i)("hideReceiverTreeView",n.isForAllReceivers)}}function he(t,a){1&t&&e._UZ(0,"app-notification-setting-items-radio-group",14),2&t&&e.Q6J("cellInfo",a.$implicit)}function _e(t,a){if(1&t&&e._UZ(0,"app-notification-setting-items",17),2&t){const i=a.$implicit,n=e.oxw();e.Q6J("isUseCustomSetting",n.isUseCustomSetting)("cellInfo",i)}}function Te(t,a){1&t&&e._UZ(0,"app-notification-schedule-plans",14),2&t&&e.Q6J("cellInfo",a.$implicit)}const Ce=()=>({type:"default",stylingMode:"contained"}),ye=[{path:"",component:(()=>{class t{constructor(i,n,o){this.gridDataSourceService=i,this.templateStore=n,this.appRestService=o,this.columns=N,this.cRUDEndpoints=C,this.dataFieldLookupSourceMapping=M,this.dataFieldTranslationKeysMapping=V,this.relatedDataValueAndQueryStringKeyMapping=y,this.editingPropertiesForCreating=B,this.editingPropertiesForUpdating=Z,this.gridProperties={repaintChangesOnly:!0,editing:{allowAdding:!1}},this.jobListVisible=!1,this.showJobList=(s,p)=>{this.jobListVisible=!0,this.cronExpression=s,this.cronDescription=p},this.columns[1].setCellValue=(s,p,Je)=>{if(/^(\*|([0-9]|1[0-9]|2[0-3]))(\/\d+)?(\s+(\*|([0-9]|[1-5][0-9]))(\/\d+)?){4}$/.test(p))return(0,K.n)(this.appRestService.request({method:"GET",url:`/api/app/cron-expressions/description/${p}`})).then(Ie=>{s.cronExpression=p,s.cronDescription=Ie.description})}}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(C,y)}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(b.I),e.Y36(F.z),e.Y36(S.$))};static#i=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-cron-expressions"]],viewQuery:function(n,o){if(1&n&&e.Gf(ue,5),2&n){let s;e.iGM(s=e.CRH())&&(o.grid=s.first)}},decls:15,vars:19,consts:[["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource"],["grid",""],["name","addRowButton","location","before","widget","dxButton","cssClass","mb-1",3,"options"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],["type","default",3,"text","onClick",4,"dxTemplate","dxTemplateOf"],[3,"cellInfo",4,"dxTemplate","dxTemplateOf"],[3,"cellInfo","hideReceiverTagBox",4,"dxTemplate","dxTemplateOf"],[3,"cellInfo","hideReceiverTreeView",4,"dxTemplate","dxTemplateOf"],[3,"isUseCustomSetting","cellInfo",4,"dxTemplate","dxTemplateOf"],[3,"visible","cronExpression","cronDescription","visibleChange"],[3,"grid"],["type","default",3,"text","onClick"],[3,"cellInfo"],[3,"cellInfo","hideReceiverTagBox"],[3,"cellInfo","hideReceiverTreeView"],[3,"isUseCustomSetting","cellInfo"]],template:function(n,o){1&n&&(e.TgZ(0,"dx-data-grid",0,1)(2,"dxo-toolbar"),e._UZ(3,"dxi-item",2),e.TgZ(4,"dxi-item",3),e.YNc(5,fe,1,1,"app-grid-general-filter",4),e.qZA(),e._UZ(6,"dxi-item",5),e.qZA(),e.YNc(7,me,1,1,"dx-button",6)(8,ge,1,1,"app-notification-provider-definitions",7)(9,ve,1,2,"app-receiver-tag-box",8)(10,xe,1,2,"app-receiver-group-tree-view",9)(11,he,1,1,"app-notification-setting-items-radio-group",7)(12,_e,1,2,"app-notification-setting-items",10)(13,Te,1,1,"app-notification-schedule-plans",7),e.qZA(),e.TgZ(14,"app-job-list",11),e.NdJ("visibleChange",function(p){return o.jobListVisible=p}),e.qZA()),2&n&&(e.Q6J("dataFieldTranslationKeysMapping",o.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",o.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",o.dataFieldLookupSourceMapping)("editingPropertiesForCreating",o.editingPropertiesForCreating)("editingPropertiesForUpdating",o.editingPropertiesForUpdating)("columns",o.columns)("dataSource",o.gridDataSource),e.xp6(3),e.Q6J("options",e.DdM(18,Ce)),e.xp6(4),e.Q6J("dxTemplateOf","job-list"),e.xp6(),e.Q6J("dxTemplateOf","notification-provider-definition"),e.xp6(),e.Q6J("dxTemplateOf","receivers-tag-box"),e.xp6(),e.Q6J("dxTemplateOf","receiver-groups-tag-box"),e.xp6(),e.Q6J("dxTemplateOf","notification-setting-radio-group"),e.xp6(),e.Q6J("dxTemplateOf","notification-setting-items"),e.xp6(),e.Q6J("dxTemplateOf","notification-schedule-plans"),e.xp6(),e.Q6J("visible",o.jobListVisible)("cronExpression",o.cronExpression)("cronDescription",o.cronDescription))},dependencies:[U.K,I.p6,d.ZT3,D.e,d.y1f,E._,f,m,g,v.b,x.D,ce]})}return t})()}];let be=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#i=this.\u0275mod=e.oAB({type:t});static#t=this.\u0275inj=e.cJS({imports:[T.Bz.forChild(ye),T.Bz]})}return t})();var Fe=r(5533);let Se=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#i=this.\u0275mod=e.oAB({type:t});static#t=this.\u0275inj=e.cJS({imports:[l.ez,Fe.P,be,P.m,f,m,g,v.b,x.D]})}return t})()}}]);