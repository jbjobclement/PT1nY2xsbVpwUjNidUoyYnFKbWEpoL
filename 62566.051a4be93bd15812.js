"use strict";(self.webpackChunkJBNotifier=self.webpackChunkJBNotifier||[]).push([[62566],{62566:(j,u,o)=>{o.r(u),o.d(u,{NotificationCategoriesModule:()=>E});var p=o(96814),S=o(31610),g=o(88762),f=o(23758);const h=[{type:"buttons",fixed:!0,buttons:[{name:"save",template:"grid-save-button"},{name:"detail",template:"detail-button"},{name:"edit",template:"grid-edit-button"},{name:"delete",template:"grid-delete-button"},{name:"cancel",template:"grid-cancel-button"}]},{dataField:"id",visible:!1},{dataField:"concurrencyStamp",visible:!1},{dataField:"tenantId",caption:"",dataType:"string",visible:!1},{dataField:"parentNotificationCategoryId",caption:"",dataType:"string",visible:!1},{dataField:"name",caption:"",dataType:"string"}],m={index:"/api/app/notification-categories",get:"/api/app/notification-categories",create:"/api/app/notification-categories",update:"/api/app/notification-categories",delete:"/api/app/notification-categories"},x=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"}],C=[{dataField:"id",mapping:["id"]},{dataField:"concurrencyStamp",mapping:["concurrencyStamp"]},{dataField:"tenantId",queryStringKey:"TenantId",mapping:["tenantId"]},{name:"tenantCode",queryStringKey:"TenantId",mapping:["tenant"]},{name:"tenantName",queryStringKey:"TenantId",mapping:["tenant"]},{dataField:"parentNotificationCategoryId",queryStringKey:"ParentNotificationCategoryId",mapping:["parentNotificationCategoryId"]},{name:"parentNotificationCategoryCode",queryStringKey:"ParentNotificationCategoryId",mapping:["parentNotificationCategory"]},{name:"parentNotificationCategoryName",queryStringKey:"ParentNotificationCategoryId",mapping:["parentNotificationCategory"]},{dataField:"name",queryStringKey:"Name",mapping:["name"]}],y=[{dataField:"name",editorType:"dxTextBox",colSpan:1}],v={popup:{title:"::\u65b0\u589e"},form:{colCount:2,items:y}},F={popup:{title:"::\u7de8\u8f2f"},form:{colCount:2,items:y}},T=[{dataField:"tenantId",translateKeys:["TenantId"]},{name:"tenantCode",translateKeys:["TenantId"]},{name:"tenantName",translateKeys:["TenantId"]},{dataField:"parentNotificationCategoryId",translateKeys:["ParentNotificationCategoryId"]},{name:"parentNotificationCategoryCode",translateKeys:["ParentNotificationCategoryId"]},{name:"parentNotificationCategoryName",translateKeys:["ParentNotificationCategoryId"]},{dataField:"name",translateKeys:["Name"]}];var I=o(10708),b=o(99397),_=o(37398),t=o(19212),K=o(67),D=o(72783),M=o(20481),P=o(16358),Q=o(20843),N=o(2173),J=o(25012);const Z=["grid"];function U(e,r){if(1&e&&(t.TgZ(0,"a"),t._uU(1),t.qZA()),2&e){const i=t.oxw().$implicit;t.xp6(),t.hij(" ",i.categoryName," ")}}function k(e,r){if(1&e){const i=t.EpF();t.TgZ(0,"a",14),t.NdJ("click",function(n){t.CHM(i);const d=t.oxw().$implicit,c=t.oxw();return t.KtG(c.breadCrumbClick(n,d.categoryId))}),t._uU(1),t.qZA()}if(2&e){const i=t.oxw().$implicit;t.xp6(),t.hij(" ",i.categoryName," ")}}function A(e,r){if(1&e&&(t.TgZ(0,"li",11),t.YNc(1,U,2,1,"a",12)(2,k,2,1,"a",13),t.qZA()),2&e){const i=r.index,a=t.oxw();t.ekj("active",i===a.breadCrumbData.length-1),t.xp6(),t.Q6J("ngIf",i===a.breadCrumbData.length-1),t.xp6(),t.Q6J("ngIf",i!==a.breadCrumbData.length-1)}}function B(e,r){if(1&e){const i=t.EpF();t.TgZ(0,"dx-button",15),t.NdJ("onClick",function(){const d=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.onDetailButtonClick(d))}),t.qZA()}}function R(e,r){1&e&&t.GkF(0)}const G=e=>({$implicit:e});function w(e,r){if(1&e&&(t.ynx(0),t.YNc(1,R,1,0,"ng-container",17),t.BQk()),2&e){const i=r.$implicit,a=t.oxw().$implicit,n=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",n.templateStore.getGridTemplates(a.key))("ngTemplateOutletContext",t.VKq(2,G,i))}}function O(e,r){if(1&e&&(t.ynx(0),t.YNc(1,w,2,4,"ng-container",16),t.BQk()),2&e){const i=r.$implicit;t.xp6(),t.Q6J("dxTemplateOf",i.key)}}const Y=()=>({type:"default",stylingMode:"contained"}),$=[{path:"",component:(()=>{class e{constructor(i,a,n,d){this.gridDataSourceService=i,this.templateStore=a,this.appRestService=n,this.configStateService=d,this.columns=h,this.cRUDEndpoints=m,this.dataFieldLookupSourceMapping=x,this.dataFieldTranslationKeysMapping=T,this.relatedDataValueAndQueryStringKeyMapping=C,this.editingPropertiesForCreating=v,this.editingPropertiesForUpdating=F,this.gridProperties={filterRow:{visible:!1}},this.breadCrumbData=[],this.setGridDataSource=c=>{this.gridDataSource=this.gridDataSourceService.getDataSource(m,C,{override:{load:l=>{l.filter=this.gridDataSourceService.getFlattenedFilter(l.filter);const L=this.gridDataSourceService.getSortingString(l);return(0,I.n)(this.appRestService.request({url:m.index,method:"GET",params:{parentNotificationCategoryId:c,Sorting:L,TenantId:this.tenantId,MaxResultCount:l.take,SkipCount:l.skip}}).pipe((0,b.b)(s=>{this.parentNotificationCategoryId=s.breadcrumbs[s.breadcrumbs.length-1]?.categoryId,this.breadCrumbData=s.breadcrumbs})).pipe((0,_.U)(s=>({data:s.items.items,totalCount:s.items.totalCount}))))}}})},this.configStateService.getOne$("currentTenant").subscribe(c=>{this.tenantId=c.id})}ngOnInit(){this.setGridDataSource()}onInitNewRow(i){const a=this.configStateService.getOne("currentUser");i.data.parentNotificationCategoryId=this.parentNotificationCategoryId,i.data.tenantId=a.tenantId}onDetailButtonClick(i){this.setGridDataSource(i.data.id)}breadCrumbClick(i,a){i.preventDefault(),this.setGridDataSource(a)}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(K.I),t.Y36(D.z),t.Y36(g.vgb),t.Y36(g.XJE))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification-categories"]],viewQuery:function(a,n){if(1&a&&t.Gf(Z,5),2&a){let d;t.iGM(d=t.CRH())&&(n.grid=d.first)}},decls:14,vars:15,consts:[[1,"h-100","d-flex","flex-column"],["aria-label","breadcrumb"],[1,"breadcrumb","ps-3","p-2","mb-2"],["class","breadcrumb-item",3,"active",4,"ngFor","ngForOf"],[1,"flex-grow-1","overflow-hidden"],["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","gridProperties","onInitNewRow"],["grid",""],["icon","eyeopen","stylingMode","contained",3,"onClick",4,"dxTemplate","dxTemplateOf"],["name","addRowButton","location","before","widget","dxButton","cssClass","mb-1",3,"options"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[1,"breadcrumb-item"],[4,"ngIf"],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"],["icon","eyeopen","stylingMode","contained",3,"onClick"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div")(2,"nav",1)(3,"ol",2),t.YNc(4,A,3,4,"li",3),t.qZA()()(),t.TgZ(5,"div",4)(6,"dx-data-grid",5,6),t.NdJ("onInitNewRow",function(c){return n.onInitNewRow(c)}),t.YNc(8,B,1,0,"dx-button",7),t.TgZ(9,"dxo-toolbar"),t._UZ(10,"dxi-item",8)(11,"dxi-item",9),t.qZA(),t.YNc(12,O,2,1,"ng-container",10),t.ALo(13,"keyvalue"),t.qZA()()()),2&a&&(t.xp6(4),t.Q6J("ngForOf",n.breadCrumbData),t.xp6(2),t.Q6J("dataFieldTranslationKeysMapping",n.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",n.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",n.dataFieldLookupSourceMapping)("editingPropertiesForCreating",n.editingPropertiesForCreating)("editingPropertiesForUpdating",n.editingPropertiesForUpdating)("columns",n.columns)("dataSource",n.gridDataSource)("gridProperties",n.gridProperties),t.xp6(2),t.Q6J("dxTemplateOf","detail-button"),t.xp6(2),t.Q6J("options",t.DdM(14,Y)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(13,12,n.templateStore.gridTemplates)))},dependencies:[p.sg,p.O5,p.tP,M._,P.K,Q.p6,N.ZT3,J.e,N.y1f,p.Nd],encapsulation:2})}return e})(),canActivate:[g.a1M,g.nG9]}];let V=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[f.Bz.forChild($),f.Bz]})}return e})();var z=o(5533);let E=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[p.ez,V,S.m,z.P]})}return e})()}}]);