"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[64420],{64420:(nt,m,i)=>{i.r(m),i.d(m,{ApiKeysModule:()=>et});var s=i(96814),d=i(88762),u=i(23758),l=i(35461);const x=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"edit",template:"grid-edit-button"},{name:"delete",template:"grid-delete-button"},{name:"copy-token-value",template:"copy-token-value"},{name:"regenerate-token-button",template:"regenerate-token-button"}]},{dataField:"id",visible:!1},{dataField:"name",dataType:"string"},{dataField:"SpecifiedTenantId",caption:"\u79df\u6236",dataType:"string",visible:!1},{name:"tenantName",caption:"\u79df\u6236",dataType:"string",filterOperations:l.I.text},{name:"value",caption:"Value",allowFiltering:!1,width:200},{dataField:"startTime",caption:"\u8d77\u65e5",dataType:"date",filterOperations:l.I.date},{dataField:"endTime",caption:"\u8fc4\u65e5",dataType:"date",filterOperations:l.I.date},{name:"status",caption:"\u72c0\u614b",dataType:"string",minWidth:120,lookup:{valueExpr:"id",displayExpr:"name",allowClearing:!0,dataSource:[{id:0,name:"\u5931\u6548"},{id:1,name:"\u6709\u6548"},{id:2,name:"\u672a\u751f\u6548"}]}},{dataField:"concurrencyStamp",dataType:"string",visible:!1}],g={index:"/api/app/jbnotifier-admin/api-keys",get:"/api/app/jbnotifier-admin/api-keys",create:"/api/app/jbnotifier-admin/api-keys",update:"/api/app/jbnotifier-admin/api-keys",delete:"/api/app/jbnotifier-admin/api-keys"},h=[{dataField:"SpecifiedTenantId",path:"/api/app/jbnotifier-admin/api-keys/assignable-tenants"}],S=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],y=[{dataField:"id",mapping:["apiKey","id"]},{dataField:"name",mapping:["apiKey","name"]},{dataField:"SpecifiedTenantId",queryStringKey:"TenantId",mapping:["tenant","id"]},{name:"tenantName",queryStringKey:"TenantName",mapping:["tenant","name"]},{name:"value",mapping:["apiKey","value"]},{dataField:"startTime",queryStringKey:"StartTime",mapping:["apiKey","startTime"]},{dataField:"endTime",queryStringKey:"EndTime",mapping:["apiKey","endTime"]},{name:"status",queryStringKey:"Status",mapping:["apiKey","status"]},{dataField:"concurrencyStamp",mapping:["apiKey","concurrencyStamp"]}],C={popup:{title:"\u65b0\u589e",wrapperAttr:{class:"basic-popup"},showCloseButton:!0,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}],width:"85vw",height:"90vh"},form:{colCount:2,items:[{dataField:"SpecifiedTenantId",editorType:"dxSelectBox",colSpan:1},{dataField:"name",editorType:"dxTextBox",colSpan:1},{dataField:"startTime",editorType:"dxDateBox",colSpan:1},{dataField:"endTime",editorType:"dxDateBox",colSpan:1}],elementAttr:{class:"basic-form basic-form-edit"}}},A={popup:{title:"\u7de8\u8f2f",wrapperAttr:{class:"basic-popup"},showCloseButton:!0,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}],width:"85vw",height:"90vh"},form:{colCount:2,items:[{dataField:"SpecifiedTenantId",editorType:"dxSelectBox",colSpan:1,editorOptions:{disabled:!0}},{dataField:"name",editorType:"dxTextBox",colSpan:1},{dataField:"startTime",editorType:"dxDateBox",colSpan:1},{dataField:"endTime",editorType:"dxDateBox",colSpan:1}],elementAttr:{class:"basic-form basic-form-edit"}}};var t=i(19212),K=i(67),I=i(72783),_=i(67846),k=i(44347),M=i(65343),N=i(92931),Z=i(60237),c=i(16358),B=i(20843),f=i(2173),U=i(25012),O=i(21194),T=i(24270);let w=(()=>{class e{constructor(a){this.toastService=a,this.copyToClipboard=()=>{navigator.clipboard.writeText(this.value).then(()=>{this.toastService.info(`\u5df2\u8907\u88fdToken: ${this.value}`),console.log("Text copied to clipboard")}).catch(n=>{console.error("Error copying text: ",n)})}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-copy-to-clipboard"]],inputs:{value:"value",cellInfo:"cellInfo"},decls:1,vars:0,consts:[["stylingMode","contained","icon","copy","type","normal",3,"onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"dx-button",0),t.NdJ("onClick",function(){return o.copyToClipboard()}),t.qZA())},dependencies:[c.K],encapsulation:2})}return e})();var D=i(53009);let J=(()=>{class e{constructor(a,n){this.restService=a,this.toastService=n,this.regenerateApiKey=()=>{this.restService.request({url:`/api/app/api-keys/regenerate-token-value/${this.value}`,method:"PUT"}).subscribe(()=>{this.grid.instance.refresh(),this.toastService.info("\u5df2\u91cd\u65b0\u7522\u751fToken!")})}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(D.$),t.Y36(T.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-regnerate-token-button"]],inputs:{value:"value",grid:"grid"},decls:1,vars:0,consts:[["stylingMode","contained","icon","refresh","type","success",3,"onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"dx-button",0),t.NdJ("onClick",function(){return o.regenerateApiKey()}),t.qZA())},dependencies:[c.K],encapsulation:2})}return e})();const Q=["grid"];function P(e,r){if(1&e&&t._UZ(0,"app-copy-to-clipboard",11),2&e){const a=r.$implicit;t.Q6J("cellInfo",a)("value",null==a.row||null==a.row.data?null:a.row.data.tokenValue)}}function R(e,r){if(1&e&&t._UZ(0,"app-regnerate-token-button",12),2&e){const a=r.$implicit;t.oxw();const n=t.MAs(2);t.Q6J("value",null==a.row||null==a.row.data?null:a.row.data.id)("grid",n)}}function Y(e,r){if(1&e){const a=t.EpF();t.TgZ(0,"dx-button",13),t.NdJ("onClick",function(){t.CHM(a),t.oxw();const o=t.MAs(2);return t.KtG(o.instance.addRow())}),t.qZA()}}function V(e,r){if(1&e&&t._UZ(0,"app-grid-after-tool-bar",14),2&e){t.oxw();const a=t.MAs(2);t.Q6J("grid",a)}}function G(e,r){1&e&&t.GkF(0)}const L=e=>({$implicit:e});function E(e,r){if(1&e&&(t.ynx(0),t.YNc(1,G,1,0,"ng-container",15),t.BQk()),2&e){const a=r.$implicit,n=t.oxw().$implicit,o=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",o.templateStore.getGridTemplates(n.key))("ngTemplateOutletContext",t.VKq(2,L,a))}}function $(e,r){if(1&e&&(t.ynx(0),t.YNc(1,E,2,4,"ng-container",10),t.BQk()),2&e){const a=r.$implicit;t.xp6(),t.Q6J("dxTemplateOf",a.key)}}function j(e,r){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-bottom-toolbar-btns",14),t.qZA()),2&e){t.oxw();const a=t.MAs(2);t.xp6(),t.Q6J("grid",a)}}const z=[{path:"",component:(()=>{class e{constructor(a,n,o){this.gridDataSourceService=a,this.templateStore=n,this.configStateService=o,this.columns=x,this.cRUDEndpoints=g,this.dataFieldLookupSourceMapping=h,this.dataFieldTranslationKeysMapping=S,this.relatedDataValueAndQueryStringKeyMapping=y,this.editingPropertiesForCreating=C,this.editingPropertiesForUpdating=A,this.configStateService.getOne("currentUser").tenantId&&(this.columns[3].visible=!1,this.editingPropertiesForCreating.form.items[0].visible=!1,this.editingPropertiesForUpdating.form.items[0].visible=!1)}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(g,y)}onInitNewRow(a){const n=this.configStateService.getOne("currentUser");n.tenantId&&(a.data.tenantId=n.tenantId)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(K.I),t.Y36(I.z),t.Y36(d.XJE))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-api-keys"]],viewQuery:function(n,o){if(1&n&&t.Gf(Q,5),2&n){let p;t.iGM(p=t.CRH())&&(o.grid=p.first)}},decls:14,vars:14,consts:[["appGridFeature","","appGridFeatureNotification","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","syncLookupFilterValues","onInitNewRow"],["grid",""],[3,"cellInfo","value",4,"dxTemplate","dxTemplateOf"],[3,"value","grid",4,"dxTemplate","dxTemplateOf"],["location","before"],["appGridAddButton","",3,"onClick",4,"dxTemplate"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[4,"dxTemplate","dxTemplateOf"],[3,"cellInfo","value"],[3,"value","grid"],["appGridAddButton","",3,"onClick"],[3,"grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){1&n&&(t._UZ(0,"app-tenant-chooser"),t.TgZ(1,"dx-data-grid",0,1),t.NdJ("onInitNewRow",function(at){return o.onInitNewRow(at)}),t.YNc(3,P,1,2,"app-copy-to-clipboard",2)(4,R,1,2,"app-regnerate-token-button",3),t.TgZ(5,"dxo-toolbar")(6,"dxi-item",4),t.YNc(7,Y,1,0,"dx-button",5),t.qZA(),t.TgZ(8,"dxi-item",6),t.YNc(9,V,1,1,"app-grid-after-tool-bar",7),t.qZA(),t._UZ(10,"dxi-item",8),t.qZA(),t.YNc(11,$,2,1,"ng-container",9),t.ALo(12,"keyvalue"),t.YNc(13,j,2,1,"div",10),t.qZA()),2&n&&(t.xp6(),t.Q6J("dataFieldTranslationKeysMapping",o.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",o.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",o.dataFieldLookupSourceMapping)("editingPropertiesForCreating",o.editingPropertiesForCreating)("editingPropertiesForUpdating",o.editingPropertiesForUpdating)("columns",o.columns)("dataSource",o.gridDataSource)("syncLookupFilterValues",!1),t.xp6(2),t.Q6J("dxTemplateOf","copy-token-value"),t.xp6(),t.Q6J("dxTemplateOf","regenerate-token-button"),t.xp6(7),t.Q6J("ngForOf",t.lcZ(12,12,o.templateStore.gridTemplates)),t.xp6(2),t.Q6J("dxTemplateOf","bottom-toolbar"))},dependencies:[s.sg,s.tP,_.S,k._,M.f,N.R,Z.V,c.K,B.p6,f.ZT3,U.e,f.y1f,O.D,w,J,s.Nd],encapsulation:2})}return e})(),canActivate:[d.a1M,d.nG9]}];let X=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(z),u.Bz]})}return e})();var H=i(31610),W=i(5533),q=i(41992),tt=i(10313);let et=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[s.ez,X,H.m,W.P,q.e,tt.w]})}return e})()}}]);