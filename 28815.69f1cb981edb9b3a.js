"use strict";(self.webpackChunkJBNotifier=self.webpackChunkJBNotifier||[]).push([[28815],{28815:(L,g,r)=>{r.r(g),r.d(g,{ReceiverGroupsModule:()=>z});var c=r(96814),S=r(9452),l=r(88762),v=r(23758);const h=[{type:"buttons",fixed:!0,buttons:[{name:"save",template:"grid-save-button"},{name:"detail",template:"detail-button"},{name:"edit",template:"grid-edit-button"},{name:"delete",template:"grid-delete-button"},{name:"cancel",template:"grid-cancel-button"}]},{dataField:"id",visible:!1},{dataField:"concurrencyStamp",visible:!1},{dataField:"tenantId",caption:"",dataType:"string",visible:!1},{dataField:"parentReceiverGroupId",caption:"",dataType:"string",visible:!1},{dataField:"name",caption:"",dataType:"string"}],u={index:"/api/app/receiver-groups",get:"/api/app/receiver-groups",create:"/api/app/receiver-groups",update:"/api/app/receiver-groups",delete:"/api/app/receiver-groups"},x=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"}],F=[{dataField:"tenantId",translateKeys:["TenantId"]},{name:"tenantCode",translateKeys:["TenantId"]},{name:"tenantName",translateKeys:["TenantId"]},{dataField:"parentReceiverGroupId",translateKeys:["ParentReceiverGroupId"]},{name:"parentReceiverGroupCode",translateKeys:["ParentReceiverGroupId"]},{name:"parentReceiverGroupName",translateKeys:["ParentReceiverGroupId"]},{dataField:"name",translateKeys:["Name"]}],f=[{dataField:"id",mapping:["id"]},{dataField:"concurrencyStamp",mapping:["concurrencyStamp"]},{dataField:"tenantId",queryStringKey:"TenantId",mapping:["tenantId"]},{name:"tenantCode",queryStringKey:"TenantId",mapping:["tenant"]},{name:"tenantName",queryStringKey:"TenantId",mapping:["tenant"]},{dataField:"parentReceiverGroupId",queryStringKey:"ParentReceiverGroupId",mapping:["parentReceiverGroupId"]},{name:"parentReceiverGroupCode",queryStringKey:"ParentReceiverGroupId",mapping:["parentReceiverGroup"]},{name:"parentReceiverGroupName",queryStringKey:"ParentReceiverGroupId",mapping:["parentReceiverGroup"]},{dataField:"name",queryStringKey:"Name",mapping:["name"]}],y=[{dataField:"name",editorType:"dxTextBox",colSpan:1}],G={popup:{title:"::\u65b0\u589e"},form:{colCount:2,items:y}},R={popup:{title:"::\u7de8\u8f2f"},form:{colCount:2,items:y}};var b=r(10708),T=r(99397),I=r(37398),e=r(19212),_=r(67),K=r(72783),D=r(20515),M=r(16358),C=r(2173),N=r(69784),P=r(50469);const Q=["grid"];function J(t,o){if(1&t&&(e.TgZ(0,"a"),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(),e.hij(" ",n.groupName," ")}}function Z(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"a",13),e.NdJ("click",function(i){e.CHM(n);const p=e.oxw().$implicit,d=e.oxw();return e.KtG(d.breadCrumbClick(i,p.groupId))}),e._uU(1),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.xp6(),e.hij(" ",n.groupName," ")}}function O(t,o){if(1&t&&(e.TgZ(0,"li",10),e.YNc(1,J,2,1,"a",11)(2,Z,2,1,"a",12),e.qZA()),2&t){const n=o.index,a=e.oxw();e.ekj("active",n===a.breadCrumbData.length-1),e.xp6(),e.Q6J("ngIf",n===a.breadCrumbData.length-1),e.xp6(),e.Q6J("ngIf",n!==a.breadCrumbData.length-1)}}function U(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"dx-button",14),e.NdJ("onClick",function(){const p=e.CHM(n).$implicit,d=e.oxw();return e.KtG(d.onDetailButtonClick(p))}),e.qZA()}}function A(t,o){1&t&&e.GkF(0)}const B=t=>({$implicit:t});function k(t,o){if(1&t&&(e.ynx(0),e.YNc(1,A,1,0,"ng-container",16),e.BQk()),2&t){const n=o.$implicit,a=e.oxw().$implicit,i=e.oxw();e.xp6(),e.Q6J("ngTemplateOutlet",i.templateStore.getGridTemplates(a.key))("ngTemplateOutletContext",e.VKq(2,B,n))}}function w(t,o){if(1&t&&(e.ynx(0),e.YNc(1,k,2,4,"ng-container",15),e.BQk()),2&t){const n=o.$implicit;e.xp6(),e.Q6J("dxTemplateOf",n.key)}}const Y=()=>({type:"default",stylingMode:"contained"}),$=[{path:"",component:(()=>{class t{constructor(n,a,i,p){this.gridDataSourceService=n,this.templateStore=a,this.appRestService=i,this.configStateService=p,this.columns=h,this.cRUDEndpoints=u,this.dataFieldLookupSourceMapping=x,this.dataFieldTranslationKeysMapping=F,this.relatedDataValueAndQueryStringKeyMapping=f,this.editingPropertiesForCreating=G,this.editingPropertiesForUpdating=R,this.gridProperties={filterRow:{visible:!1}},this.breadCrumbData=[],this.setGridDataSource=d=>{this.gridDataSource=this.gridDataSourceService.getDataSource(u,f,{override:{load:m=>{m.filter=this.gridDataSourceService.getFlattenedFilter(m.filter);const E=this.gridDataSourceService.getSortingString(m);return(0,b.n)(this.appRestService.request({url:u.index,method:"GET",params:{parentReceiverGroupId:d,Sorting:E,TenantId:this.tenantId}}).pipe((0,T.b)(s=>{this.parentReceiverGroupId=s.breadcrumbs[s.breadcrumbs.length-1]?.groupId,this.breadCrumbData=s.breadcrumbs})).pipe((0,I.U)(s=>({data:s.items.items,totalCount:s.items.totalCount}))))}}})},this.configStateService.getOne$("currentTenant").subscribe(d=>{this.tenantId=d.id})}ngOnInit(){this.setGridDataSource()}onInitNewRow(n){const a=this.configStateService.getOne("currentUser");n.data.parentReceiverGroupId=this.parentReceiverGroupId,n.data.tenantId=a.tenantId}onDetailButtonClick(n){this.setGridDataSource(n.data.id)}breadCrumbClick(n,a){n.preventDefault(),this.setGridDataSource(a)}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(_.I),e.Y36(K.z),e.Y36(l.vgb),e.Y36(l.XJE))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-receiver-groups"]],viewQuery:function(a,i){if(1&a&&e.Gf(Q,5),2&a){let p;e.iGM(p=e.CRH())&&(i.grid=p.first)}},decls:12,vars:15,consts:[[1,"h-100","d-flex","flex-column"],["aria-label","breadcrumb"],[1,"breadcrumb","ps-3","p-2","mb-2"],["class","breadcrumb-item",3,"active",4,"ngFor","ngForOf"],["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","gridProperties","onInitNewRow"],["grid",""],["icon","detailslayout","stylingMode","contained",3,"onClick",4,"dxTemplate","dxTemplateOf"],["name","addRowButton","location","before","widget","dxButton","cssClass","mb-1",3,"options"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[1,"breadcrumb-item"],[4,"ngIf"],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"],["icon","detailslayout","stylingMode","contained",3,"onClick"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,i){1&a&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2),e.YNc(3,O,3,4,"li",3),e.qZA()(),e.TgZ(4,"dx-data-grid",4,5),e.NdJ("onInitNewRow",function(d){return i.onInitNewRow(d)}),e.YNc(6,U,1,0,"dx-button",6),e.TgZ(7,"dxo-toolbar"),e._UZ(8,"dxi-item",7)(9,"dxi-item",8),e.qZA(),e.YNc(10,w,2,1,"ng-container",9),e.ALo(11,"keyvalue"),e.qZA()()),2&a&&(e.xp6(3),e.Q6J("ngForOf",i.breadCrumbData),e.xp6(),e.Q6J("dataFieldTranslationKeysMapping",i.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",i.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",i.dataFieldLookupSourceMapping)("editingPropertiesForCreating",i.editingPropertiesForCreating)("editingPropertiesForUpdating",i.editingPropertiesForUpdating)("columns",i.columns)("dataSource",i.gridDataSource)("gridProperties",i.gridProperties),e.xp6(2),e.Q6J("dxTemplateOf","detail-button"),e.xp6(2),e.Q6J("options",e.DdM(14,Y)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(11,12,i.templateStore.gridTemplates)))},dependencies:[c.sg,c.O5,c.tP,D.e,C.ZT3,C.y1f,N.p6,P._,M.K,c.Nd],styles:[".breadcrumb[_ngcontent-%COMP%]{border-radius:3px;border:0}"]})}return t})(),canActivate:[l.a1M,l.nG9]}];let V=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[v.Bz.forChild($),v.Bz]})}return t})(),z=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[c.ez,V,S.m]})}return t})()}}]);