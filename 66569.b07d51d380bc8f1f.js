"use strict";(self.webpackChunkJBNotifier=self.webpackChunkJBNotifier||[]).push([[66569],{66569:(F,u,i)=>{i.r(u),i.d(u,{NotificationTemplatesModule:()=>L});var l=i(96814),d=i(66648),f=i(88762),h=i(23758),y=i(85054);const c=[{type:"buttons",fixed:!0,buttons:[{name:"edit",template:"grid-edit-button"},{name:"delete",template:"grid-delete-button"}]},{dataField:"id",visible:!1},{dataField:"concurrencyStamp",visible:!1},{dataField:"name",caption:"\u6a21\u677f\u540d\u7a31",dataType:"string",validationRules:[y.L]},{dataField:"content",caption:"\u6a21\u677f\u5167\u5bb9",dataType:"string",validationRules:[y.L]}],T={index:"/api/app/notification-templates",get:"/api/app/notification-templates",create:"/api/app/notification-templates",update:"/api/app/notification-templates",delete:"/api/app/notification-templates"},a=[],o=[{dataField:"id",mapping:["id"]},{dataField:"concurrencyStamp",mapping:["concurrencyStamp"]},{dataField:"name",mapping:["name"]},{dataField:"content",mapping:["content"]}],p=[{dataField:"name",editorType:"dxTextBox"},{dataField:"content",editorType:"dxTextArea"}],m={popup:{title:"::\u65b0\u589e",wrapperAttr:{class:"basic-popup"}},form:{colCount:1,items:p,elementAttr:{class:"basic-form basic-form-edit"}}},C={popup:{title:"::\u7de8\u8f2f",wrapperAttr:{class:"basic-popup"}},form:{colCount:1,items:p,elementAttr:{class:"basic-form basic-form-edit"}}};var t=i(19212),R=i(67),S=i(72783),w=i(20843),x=i(2173),P=i(25012),D=i(20481),M=i(65343),E=i(49291);const _=["grid"];function A(e,g){if(1&e&&t._UZ(0,"app-grid-after-tool-bar",8),2&e){t.oxw();const r=t.MAs(1);t.Q6J("grid",r)}}function N(e,g){if(1&e&&t._UZ(0,"app-grid-popup-bottom-toolbar",8),2&e){t.oxw();const r=t.MAs(1);t.Q6J("grid",r)}}function b(e,g){1&e&&t.GkF(0)}const O=e=>({$implicit:e});function Q(e,g){if(1&e&&(t.ynx(0),t.YNc(1,b,1,0,"ng-container",10),t.BQk()),2&e){const r=g.$implicit,n=t.oxw().$implicit,s=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",s.templateStore.getGridTemplates(n.key))("ngTemplateOutletContext",t.VKq(2,O,r))}}function U(e,g){if(1&e&&(t.ynx(0),t.YNc(1,Q,2,4,"ng-container",9),t.BQk()),2&e){const r=g.$implicit;t.xp6(),t.Q6J("dxTemplateOf",r.key)}}const B=()=>({type:"default",stylingMode:"contained"}),K=[{path:"",component:(()=>{class e{constructor(r,n){this.gridDataSourceService=r,this.templateStore=n,this.columns=c,this.cRUDEndpoints=T,this.dataFieldLookupSourceMapping=a,this.relatedDataValueAndQueryStringKeyMapping=o,this.editingPropertiesForCreating=m,this.editingPropertiesForUpdating=C}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(T,o)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(R.I),t.Y36(S.z))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification-templates"]],viewQuery:function(n,s){if(1&n&&t.Gf(_,5),2&n){let v;t.iGM(v=t.CRH())&&(s.grid=v.first)}},decls:10,vars:12,consts:[["appGridFeature","","appGridFeatureNotification","",3,"datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource"],["grid",""],["name","addRowButton","location","before","widget","dxButton","cssClass","mb-1",3,"options"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[3,"grid",4,"dxTemplate","dxTemplateOf"],[4,"ngFor","ngForOf"],[3,"grid"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,s){1&n&&(t.TgZ(0,"dx-data-grid",0,1)(2,"dxo-toolbar"),t._UZ(3,"dxi-item",2),t.TgZ(4,"dxi-item",3),t.YNc(5,A,1,1,"app-grid-after-tool-bar",4),t.qZA(),t._UZ(6,"dxi-item",5),t.qZA(),t.YNc(7,N,1,1,"app-grid-popup-bottom-toolbar",6)(8,U,2,1,"ng-container",7),t.ALo(9,"keyvalue"),t.qZA()),2&n&&(t.Q6J("datafieldValueQueryStringKeyMapping",s.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",s.dataFieldLookupSourceMapping)("editingPropertiesForCreating",s.editingPropertiesForCreating)("editingPropertiesForUpdating",s.editingPropertiesForUpdating)("columns",s.columns)("dataSource",s.gridDataSource),t.xp6(3),t.Q6J("options",t.DdM(11,B)),t.xp6(4),t.Q6J("dxTemplateOf","bottom-toolbar"),t.xp6(),t.Q6J("ngForOf",t.lcZ(9,9,s.templateStore.gridTemplates)))},dependencies:[l.sg,l.tP,w.p6,x.ZT3,P.e,x.y1f,D._,M.f,E.V,l.Nd],encapsulation:2})}return e})(),canActivate:[f.a1M,f.nG9]}];let G=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(K),h.Bz]})}return e})();var J=i(5533);let L=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[l.ez,J.P,l.ez,G,d.m]})}return e})()},65343:(F,u,i)=>{i.d(u,{f:()=>y});var l=i(14891),d=i(19212),f=i(25012),h=i(72783);let y=(()=>{class c{constructor(a,o,p){this.grid=a,this.viewContainerRef=o,this.templateStore=p,this.masterDetailRowCollapseKey="",this.editorPreparing=m=>{this.applyFilterRow(m)},this.rowExpanded=m=>{this.applyMasterDetailRowCollapse(m)}}ngOnInit(){this.basicFilterRowTemplate=this.templateStore.getGridTemplates("basicFilterRowTemplate")}ngAfterViewInit(){this.applyDataGridProperties(),this.grid.instance.on("editorPreparing",this.editorPreparing),this.grid.instance.on("rowExpanded",this.rowExpanded)}applyDataGridProperties(){const a=this.grid.instance.option("columns").map(o=>("string"!=typeof o&&!o.type&&!1!==o.visible&&(o.minWidth=132),o));a.push({type:"detailExpand",fixed:!0,fixedPosition:"right"}),this.grid.instance.option({masterDetail:{enabled:!0,template:"basic-master-detail-row-template"},elementAttr:{class:"basic-data-grid-table"},showColumnHeaders:!1,filterRow:{showOperationChooser:!1},columns:a}),this.gridProperties&&this.grid.instance.option(this.gridProperties)}applyFilterRow(a){if("filterRow"!==a.parentType)return;a.cancel=!0;const o=this.viewContainerRef.createEmbeddedView(this.basicFilterRowTemplate,{options:a,grid:this.grid});o.rootNodes.forEach(p=>{a.editorElement.appendChild(p)}),(0,l.J_)(a.editorElement,"dxremove",()=>{o.destroy()})}applyMasterDetailRowCollapse(a){setTimeout(()=>{const p=a.element.querySelector('[aria-label="Collapse"]').parentElement.ariaRowIndex;a.element.querySelector(`tr.dx-row.dx-data-row.dx-row-lines[aria-rowindex="${p}"]`).classList.add("master-detail-row-collapse")}),a.key!==this.masterDetailRowCollapseKey&&(a.component.collapseRow(this.masterDetailRowCollapseKey),this.masterDetailRowCollapseKey=a.key)}static#t=this.\u0275fac=function(o){return new(o||c)(d.Y36(f.e),d.Y36(d.s_b),d.Y36(h.z))};static#e=this.\u0275dir=d.lG2({type:c,selectors:[["","appGridFeatureNotification",""]],inputs:{gridProperties:"gridProperties"},standalone:!0})}return c})()}}]);