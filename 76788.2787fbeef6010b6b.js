"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[76788],{5138:(tt,u,o)=>{o.r(u),o.d(u,{CronExpressionsModule:()=>q});var p=o(96814),c=o(23758),g=o(35461);const y=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"job-list",template:"job-list"}]},{dataField:"id",caption:"Cron\u8868\u793a\u5f0f",validationRules:[{type:"pattern",pattern:/^(\*|([0-9]|1[0-9]|2[0-3]))(\/\d+)?(\s+(\*|([0-9]|[1-5][0-9]))(\/\d+)?){4}$/,message:"\u683c\u5f0f\u4e0d\u6b63\u78ba!"},o(85054).L],filterOperations:g.I$.text},{dataField:"notificationSchedulePlanId",visible:!1},{dataField:"description",caption:"Cron\u63cf\u8ff0",dataType:"string",filterOperations:g.I$.text},{dataField:"notificationCount",caption:"\u901a\u77e5\u6578\u91cf",dataType:"number",alignment:"left",allowFiltering:!1,allowSorting:!1}],x={index:"/api/app/jbnotifier-admin/cron-expressions",get:"/api/app/jbnotifier-admin/cron-expressions",create:"/api/app/jbnotifier-admin/cron-expressions",update:"/api/app/jbnotifier-admin/cron-expressions",delete:"/api/app/jbnotifier-admin/cron-expressions"},F=[{dataField:"tenantId",path:"/api/identity/customize-users/assignable-tenants",pathForSelectedDisplay:"/api/saas/customize-tenants"}],v=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],f=[{dataField:"id",queryStringKey:"Id",mapping:["cronExpression","id"]},{dataField:"description",queryStringKey:"Description",mapping:["cronExpression","description"]},{dataField:"notificationCount",queryStringKey:"NotificationCount",mapping:["notificationCount"]},{dataField:"concurrencyStamp",mapping:["apiKey","concurrencyStamp"]}],C=[{dataField:"id",editorType:"dxTextBox"},{dataField:"description",editorType:"dxTextBox",cssClass:"cron-description",editorOptions:{disabled:!0}}],S={popup:{title:"JbNotifier::Permission:CronExpressions",wrapperAttr:{class:"basic-popup"},width:500,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}]},form:{colCount:1,items:C,elementAttr:{class:"custom-form custom-form--edit"}}},T={popup:{title:"JbNotifier::Permission:CronExpressions",wrapperAttr:{class:"basic-popup"},width:500,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}]},form:{colCount:1,items:C,elementAttr:{class:"custom-form custom-form--edit"}}};var E=o(10708),t=o(19212),A=o(67),M=o(72783),D=o(53009),K=o(59444),P=o(16358),J=o(20843),Q=o(25012),O=o(13443),j=o(65343),L=o(27310),N=o(92931),I=o(25659),U=o(21194),b=o(12305);const $=["grid"];function B(e,s){1&e&&t.GkF(0)}const V=e=>({$implicit:e});function Z(e,s){if(1&e&&(t.ynx(0),t.YNc(1,B,1,0,"ng-container",8),t.BQk()),2&e){const r=s.$implicit,i=t.oxw().$implicit,n=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",n.templateStore.getGridTemplates(i.key))("ngTemplateOutletContext",t.VKq(2,V,r))}}function R(e,s){if(1&e&&(t.ynx(0),t.YNc(1,Z,2,4,"ng-container",7),t.BQk()),2&e){const r=s.$implicit;t.xp6(),t.Q6J("dxTemplateOf",r.key)}}function Y(e,s){if(1&e&&t._UZ(0,"app-bottom-toolbar-btns",1),2&e){t.oxw();const r=t.MAs(4);t.Q6J("grid",r)}}const G=()=>({class:"custom-button custom-button--blue job-list"});function z(e,s){if(1&e){const r=t.EpF();t.TgZ(0,"dx-button",9),t.NdJ("onClick",function(){const a=t.CHM(r).$implicit,l=t.oxw();return t.KtG(l.showJobList(a.data.id,a.data.description))}),t.qZA()}2&e&&t.Q6J("elementAttr",t.DdM(1,G))}const H=[{path:"",component:(()=>{class e{constructor(r,i,n,a,l){this.gridDataSourceService=r,this.templateStore=i,this.appRestService=n,this.tenantChooserService=a,this.router=l,this.columns=y,this.cRUDEndpoints=x,this.dataFieldLookupSourceMapping=F,this.dataFieldTranslationKeysMapping=v,this.relatedDataValueAndQueryStringKeyMapping=f,this.editingPropertiesForCreating=S,this.editingPropertiesForUpdating=T,this.gridProperties={},this.jobListVisible=!1,this.showJobList=d=>{this.jobListVisible=!0,this.cronExpression=d,this.router.navigate(["./cron-expressions",d])},this.columns[1].setCellValue=(d,m,ot)=>{if(/^(\*|([0-9]|1[0-9]|2[0-3]))(\/\d+)?(\s+(\*|([0-9]|[1-5][0-9]))(\/\d+)?){4}$/.test(m))return(0,E.n)(this.appRestService.request({method:"GET",url:`/api/app/jbnotifier-admin/cron-expressions/description/${m}`})).then(_=>{d.id=m,d.description=_.description})},this.gridDataSource=this.gridDataSourceService.getDataSource(x,f),this.tenantChooserService.tenantId$.subscribe(d=>{this.grid?.instance.refresh()})}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(A.I),t.Y36(M.z),t.Y36(D.$),t.Y36(K.L),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cron-expressions"]],viewQuery:function(i,n){if(1&i&&t.Gf($,5),2&i){let a;t.iGM(a=t.CRH())&&(n.grid=a.first)}},decls:10,vars:15,consts:[[1,"custom-grid-container"],[3,"grid"],["appGridFeature","","appGridFeatureNotification","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","gridProperties"],["grid",""],[4,"ngFor","ngForOf"],[3,"grid",4,"dxTemplate","dxTemplateOf"],["appCustomButton","","text","\u901a\u77e5\u6e05\u55ae",3,"elementAttr","onClick",4,"dxTemplate","dxTemplateOf"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["appCustomButton","","text","\u901a\u77e5\u6e05\u55ae",3,"elementAttr","onClick"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-tenant-chooser")(2,"app-grid-tool-bar",1),t.TgZ(3,"dx-data-grid",2,3),t.YNc(5,R,2,1,"ng-container",4),t.ALo(6,"keyvalue"),t.YNc(7,Y,1,1,"app-bottom-toolbar-btns",5)(8,z,1,2,"dx-button",6),t.qZA(),t._UZ(9,"app-notification-pager",1),t.qZA()),2&i){const a=t.MAs(4);t.xp6(2),t.Q6J("grid",a),t.xp6(),t.Q6J("dataFieldTranslationKeysMapping",n.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",n.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",n.dataFieldLookupSourceMapping)("editingPropertiesForCreating",n.editingPropertiesForCreating)("editingPropertiesForUpdating",n.editingPropertiesForUpdating)("columns",n.columns)("dataSource",n.gridDataSource)("gridProperties",n.gridProperties),t.xp6(2),t.Q6J("ngForOf",t.lcZ(6,13,n.templateStore.gridTemplates)),t.xp6(2),t.Q6J("dxTemplateOf","bottom-toolbar"),t.xp6(),t.Q6J("dxTemplateOf","job-list"),t.xp6(),t.Q6J("grid",a)}},dependencies:[p.sg,p.tP,P.K,J.p6,Q.e,O._,j.f,L.A,N.R,I.l,U.D,b.D,p.Nd],styles:[".job-list[_ngcontent-%COMP%]{padding:10px 8px;border-radius:6px}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description{padding:4px 8px}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-field-item-label-text{color:var(--gray-1)}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-state-disabled.dx-widget{opacity:1}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-state-disabled.dx-widget .dx-texteditor-container{border:0}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-state-disabled.dx-widget .dx-texteditor-container .dx-texteditor-input-container{padding:0}  .custom-form.custom-form--edit .dx-item.dx-box-item .cron-description .dx-state-disabled.dx-widget .dx-texteditor-container .dx-texteditor-input-container .dx-texteditor-input{color:var(--yellow-1);font-size:14px}"]})}return e})()},{path:":cronExpression",loadChildren:()=>Promise.all([o.e(68592),o.e(87845)]).then(o.bind(o,87845)).then(e=>e.CronExpressionsJobListModule)}];let X=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(H),c.Bz]})}return e})();var W=o(5533),w=o(31610),k=o(41992);let q=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[p.ez,W.P,X,w.m,k.e,b.D]})}return e})()}}]);