"use strict";(self.webpackChunkJBNotifier=self.webpackChunkJBNotifier||[]).push([[1084],{1084:(Y,u,i)=>{i.r(u),i.d(u,{AllPushLogsModule:()=>V});var d=i(96814),g=i(23758);const m={index:"/api/app/all-notification-push-logs"},F=[{dataField:"notificationCategoryId",path:"/api/app/notification-infos/assignable-notification-categories",pathForSelectedDisplay:"/api/app/notification-categories"}],x=[],h=[{dataField:"id",mapping:["notificationPushLogId"]},{dataField:"notificationPushLogId",mapping:["notificationPushLogId"]},{dataField:"notificationSchedulePlanName",mapping:["notificationSchedulePlanName"]},{dataField:"pushTime",mapping:["pushTime"]},{dataField:"receiverName",queryStringKey:"ReceiverName",mapping:["notificationInfoId"]},{dataField:"title",queryStringKey:"Title",mapping:["title"]},{dataField:"subtitle",queryStringKey:"Subtitle",mapping:["subtitle"]},{dataField:"shortTextContent",queryStringKey:"ShortTextContent",mapping:["shortTextContent"]},{dataField:"shortHtmlContent",queryStringKey:"shortHtmlContent",mapping:["shortHtmlContent"]},{dataField:"isModifiedWhenPending",queryStringKey:"IsModifiedWhenPending",mapping:["isModifiedWhenPending"]},{dataField:"isSuccess",queryStringKey:"IsSuccess",mapping:["isSuccess"]},{dataField:"shortResultMessages",queryStringKey:"ShortResultMessages",mapping:["shortResultMessages"]},{dataField:"isReceiverRead",queryStringKey:"IsReceiverRead",mapping:["isReceiverRead"]},{dataField:"isRePushable",queryStringKey:"IsRePushable",mapping:["isRePushable"]}],f={imageUpload:{fileUploadMode:"both",tabs:["url","file"]},toolbar:{items:[{name:"undo"},{name:"redo"},{name:"separator"},{name:"size",acceptedValues:["8pt","10pt","12pt","14pt","18pt","24pt","36pt"]},{name:"font",acceptedValues:["Arial","Georgia","Tahoma","Times New Roman","Verdana"]},{name:"separator"},{name:"bold"},{name:"italic"},{name:"strike"},{name:"underline"},{name:"separator"},{name:"alignLeft"},{name:"alignCenter"},{name:"alignRight"},{name:"alignJustify"},{name:"separator"},{name:"orderedList"},{name:"bulletList"},{name:"separator"},{name:"header",acceptedValues:[!1,1,2,3,4,5]},{name:"separator"},{name:"color"},{name:"background"},{name:"separator"},{name:"link"},{name:"image"},{name:"separator"},{name:"clear"},{name:"codeBlock"},{name:"blockquote"},{name:"separator"},{name:"insertTable"},{name:"deleteTable"},{name:"insertRowAbove"},{name:"insertRowBelow"},{name:"deleteRow"},{name:"insertColumnLeft"},{name:"insertColumnRight"},{name:"deleteColumn"},{name:"cellProperties"},{name:"tableProperties"}]}},y=[{itemType:"group",name:"basicGroup",caption:"\u57fa\u672c",colCount:2,items:[{dataField:"notificationProviderDefinitionIds"},{itemType:"group",name:"receiverGroup",colCount:2,items:[{dataField:"isForAllReceivers",editorType:"dxCheckBox"},{itemType:"empty"},{dataField:"receiverIds",label:{visible:!1}},{dataField:"receiverGroupIds",label:{visible:!1}}]}]},{itemType:"group",name:"notificationSettingGroup",caption:"\u8a2d\u5b9a",colCount:2,items:[{dataField:"notificationSettingRadioGroup",label:{visible:!1}},{dataField:"notificationSettingItems",label:{visible:!1}}]},{itemType:"group",name:"notificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"notificationCategoryId",editorType:"dxSelectBox"},{dataField:"title",editorType:"dxTextBox"},{itemType:"group",name:"textboxGroup",items:[{dataField:"subtitle",editorType:"dxTextBox"},{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox"},{dataField:"hookEndpoint",editorType:"dxTextBox"}]},{itemType:"group",name:"textareaGroup",items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"100px"}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox"}]},{dataField:"htmlContent",colSpan:2,editorType:"dxHtmlEditor",editorOptions:{...f,height:"250px"}}]}],C=[{itemType:"group",name:"basicGroup",caption:"\u57fa\u672c",colCount:2,items:[{dataField:"notificationProviderDefinitionIds"},{itemType:"group",name:"receiverGroup",colCount:2,items:[{dataField:"isForAllReceivers",editorType:"dxCheckBox",editorOptions:{disabled:!0}},{itemType:"empty"},{dataField:"receiverIds",label:{visible:!1}},{dataField:"receiverGroupIds",label:{visible:!1}}]}]},{itemType:"group",name:"notificationSettingGroup",caption:"\u8a2d\u5b9a",colCount:2,items:[{dataField:"notificationSettingRadioGroup",label:{visible:!1}},{dataField:"notificationSettingItems",label:{visible:!1}}]},{itemType:"group",name:"notificationContentGroup",caption:"\u901a\u77e5\u5167\u5bb9",colCount:2,items:[{dataField:"notificationCategoryId",editorType:"dxSelectBox",editorOptions:{disabled:!0}},{dataField:"title",editorType:"dxTextBox",editorOptions:{disabled:!0}},{itemType:"group",name:"textboxGroup",items:[{dataField:"subtitle",editorType:"dxTextBox",editorOptions:{disabled:!0}},{dataField:"notificationDataFetchEndpoint",editorType:"dxTextBox",editorOptions:{disabled:!0}},{dataField:"hookEndpoint",editorType:"dxTextBox",editorOptions:{disabled:!0}}]},{itemType:"group",name:"textareaGroup",items:[{dataField:"textContent",editorType:"dxTextArea",editorOptions:{height:"100px",disabled:!0}},{dataField:"isFetchNotificationDataByEachReceiver",editorType:"dxCheckBox",editorOptions:{disabled:!0}}]},{dataField:"htmlContent",colSpan:2,editorType:"dxHtmlEditor",editorOptions:{...f,height:"250px",disabled:!0}}]}],v={form:{colCount:1,items:y}},S={form:{colCount:1,items:C},popup:{wrapperAttr:{class:"instant-notification-infos-view"},toolbarItems:[]}},b=[{type:"buttons",fixed:!0,buttons:[{name:"repush",template:"repush",visible:t=>t.row.data.isRePushable}]},{dataField:"id",visible:!1},{dataField:"concurrencyStamp",visible:!1},{dataField:"notificationPushLogId",visible:!1},{dataField:"notificationSchedulePlanName",caption:"\u6642\u9593\u8a08\u756b\u540d\u7a31",dataType:"string"},{dataField:"pushTime",caption:"\u63a8\u9001\u6642\u9593",dataType:"string"},{dataField:"receiverName",caption:"\u63a5\u6536\u8005\u540d\u7a31",dataType:"string"},{dataField:"title",caption:"\u6a19\u984c",dataType:"string"},{dataField:"subtitle",caption:"\u5b50\u6a19\u984c",dataType:"string"},{dataField:"shortTextContent",caption:"\u7d14\u6587\u5b57\u5167\u5bb9",dataType:"string"},{dataField:"shortHtmlContent",caption:"Html\u5167\u5bb9",dataType:"string"},{dataField:"isModifiedWhenPending",caption:"\u7b49\u5019\u5340\u7570\u52d5",dataType:"boolean"},{dataField:"isSuccess",caption:"\u6210\u529f",dataType:"boolean"},{dataField:"shortResultMessages",caption:"\u8a73\u7d30\u8a0a\u606f",dataType:"string"},{dataField:"isReceiverRead",caption:"\u63a5\u6536\u8005\u5df2\u8b80",dataType:"string"},{dataField:"isRePushable",caption:"\u6210\u529f\u6b21\u6578",dataType:"boolean"}];var e=i(19212),P=i(53009),R=i(67),L=i(72783),A=i(88762),I=i(24270),M=i(43821),B=i(10313),K=i(64133),N=i(20843),T=i(2173),O=i(25012);function G(t,s){if(1&t&&e._UZ(0,"app-grid-general-filter",8),2&t){e.oxw();const o=e.MAs(1);e.Q6J("grid",o)}}function D(t,s){1&t&&e.GkF(0)}const U=t=>({$implicit:t});function J(t,s){if(1&t&&(e.ynx(0),e.YNc(1,D,1,0,"ng-container",10),e.BQk()),2&t){const o=s.$implicit,n=e.oxw().$implicit,a=e.oxw();e.xp6(),e.Q6J("ngTemplateOutlet",a.templateStore.getGridTemplates(n.key))("ngTemplateOutletContext",e.VKq(2,U,o))}}function k(t,s){if(1&t&&(e.ynx(0),e.YNc(1,J,2,4,"ng-container",9),e.BQk()),2&t){const o=s.$implicit;e.xp6(),e.Q6J("dxTemplateOf",o.key)}}function Q(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"app-repush-button",11),e.NdJ("buttonClick",function(){const l=e.CHM(o).$implicit,r=e.oxw();return e.KtG(r.singleRepush(l.data.notificationPushLogId))}),e.qZA()}}const Z=[{path:"",component:(()=>{class t{constructor(o,n,a,l,r){this.appRestService=o,this.gridDataSourceService=n,this.templateStore=a,this.configStateService=l,this.toastService=r,this.columns=b,this.cRUDEndpoints=m,this.dataFieldLookupSourceMapping=F,this.dataFieldTranslationKeysMapping=x,this.relatedDataValueAndQueryStringKeyMapping=h,this.editingPropertiesForCreating=v,this.editingPropertiesForUpdating=S,this.selectedNotificationPushLogs=[],this.gridProperties={editing:{allowAdding:!1},selection:{mode:"multiple",allowSelectAll:!0,selectAllMode:"page"}},this.repushButtonProperties={type:"default",stylingMode:"contained",text:"\u518d\u6b21\u767c\u9001(\u591a\u7b46)",onClick:()=>{const p=this.selectedNotificationPushLogs.map(c=>c.notificationPushLogId);this.repush(p)}},this.repush=p=>{const c=this.configStateService.getOne("currentUser");this.appRestService.request({method:"POST",url:"/api/app/all-notification-push-logs/repush-by-notification-push-log-ids",body:{tenantId:c.tenantId,notificationPushLogIds:p}}).subscribe(()=>{this.toastService.success("\u64cd\u4f5c\u6210\u529f!\uff0c\u56e0\u767c\u9001\u9700\u8981\u6642\u9593\uff0c\u6210\u529f\u6b21\u6578\u4e0d\u6703\u99ac\u4e0a\u767c\u751f\u8b8a\u5316\u3002")})}}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(m,h)}singleRepush(o){this.repush([o])}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(P.$),e.Y36(R.I),e.Y36(L.z),e.Y36(A.XJE),e.Y36(I.P))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-all-push-logs"]],decls:10,vars:14,consts:[["appGridFeature","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","gridProperties","selectedRowKeys","selectedRowKeysChange"],["grid",""],["location","before","widget","dxButton","cssClass","mb-1",3,"options"],["location","after"],[3,"grid",4,"dxTemplate"],["name","applyFilterButton","cssClass","d-none"],[4,"ngFor","ngForOf"],[3,"buttonClick",4,"dxTemplate","dxTemplateOf"],[3,"grid"],[4,"dxTemplate","dxTemplateOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"buttonClick"]],template:function(n,a){1&n&&(e.TgZ(0,"dx-data-grid",0,1),e.NdJ("selectedRowKeysChange",function(r){return a.selectedNotificationPushLogs=r}),e.TgZ(2,"dxo-toolbar"),e._UZ(3,"dxi-item",2),e.TgZ(4,"dxi-item",3),e.YNc(5,G,1,1,"app-grid-general-filter",4),e.qZA(),e._UZ(6,"dxi-item",5),e.qZA(),e.YNc(7,k,2,1,"ng-container",6),e.ALo(8,"keyvalue"),e.YNc(9,Q,1,0,"app-repush-button",7),e.qZA()),2&n&&(e.Q6J("dataFieldTranslationKeysMapping",a.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",a.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",a.dataFieldLookupSourceMapping)("editingPropertiesForCreating",a.editingPropertiesForCreating)("editingPropertiesForUpdating",a.editingPropertiesForUpdating)("columns",a.columns)("dataSource",a.gridDataSource)("gridProperties",a.gridProperties)("selectedRowKeys",a.selectedNotificationPushLogs),e.xp6(3),e.Q6J("options",a.repushButtonProperties),e.xp6(4),e.Q6J("ngForOf",e.lcZ(8,12,a.templateStore.gridTemplates)),e.xp6(2),e.Q6J("dxTemplateOf","repush"))},dependencies:[d.sg,d.tP,M._,B.w,K.f,N.p6,T.ZT3,O.e,T.y1f,d.Nd]})}return t})()}];let E=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(Z),g.Bz]})}return t})();var _=i(66648),w=i(77490);let V=(()=>{class t{static#e=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({imports:[d.ez,_.m,w.P,E]})}return t})()}}]);