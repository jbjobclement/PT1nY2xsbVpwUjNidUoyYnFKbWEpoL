"use strict";(self.webpackChunkJbNotifier=self.webpackChunkJbNotifier||[]).push([[64420],{64420:(q,d,i)=>{i.r(d),i.d(d,{ApiKeysModule:()=>_});var s=i(96814),c=i(88762),m=i(23758),l=i(35461);const v=[{type:"buttons",fixed:!0,caption:"\u64cd\u4f5c",buttons:[{name:"edit",template:"grid-edit-button"},{name:"delete",template:"grid-delete-button"},{name:"copy-token-value",template:"copy-token-value"},{name:"regenerate-token-button",template:"regenerate-token-button"}]},{dataField:"id",visible:!1},{dataField:"name",dataType:"string"},{name:"tenantName",caption:"\u79df\u6236",dataType:"string",filterOperations:l.I$.text},{name:"value",caption:"Value",dataType:"string",filterOperations:l.I$.text,width:200},{dataField:"startTime",caption:"\u8d77\u6642",dataType:"datetime",filterOperations:l.I$.date},{dataField:"endTime",caption:"\u8fc4\u6642",dataType:"datetime",filterOperations:l.I$.date},{name:"status",caption:"\u72c0\u614b",dataType:"string",minWidth:120,allowFiltering:!1},{dataField:"concurrencyStamp",dataType:"string",visible:!1}],u={index:"/api/app/jbnotifier-admin/api-keys",get:"/api/app/jbnotifier-admin/api-keys",create:"/api/app/jbnotifier-admin/api-keys",update:"/api/app/jbnotifier-admin/api-keys",delete:"/api/app/jbnotifier-admin/api-keys"},h=[{dataField:"tenantId",path:"/api/app/jbnotifier-admin/customized-users/tenant-lookup"}],F=[{name:"tenantName",translateKeys:["Saas::DisplayName:TenantName"]},{dataField:"startDate",translateKeys:["AbpAuditLogging::StartDate"]},{dataField:"endDate",translateKeys:["AbpAuditLogging::EndDate"]},{name:"status",translateKeys:["AbpAccount::Status"]}],g=[{dataField:"id",mapping:["apiKey","id"]},{dataField:"name",mapping:["apiKey","name"]},{dataField:"SpecifiedTenantId",queryStringKey:"TenantId",mapping:["tenant","id"]},{name:"tenantName",queryStringKey:"TenantName",mapping:["tenant","name"]},{name:"value",queryStringKey:"Value",mapping:["apiKey","value"]},{dataField:"startTime",queryStringKey:"StartTime",mapping:["apiKey","startTime"]},{dataField:"endTime",queryStringKey:"EndTime",mapping:["apiKey","endTime"]},{name:"status",queryStringKey:"Status",mapping:["apiKey","status"]},{dataField:"concurrencyStamp",mapping:["apiKey","concurrencyStamp"]}],C={popup:{title:"\u65b0\u589e",wrapperAttr:{class:"basic-popup"},showCloseButton:!0,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}],width:"85vw",height:"90vh"},form:{colCount:2,items:[{dataField:"name",editorType:"dxTextBox",colSpan:1},{dataField:"startTime",editorType:"dxDateBox",colSpan:1},{dataField:"endTime",editorType:"dxDateBox",colSpan:1}],elementAttr:{class:"custom-form custom-form--edit"}}},b={popup:{title:"\u7de8\u8f2f",wrapperAttr:{class:"basic-popup"},showCloseButton:!0,toolbarItems:[{toolbar:"bottom",template:"bottom-toolbar"}],width:"85vw",height:"90vh"},form:{colCount:2,items:[{dataField:"name",editorType:"dxTextBox",colSpan:1},{dataField:"startTime",editorType:"dxDateBox",colSpan:1},{dataField:"endTime",editorType:"dxDateBox",colSpan:1}],elementAttr:{class:"custom-form custom-form--edit"}}};var t=i(19212),K=i(67),A=i(72783),M=i(59444),I=i(44347),k=i(65343),D=i(92931),Q=i(25659),O=i(20843),J=i(25012),B=i(21194),y=i(12305),f=i(24270),T=i(16358);let N=(()=>{class e{constructor(a){this.toastService=a,this.copyToClipboard=()=>{navigator.clipboard.writeText(this.value).then(()=>{this.toastService.info(`\u5df2\u8907\u88fdToken: ${this.value}`),console.log("Text copied to clipboard")}).catch(n=>{console.error("Error copying text: ",n)})}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(f.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-copy-to-clipboard"]],inputs:{value:"value",cellInfo:"cellInfo"},decls:1,vars:0,consts:[["stylingMode","contained","icon","copy","type","normal",3,"onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"dx-button",0),t.NdJ("onClick",function(){return o.copyToClipboard()}),t.qZA())},dependencies:[T.K],encapsulation:2})}return e})();var Z=i(53009);let P=(()=>{class e{constructor(a,n){this.restService=a,this.toastService=n,this.regenerateApiKey=()=>{this.restService.request({url:`/api/app/jbnotifier-admin/api-keys/values/${this.value}`,method:"PUT"}).subscribe(()=>{this.grid.instance.refresh(),this.toastService.info("\u5df2\u91cd\u65b0\u7522\u751fToken!")})}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(Z.$),t.Y36(f.P))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-regnerate-token-button"]],inputs:{value:"value",grid:"grid"},decls:1,vars:0,consts:[["stylingMode","contained","icon","refresh","type","success",3,"onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"dx-button",0),t.NdJ("onClick",function(){return o.regenerateApiKey()}),t.qZA())},dependencies:[T.K],encapsulation:2})}return e})();const U=["grid"];function $(e,r){if(1&e&&t._UZ(0,"app-copy-to-clipboard",8),2&e){const a=r.$implicit;t.Q6J("cellInfo",a)("value",null==a.row||null==a.row.data?null:a.row.data.value)}}function L(e,r){if(1&e&&t._UZ(0,"app-regnerate-token-button",9),2&e){const a=r.$implicit;t.oxw();const n=t.MAs(4);t.Q6J("value",null==a.row||null==a.row.data?null:a.row.data.id)("grid",n)}}function V(e,r){1&e&&t.GkF(0)}const Y=e=>({$implicit:e});function j(e,r){if(1&e&&(t.ynx(0),t.YNc(1,V,1,0,"ng-container",10),t.BQk()),2&e){const a=r.$implicit,n=t.oxw().$implicit,o=t.oxw();t.xp6(),t.Q6J("ngTemplateOutlet",o.templateStore.getGridTemplates(n.key))("ngTemplateOutletContext",t.VKq(2,Y,a))}}function R(e,r){if(1&e&&(t.ynx(0),t.YNc(1,j,2,4,"ng-container",7),t.BQk()),2&e){const a=r.$implicit;t.xp6(),t.Q6J("dxTemplateOf",a.key)}}function G(e,r){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-bottom-toolbar-btns",1),t.qZA()),2&e){t.oxw();const a=t.MAs(4);t.xp6(),t.Q6J("grid",a)}}const w=[{path:"",component:(()=>{class e{constructor(a,n,o){this.gridDataSourceService=a,this.templateStore=n,this.tenantChooser=o,this.columns=v,this.cRUDEndpoints=u,this.dataFieldLookupSourceMapping=h,this.dataFieldTranslationKeysMapping=F,this.relatedDataValueAndQueryStringKeyMapping=g,this.editingPropertiesForCreating=C,this.editingPropertiesForUpdating=b,this.tenantChooser.tenantId$.subscribe(p=>{this.grid?.instance?.refresh()})}ngOnInit(){this.gridDataSource=this.gridDataSourceService.getDataSource(u,g)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(K.I),t.Y36(A.z),t.Y36(M.L))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-api-keys"]],viewQuery:function(n,o){if(1&n&&t.Gf(U,5),2&n){let p;t.iGM(p=t.CRH())&&(o.grid=p.first)}},decls:11,vars:16,consts:[[1,"custom-grid-container"],[3,"grid"],["appGridFeature","","appGridFeatureNotification","",3,"dataFieldTranslationKeysMapping","datafieldValueQueryStringKeyMapping","dataFieldLookUpSourceMapping","editingPropertiesForCreating","editingPropertiesForUpdating","columns","dataSource","syncLookupFilterValues"],["grid",""],[3,"cellInfo","value",4,"dxTemplate","dxTemplateOf"],[3,"value","grid",4,"dxTemplate","dxTemplateOf"],[4,"ngFor","ngForOf"],[4,"dxTemplate","dxTemplateOf"],[3,"cellInfo","value"],[3,"value","grid"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0),t._UZ(1,"app-tenant-chooser")(2,"app-grid-tool-bar",1),t.TgZ(3,"dx-data-grid",2,3),t.YNc(5,$,1,2,"app-copy-to-clipboard",4)(6,L,1,2,"app-regnerate-token-button",5)(7,R,2,1,"ng-container",6),t.ALo(8,"keyvalue"),t.YNc(9,G,2,1,"div",7),t.qZA(),t._UZ(10,"app-notification-pager",1),t.qZA()),2&n){const p=t.MAs(4);t.xp6(2),t.Q6J("grid",p),t.xp6(),t.Q6J("dataFieldTranslationKeysMapping",o.dataFieldTranslationKeysMapping)("datafieldValueQueryStringKeyMapping",o.relatedDataValueAndQueryStringKeyMapping)("dataFieldLookUpSourceMapping",o.dataFieldLookupSourceMapping)("editingPropertiesForCreating",o.editingPropertiesForCreating)("editingPropertiesForUpdating",o.editingPropertiesForUpdating)("columns",o.columns)("dataSource",o.gridDataSource)("syncLookupFilterValues",!1),t.xp6(2),t.Q6J("dxTemplateOf","copy-token-value"),t.xp6(),t.Q6J("dxTemplateOf","regenerate-token-button"),t.xp6(),t.Q6J("ngForOf",t.lcZ(8,14,o.templateStore.gridTemplates)),t.xp6(2),t.Q6J("dxTemplateOf","bottom-toolbar"),t.xp6(),t.Q6J("grid",p)}},dependencies:[s.sg,s.tP,I._,k.f,D.R,Q.l,O.p6,J.e,B.D,y.D,N,P,s.Nd],encapsulation:2})}return e})(),canActivate:[c.a1M,c.nG9]}];let z=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(w),m.Bz]})}return e})();var E=i(31610),X=i(5533),H=i(41992),W=i(10313);let _=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[s.ez,z,E.m,X.P,H.e,W.w,y.D]})}return e})()}}]);