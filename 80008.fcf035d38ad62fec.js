"use strict";(self.webpackChunkJBNotifier=self.webpackChunkJBNotifier||[]).push([[80008],{80008:(V,x,i)=>{i.r(x),i.d(x,{CronTestingModule:()=>w});var e=i(96814),g=i(66648),h=i(88762),v=i(23758),d=i(19212),_=i(40165),C=i(26600);const S=[{path:"",component:(()=>{class c{constructor(){this.cronExpression="*/15 * * * 1-5",this.expressionInfos=[{cron:"1 1 * * 2,2",expectedEndTime:null,expectedPushCount:0,description:"\u63cf\u8ff0 1"},{cron:"1 1 1,2,3 * *",expectedEndTime:"2024-06-01T14:30:00",description:"\u63cf\u8ff0 1 - 1"}],this.selected=["1","1-1-1","2-1"],this.dataSource=[{id:"1",name:"1"},{id:"1-1",name:"1-1",parentId:"1"},{id:"1-1-1",name:"1-1-1",parentId:"1-1"},{id:"1-1-2",name:"1-1-2",parentId:"1-1"},{id:"2",name:"2"},{id:"2-1",name:"2-1",parentId:"2"},{id:"2-1-1",name:"2-1-1",parentId:"2-1"},{id:"2-1-2",name:"2-1-2",parentId:"2-1"},{id:"2-1-3",name:"2-1-3",parentId:"2-1"}]}onExpressionsChange(p){console.log("expressions"),console.log(p)}selectedChange(p){this.selected=p}static#e=this.\u0275fac=function(u){return new(u||c)};static#t=this.\u0275cmp=d.Xpm({type:c,selectors:[["app-customize-tenants"]],decls:2,vars:3,consts:[[3,"selected","dataSource","selectedChange"],[3,"expressionInfos","expressionsChange"]],template:function(u,m){1&u&&(d.TgZ(0,"app-jb-tree-view",0),d.NdJ("selectedChange",function(f){return m.selectedChange(f)}),d.qZA(),d.TgZ(1,"app-cron-expression-generator",1),d.NdJ("expressionsChange",function(f){return m.onExpressionsChange(f)}),d.qZA()),2&u&&(d.Q6J("selected",m.selected)("dataSource",m.dataSource),d.xp6(),d.Q6J("expressionInfos",m.expressionInfos))},dependencies:[_.D,C.c],encapsulation:2})}return c})(),canActivate:[h.a1M,h.nG9]}];let T=(()=>{class c{static#e=this.\u0275fac=function(u){return new(u||c)};static#t=this.\u0275mod=d.oAB({type:c});static#n=this.\u0275inj=d.cJS({imports:[v.Bz.forChild(S),v.Bz]})}return c})();var I=i(60752);let w=(()=>{class c{static#e=this.\u0275fac=function(u){return new(u||c)};static#t=this.\u0275mod=d.oAB({type:c});static#n=this.\u0275inj=d.cJS({imports:[e.ez,T,g.m,I.j,C.c]})}return c})()},26600:(V,x,i)=>{i.d(x,{c:()=>f});var e=i(19212),g=i(77490),h=i(96814);const d=(a,r)=>{if(void 0===r)return[];const t=[];return function n(o){a.filter(l=>l.parentId===o).forEach(l=>{t.push(l.id),n(l.id)})}(r),t};var J=i(16358),S=i(20843),T=i(95051),I=i(98179),w=i(61157),c=i(37072),E=i(21137);const p=["tree"];function u(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"dx-tree-view",8,9),e.NdJ("onItemSelectionChanged",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onItemSelectionChanged(o))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("dataSource",t._dataSource)("selectNodesRecursive",!1)}}function m(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"dx-scroll-view")(1,"div",3)(2,"div",4)(3,"dx-button",5),e.NdJ("onClick",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.restore())}),e.qZA()(),e.TgZ(4,"dx-check-box",6),e.NdJ("onValueChanged",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.onCustomSelectNodesRecursiveChanged(o))}),e.qZA(),e.TgZ(5,"span"),e._uU(6,"\u5b50\u9805\u76ee\u9023\u52d5"),e.qZA()(),e.YNc(7,u,2,2,"dx-tree-view",7),e.qZA()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("value",t.customSelectNodesRecursive),e.xp6(3),e.Q6J("ngIf",t.popupVisible)}}function b(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"dx-button",10),e.NdJ("onClick",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onConfirm())}),e.qZA()()}}let f=(()=>{class a{constructor(){this.customSelectNodesRecursive=!0,this.tagBoxSelected=[],this.treeViewselected=[],this._originSelected=[],this._dataSource=[],this.selected=[],this.dataSource=[],this.isViewMode=!1,this.selectedChange=new e.vpe,this.popupVisible=!1,this.popupButtonToolBars=[{toolbar:"bottom",template:"bottom-toolbar",location:"after"}],this.onCustomSelectNodesRecursiveChanged=t=>{this.customSelectNodesRecursive=t.value},this.restore=()=>{const t=this.customSelectNodesRecursive;this.customSelectNodesRecursive=!1,this.tree.instance.unselectAll(),this._originSelected.forEach(n=>{this.tree.instance.selectItem(n)}),this.customSelectNodesRecursive=t},this.onTagBoxFocusIn=()=>{const t=function v(a){const r=new Set;return a.filter(n=>!n.parentId).forEach(function t(n){if(n.selected){let s=n.parentId;for(;s;)r.add(s),s=a.find(l=>l.id===s)?.parentId}a.filter(s=>s.parentId===n.id).forEach(t)}),Array.from(r)}(this._dataSource);((a,r)=>{this._dataSource.forEach(t=>{const n=void 0!==r.find(o=>o===t.id);t.expanded=n})})(0,t),this.popupVisible=!0}}ngOnChanges(t){t.selected&&(this.treeViewselected=this.selected.map(n=>n),this.tagBoxSelected=this.selected.map(n=>n),this._originSelected=[...this.selected]),t.selected&&t.dataSource&&(this._dataSource=((a,r)=>this.dataSource.map(n=>{const o=void 0!==r.find(s=>s===n.id);return r.find(s=>s===n.id)?{...n,selected:o}:n}))(0,this.selected),this._originSelected=[...this.selected])}onItemSelectionChanged(t){if(this.customSelectNodesRecursive&&!0===t.itemData?.selected){const n=t.itemData?.id;d(this.dataSource,n).forEach(s=>{this.tree.instance.selectItem(s)})}if(this.customSelectNodesRecursive&&!1===t.itemData?.selected){const n=t.itemData?.id;d(this.dataSource,n).forEach(s=>{this.tree.instance.unselectItem(s)})}this.treeViewselected=this._dataSource.filter(n=>n.selected).map(n=>n.id)}onConfirm(){this.tagBoxSelected=this.treeViewselected.map(t=>t),this.popupVisible=!1,this.selectedChange.emit(this.treeViewselected)}onTagBoxSelectionChanged(t){if(t.removedItems.length){const n=t.removedItems.map(o=>o.id);this.treeViewselected=this.treeViewselected.filter(o=>void 0===n.find(s=>o===s)),this._dataSource.forEach(o=>{n.find(l=>o.id===l)&&(o.selected=!1)}),this.selectedChange.emit(this.treeViewselected)}}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-jb-tree-view"]],viewQuery:function(n,o){if(1&n&&e.Gf(p,5),2&n){let s;e.iGM(s=e.CRH())&&(o.tree=s.first)}},inputs:{selected:"selected",dataSource:"dataSource",isViewMode:"isViewMode"},outputs:{selectedChange:"selectedChange"},standalone:!0,features:[e.TTD,e.jDz],decls:4,vars:10,consts:[["valueExpr","id","displayExpr","name",3,"value","dataSource","openOnFieldClick","multiline","disabled","valueChange","onSelectionChanged","onFocusIn"],["contentTemplate","contentTemplate","width","35%","minWidth","300px",3,"toolbarItems","visible","showTitle"],[4,"dxTemplate","dxTemplateOf"],[1,"d-flex","align-items-center","mb-1"],[1,"me-1"],["type","default","text","\u5fa9\u539f",3,"onClick"],[3,"value","onValueChanged"],["dataStructure","plain","keyExpr","id","displayExpr","name","parentIdExpr","parentId","selectionMode","multiple","showCheckBoxesMode","normal",3,"dataSource","selectNodesRecursive","onItemSelectionChanged",4,"ngIf"],["dataStructure","plain","keyExpr","id","displayExpr","name","parentIdExpr","parentId","selectionMode","multiple","showCheckBoxesMode","normal",3,"dataSource","selectNodesRecursive","onItemSelectionChanged"],["tree",""],["text","\u78ba\u5b9a",3,"onClick"]],template:function(n,o){1&n&&(e.TgZ(0,"dx-tag-box",0),e.NdJ("valueChange",function(l){return o.tagBoxSelected=l})("onSelectionChanged",function(l){return o.onTagBoxSelectionChanged(l)})("onFocusIn",function(){return o.onTagBoxFocusIn()}),e.qZA(),e.TgZ(1,"dx-popup",1),e.YNc(2,m,8,2,"dx-scroll-view",2)(3,b,2,0,"div",2),e.qZA()),2&n&&(e.Q6J("value",o.tagBoxSelected)("dataSource",o._dataSource)("openOnFieldClick",!1)("multiline",!0)("disabled",o.isViewMode),e.xp6(),e.Q6J("toolbarItems",o.popupButtonToolBars)("visible",o.popupVisible)("showTitle",!1),e.xp6(),e.Q6J("dxTemplateOf","contentTemplate"),e.xp6(),e.Q6J("dxTemplateOf","bottom-toolbar"))},dependencies:[g.P,J.K,S.p6,T.u,I.x,w.U,c.N,E.v,h.ez,h.O5]})}return a})()}}]);